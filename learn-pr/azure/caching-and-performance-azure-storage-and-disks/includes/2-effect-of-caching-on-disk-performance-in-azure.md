<span data-ttu-id="a90f7-101">Likt dina lokala datorer kan de virtuella datorernas prestanda bero på hur snabbt de kan läsa och skriva data.</span><span class="sxs-lookup"><span data-stu-id="a90f7-101">Much like your local computers, virtual machine performance can often be tied directly to how quickly it can read and write data.</span></span> <span data-ttu-id="a90f7-102">För att förstå hur vi kan förbättra prestandan, måste vi först förstå hur prestanda mäts och inställningar och alternativ som påverkar den.</span><span class="sxs-lookup"><span data-stu-id="a90f7-102">In order to understand how to improve that performance, we first have to understand how performance is measured and the settings and choices that affect it.</span></span>

<span data-ttu-id="a90f7-103">Vi tittar närmare på underliggande diskar och lagring som används för virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a90f7-103">We are looking specifically at the underlying disks and storage used for VMs.</span></span> <span data-ttu-id="a90f7-104">Du måste även ta programnivån i åtanke när du analyserar prestandan.</span><span class="sxs-lookup"><span data-stu-id="a90f7-104">When you are looking at performance, keep in mind that you will also have to consider the application layer.</span></span> <span data-ttu-id="a90f7-105">Om du kör en databas på en virtuell dator vill du kontrollera prestandainställningen för den databasen så att den är optimerad för den virtuella datorn och lagringen som du kör den på.</span><span class="sxs-lookup"><span data-stu-id="a90f7-105">For example, if you are running a database in a VM, you will want to look at the performance settings specific to the database to ensure it is optimized for the VM and storage you are running it on.</span></span>

<span data-ttu-id="a90f7-106">Låt oss börja med att definiera några begrepp och de garantier som Azure utfäster för dem.</span><span class="sxs-lookup"><span data-stu-id="a90f7-106">Let's start by defining a few terms and the guarantees Azure makes about them.</span></span>

## <a name="io-operations-per-second"></a><span data-ttu-id="a90f7-107">I/O-åtgärder per sekund</span><span class="sxs-lookup"><span data-stu-id="a90f7-107">I/O operations per second</span></span>

<span data-ttu-id="a90f7-108">Den lagringstyp som du väljer (standard eller premium) avgör hur snabba dina diskar är.</span><span class="sxs-lookup"><span data-stu-id="a90f7-108">The storage type you select (standard or premium) will decide how fast your disks are.</span></span> <span data-ttu-id="a90f7-109">Vi mäter prestandan i I/O-åtgärder per sekund eller IOPS (uttalas ”aj-åps”).</span><span class="sxs-lookup"><span data-stu-id="a90f7-109">We measure this performance in I/O operations per second, or IOPS (pronounced "eye-ops").</span></span>

<span data-ttu-id="a90f7-110">IOPS är ett tal för antalet begäranden som kan bearbetas av disken på en sekund.</span><span class="sxs-lookup"><span data-stu-id="a90f7-110">IOPS is number of requests that can be processed by the disk in one second.</span></span> <span data-ttu-id="a90f7-111">En enskild begäran är en läs- eller skrivåtgärd.</span><span class="sxs-lookup"><span data-stu-id="a90f7-111">A single request is a read or write operation.</span></span> <span data-ttu-id="a90f7-112">Detta mått tillämpas direkt på lagringen.</span><span class="sxs-lookup"><span data-stu-id="a90f7-112">This measurement is applied directly to storage.</span></span> <span data-ttu-id="a90f7-113">Till exempel: Om du har en disk som kan köra **5000 IOPS**, innebär det att den teoretiskt sett kan bearbetning 5 000 läs- och skrivåtgärder per sekund.</span><span class="sxs-lookup"><span data-stu-id="a90f7-113">For example, if you have a disk that is capable of doing a **5000 IOPS**, it means that it is theoretically capable of processing 5,000 read and or write operations per second.</span></span>

<span data-ttu-id="a90f7-114">IOPS påverkar programmets prestanda direkt.</span><span class="sxs-lookup"><span data-stu-id="a90f7-114">IOPS directly affects your application performance.</span></span> <span data-ttu-id="a90f7-115">Vissa program, till exempel återförsäljarwebbplatser, behöver hög IOPS för att hantera alla små och slumpmässiga I/O begäranden som måste bearbetas snabbt för att hålla platsen dynamiskt.</span><span class="sxs-lookup"><span data-stu-id="a90f7-115">Some applications, such as retail websites, need high IOPS to handle all the small and random IO requests that must be processed quickly to keep the site responsive.</span></span>

### <a name="iops-in-azure"></a><span data-ttu-id="a90f7-116">IOPS på Azure</span><span class="sxs-lookup"><span data-stu-id="a90f7-116">IOPS in Azure</span></span>

<span data-ttu-id="a90f7-117">När du kopplar en premiumlagringsdisk till en virtuell dator på hög nivå tilldelar Azure ett garanterat antal IOPS enligt diskspecifikationen.</span><span class="sxs-lookup"><span data-stu-id="a90f7-117">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="a90f7-118">Till exempel en **P50**-disk tilldelar **7500 IOPS**.</span><span class="sxs-lookup"><span data-stu-id="a90f7-118">For example, a **P50** disk provisions **7500 IOPS**.</span></span> <span data-ttu-id="a90f7-119">Varje storlek för virtuella datorer på hög nivå har en specifik IOPS-gräns.</span><span class="sxs-lookup"><span data-stu-id="a90f7-119">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="a90f7-120">Till exempel, en **Standard GS5**-VM har en gräns på **80 000 IOPS**.</span><span class="sxs-lookup"><span data-stu-id="a90f7-120">For example, a **Standard GS5** VM has an **80,000 IOPS** limit.</span></span>

<span data-ttu-id="a90f7-121">IOPS är ett mått på diskar med lagringsutrymme, men det är en _teoretisk_ gräns - två andra faktorer kan påverka den faktiska programprestandan: **dataflöde** och **svarstid**.</span><span class="sxs-lookup"><span data-stu-id="a90f7-121">IOPS is a measurement of the storage disks, however it's a _theoretical_ limit - two other factors can affect the actual application performance: **throughput** and **latency**.</span></span>

### <a name="what-is-throughput"></a><span data-ttu-id="a90f7-122">Vad är dataflöde?</span><span class="sxs-lookup"><span data-stu-id="a90f7-122">What is throughput?</span></span>
<span data-ttu-id="a90f7-123">Dataflöde (kallas även ”bandbredd”) är mängden data som ditt program skickar till lagringsdiskar inom ett visst intervall (vanligtvis per sekund).</span><span class="sxs-lookup"><span data-stu-id="a90f7-123">Throughput (also called "bandwidth") is the amount of data that your application is sending to the storage disks in a specified interval (typically per second).</span></span> <span data-ttu-id="a90f7-124">Om ditt program utför I/O-åtgärder med stora datablock kräver det ett högt dataflöde.</span><span class="sxs-lookup"><span data-stu-id="a90f7-124">If your application is performing I/O with large blocks of data, it requires high throughput.</span></span>

<span data-ttu-id="a90f7-125">Azure tillhandahåller genomflödet i premium-lagringsdiskar baserat på diskarnas specifikationer.</span><span class="sxs-lookup"><span data-stu-id="a90f7-125">Azure provisions throughput in premium storage disks based on that disks' specification.</span></span> <span data-ttu-id="a90f7-126">Till exempel tilldelas en **P50**-disk ett dataflöde på **250 MB per sekund** per disk.</span><span class="sxs-lookup"><span data-stu-id="a90f7-126">For example, a **P50** disk provisions **250 MB per second** disk throughput.</span></span> <span data-ttu-id="a90f7-127">Varje storlek för virtuella datorer på hög nivå har en specifik gräns för _genomflödet_.</span><span class="sxs-lookup"><span data-stu-id="a90f7-127">Each high scale VM size also has as specific _throughput limit_ that it can sustain.</span></span> <span data-ttu-id="a90f7-128">Till exempel, den virtuella datorn **Standard GS5** har en maximal genomströmning på **2 000 MB per sekund**.</span><span class="sxs-lookup"><span data-stu-id="a90f7-128">For example, **Standard GS5** VM has a maximum throughput of **2,000 MB per second**.</span></span>

#### <a name="iops-vs-throughput"></a><span data-ttu-id="a90f7-129">IOPS jämfört med dataflöde</span><span class="sxs-lookup"><span data-stu-id="a90f7-129">IOPS vs. throughput</span></span>

<span data-ttu-id="a90f7-130">Dataflöde och IOPS har en direkt relation och om du ändrar den ena påverkas den andra.</span><span class="sxs-lookup"><span data-stu-id="a90f7-130">Throughput and IOPS have a direct relationship, changing one will have a direct impact on the other.</span></span> <span data-ttu-id="a90f7-131">Du kan använda den här formeln för att få en teoretisk gräns för dataflödet: `IOPS x I/O size = throughput`.</span><span class="sxs-lookup"><span data-stu-id="a90f7-131">To get a theoretical limit of throughput you can use the formula: `IOPS x I/O size = throughput`.</span></span> <span data-ttu-id="a90f7-132">Det är viktigt att tänka på båda dessa värden när du planerar ditt program.</span><span class="sxs-lookup"><span data-stu-id="a90f7-132">It's important to consider both of these values when planning your application.</span></span>

### <a name="what-is-latency"></a><span data-ttu-id="a90f7-133">Vad är svarstid?</span><span class="sxs-lookup"><span data-stu-id="a90f7-133">What is latency?</span></span>

<span data-ttu-id="a90f7-134">Det tar tid att läsa och skriva data.</span><span class="sxs-lookup"><span data-stu-id="a90f7-134">Reading and writing data takes time.</span></span> <span data-ttu-id="a90f7-135">Det är där _svarstid_ kommer in.</span><span class="sxs-lookup"><span data-stu-id="a90f7-135">This is where _latency_ comes in.</span></span> <span data-ttu-id="a90f7-136">Svarstiden är den tid det tar att din app för att skicka en begäran till disken och få svar.</span><span class="sxs-lookup"><span data-stu-id="a90f7-136">Latency is the time it takes your app to send a request to the disk and get a response.</span></span> <span data-ttu-id="a90f7-137">Svarstiden berättar hur lång tid det tar att _bearbeta_ en enda läs- eller skriv-I/O-åtgärd.</span><span class="sxs-lookup"><span data-stu-id="a90f7-137">Essentially, latency tells us how long it takes to _process_ a single read or write I/O request.</span></span>

<span data-ttu-id="a90f7-138">Svarstiden sätter en gräns för IOPS.</span><span class="sxs-lookup"><span data-stu-id="a90f7-138">Latency puts a limit on IOPS.</span></span> <span data-ttu-id="a90f7-139">Till exempel, om vår disk kan hantera 5 000 IOPS men varje åtgärd tar 10 ms att bearbeta kommer vår app inte att kunna bearbeta mer än 100 åtgärder per sekund på grund av bearbetningstiden.</span><span class="sxs-lookup"><span data-stu-id="a90f7-139">For example, if our disk can handle 5000 IOPS but each operation takes 10 ms to process, then our app will be capped to 100 operation per second due to the processing time.</span></span> <span data-ttu-id="a90f7-140">Det här är ett enkelt exempel, svarstiden brukar vara mycket lägre.</span><span class="sxs-lookup"><span data-stu-id="a90f7-140">This is a simple example, most of the time latency will be much lower.</span></span> <span data-ttu-id="a90f7-141">Svarstiden och dataflödet avgör helt enkelt hur snabbt din app kan bearbeta data från lagringen.</span><span class="sxs-lookup"><span data-stu-id="a90f7-141">Ultimately, latency and throughput will determine how fast your app can process data from storage.</span></span> 

<span data-ttu-id="a90f7-142">Premium Storage erbjuder genomgående korta svarstider och du kan uppnå ännu bättre svarstid vid behov via _cachelagring_.</span><span class="sxs-lookup"><span data-stu-id="a90f7-142">Premium Storage provides consistent low latencies and you can achieve even better latency when necessary through _caching_.</span></span> 

## <a name="testing-your-disk-performance"></a><span data-ttu-id="a90f7-143">Testa din diskprestanda</span><span class="sxs-lookup"><span data-stu-id="a90f7-143">Testing your disk performance</span></span>

<span data-ttu-id="a90f7-144">Du kan justera och balansera IOPS, dataflöde och svarstid för dina virtuella diskar genom att välja rätt storlek och lagring för dina virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a90f7-144">You can adjust and balance the IOPS, throughput and latency of your VM disks by selecting the right VM size and storage type.</span></span> <span data-ttu-id="a90f7-145">Vanligtvis har de större och dyrare virtuella datorerna högre garantier för maximalt IOPS och dataflöde.</span><span class="sxs-lookup"><span data-stu-id="a90f7-145">Typically the larger or more expensive VM sizes will have higher guarantees for max IOPS and throughput.</span></span> <span data-ttu-id="a90f7-146">Lägg till detta i ekvationen mellan Standard och Premium Storage-konton, samt HDD och SDD, så har du många parametrar att experimentera med.</span><span class="sxs-lookup"><span data-stu-id="a90f7-146">Add into that equation Standard vs. Premium storage and HDD vs. SSD choices and you have several parameters to play with.</span></span>

<span data-ttu-id="a90f7-147">Det är viktigt att känna till ditt programs behov för att välja rätt kombination.</span><span class="sxs-lookup"><span data-stu-id="a90f7-147">To select the right combination involves understanding what your application requirements are.</span></span> <span data-ttu-id="a90f7-148">Program som kräver högt I/O, till exempel databasservrar eller system för transaktioner online, kräver högre IOPS, medan mer databaserade program ofta har lägre krav.</span><span class="sxs-lookup"><span data-stu-id="a90f7-148">High-I/O applications such as database servers or online transactional processing systems will require higher IOPS, whereas more computational based applications might get by with much lower requirements.</span></span> <span data-ttu-id="a90f7-149">Dessutom kan _typen_ av åtgärder som utförs av programmet påverka ditt dataflöde.</span><span class="sxs-lookup"><span data-stu-id="a90f7-149">In addition, the _types_ of operations the applications do will affect your throughput.</span></span> <span data-ttu-id="a90f7-150">Åtkomst med slumpmässig I/O är ofta långsammare än långa sekventiella läsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="a90f7-150">High random access I/O tends to be slower than long sequential reads.</span></span>

<span data-ttu-id="a90f7-151">När du har valt din konfiguration kan du använda verktyg som [Iometer](http://iometer.org/) för att testa din diskprestanda på Linux- och Windows-datorer.</span><span class="sxs-lookup"><span data-stu-id="a90f7-151">Once you select your configuration, you can use tools such as [Iometer](http://iometer.org/) to test your disk performance on Linux and Windows VMs.</span></span> <span data-ttu-id="a90f7-152">Detta ger dig en mer verklig uppfattning om vilken typ av prestanda du kan förvänta dig.</span><span class="sxs-lookup"><span data-stu-id="a90f7-152">This will give you a more real-world sense of what kind of performance to expect.</span></span> <span data-ttu-id="a90f7-153">Det kan också hjälpa dig att identifiera sätt att förbättra appens lagringsanvändning – till exempel ett program som använder enkeltrådade I/O-åtgärder påverkas troligen av sämre I/O-prestanda på grund av svarstiden.</span><span class="sxs-lookup"><span data-stu-id="a90f7-153">It can also help you to identify ways to improve your app's usage of storage - for example, an application that does single threaded I/O is likely to suffer reduced I/O performance because of latency.</span></span>

<span data-ttu-id="a90f7-154">Nu ska vi titta på några saker som vi kan göra för att förbättra vår diskprestanda.</span><span class="sxs-lookup"><span data-stu-id="a90f7-154">Let's look at some other things we can do to improve our disk performance.</span></span>

