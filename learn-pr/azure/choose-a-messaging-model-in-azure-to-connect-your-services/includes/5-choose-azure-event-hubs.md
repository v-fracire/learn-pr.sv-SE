<span data-ttu-id="14523-101">Det finns vissa program som producerar ett stort antal händelser från nästan lika många källor.</span><span class="sxs-lookup"><span data-stu-id="14523-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="14523-102">Termen ”stordata” tillämpas ofta på dessa situationer och det krävs en unik infrastruktur för att hantera dem.</span><span class="sxs-lookup"><span data-stu-id="14523-102">We often hear the term "Big Data" applied to these situations, and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="14523-103">Anta att du arbetar på Contoso Aircraft Engines.</span><span class="sxs-lookup"><span data-stu-id="14523-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="14523-104">Motorerna som din arbetsgivare tillverkar har hundratals sensorer.</span><span class="sxs-lookup"><span data-stu-id="14523-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="14523-105">Varje dag innan ett flygplan kan flygas ansluts motorerna till en testmiljö där de gås igenom.</span><span class="sxs-lookup"><span data-stu-id="14523-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="14523-106">Dessutom strömmas cachelagrade flygdata när flygplanet är anslutet till en markutrustning.</span><span class="sxs-lookup"><span data-stu-id="14523-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="14523-107">Nu vill du använda historiska sensordata för att hitta mönster i sensoravläsningarna som indikerar att ett motorfel troligen kommer att inträffa snart.</span><span class="sxs-lookup"><span data-stu-id="14523-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="14523-108">Du vill också att sensoravläsningarna i realtid ska jämföras mot de här felmönstren.</span><span class="sxs-lookup"><span data-stu-id="14523-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="14523-109">Därefter kommer du att kunna varna användarna nära nog i realtid om en motor visar oroväckande värden.</span><span class="sxs-lookup"><span data-stu-id="14523-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="14523-110">Vad är Azure Event Hubs?</span><span class="sxs-lookup"><span data-stu-id="14523-110">What is Azure Event Hubs?</span></span>
<span data-ttu-id="14523-111">Event Hubs är en mellanhand för kommunikationsmönstret publicera/prenumerera.</span><span class="sxs-lookup"><span data-stu-id="14523-111">Event Hubs is an intermediary for the publish-subscribe communication pattern.</span></span> <span data-ttu-id="14523-112">Men till skillnad från Event Grid är det optimerat för mycket stora dataflöden, ett stort antal utgivare, säkerhet och återhämtning.</span><span class="sxs-lookup"><span data-stu-id="14523-112">Unlike Event Grid, however, it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

#### <a name="what-is-an-event-hub"></a><span data-ttu-id="14523-113">Vad är en händelsehubb?</span><span class="sxs-lookup"><span data-stu-id="14523-113">What is an Event Hub?</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yuat]

<span data-ttu-id="14523-114">Event Grid passar perfekt för mönstret publicera/prenumerera, eftersom det bara hanterar prenumerationer och dirigerar kommunikation till prenumeranterna. Event Hubs utför dessutom ett stort antal ytterligare tjänster.</span><span class="sxs-lookup"><span data-stu-id="14523-114">Whereas Event Grid fits perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hubs performs quite a few additional services.</span></span> <span data-ttu-id="14523-115">Dessa ytterligare tjänster innebär att det mer liknar en tjänstebuss eller meddelandekö, än en enkel händelseavsändare.</span><span class="sxs-lookup"><span data-stu-id="14523-115">These additional services make it look more like a service bus or message queue, than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="14523-116">Partitioner</span><span class="sxs-lookup"><span data-stu-id="14523-116">Partitions</span></span>
<span data-ttu-id="14523-117">När Event Hubs tar emot kommunikation delas den upp i partitioner.</span><span class="sxs-lookup"><span data-stu-id="14523-117">As Event Hubs receives communications, it divides them into partitions.</span></span> <span data-ttu-id="14523-118">Partitioner är buffertar där kommunikationen sparas.</span><span class="sxs-lookup"><span data-stu-id="14523-118">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="14523-119">Händelsebuffertarna innebär att händelserna inte är helt tillfälliga, samt att en händelse inte missas om en prenumerant är upptagen eller offline.</span><span class="sxs-lookup"><span data-stu-id="14523-119">Because of the event buffers, events are not completely ephemeral, and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="14523-120">Prenumeranten kan alltid använda bufferten för att ”komma ikapp”.</span><span class="sxs-lookup"><span data-stu-id="14523-120">The subscriber can always use the buffer to "catch up."</span></span> <span data-ttu-id="14523-121">Som standard lagras händelserna i bufferten i 24 timmar. Sedan tas de bort automatiskt.</span><span class="sxs-lookup"><span data-stu-id="14523-121">By default, events stay in the buffer for 24 hours before they automatically expire.</span></span>

<span data-ttu-id="14523-122">Buffertarna kallas partitioner eftersom data delas upp mellan dem.</span><span class="sxs-lookup"><span data-stu-id="14523-122">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="14523-123">Varje händelsehubb har minst två partitioner, och varje partition har en separat uppsättning prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="14523-123">Every event hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="14523-124">Capture</span><span class="sxs-lookup"><span data-stu-id="14523-124">Capture</span></span>
<span data-ttu-id="14523-125">Event Hubs kan skicka alla händelser direkt till Azure Data Lake eller Azure Blob Storage för prisvärd och permanent lagring.</span><span class="sxs-lookup"><span data-stu-id="14523-125">Event Hubs can send all your events immediately to Azure Data Lake or Azure Blob storage for inexpensive, permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="14523-126">Autentisering</span><span class="sxs-lookup"><span data-stu-id="14523-126">Authentication</span></span>
<span data-ttu-id="14523-127">Alla utgivare autentiseras och får en token utfärdad.</span><span class="sxs-lookup"><span data-stu-id="14523-127">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="14523-128">Det innebär att Event Hubs kan ta emot händelser från externa enheter och mobilappar, utan att bedrägeridata riskerar att förstöra analysen.</span><span class="sxs-lookup"><span data-stu-id="14523-128">This means Event Hubs can accept events from external devices and mobile apps, without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-event-hubs"></a><span data-ttu-id="14523-129">Använda Event Hubs</span><span class="sxs-lookup"><span data-stu-id="14523-129">Using Event Hubs</span></span>
<span data-ttu-id="14523-130">Event Hubs har stöd för pipelining av händelseströmmar till andra Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="14523-130">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="14523-131">Om det används med Azure Stream Analytics möjliggörs till exempel komplexa dataanalyser nära nog i realtid, där flera händelser kan korreleras och mönster upptäckas.</span><span class="sxs-lookup"><span data-stu-id="14523-131">Using it with Azure Stream Analytics, for instance, allows complex analysis of data in near real time, with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="14523-132">I det här fallet anses Stream Analytics vara en prenumerant.</span><span class="sxs-lookup"><span data-stu-id="14523-132">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="14523-133">När det gäller våra flygplansmotorer konfigurerar vi arkitekturen så att Event Hubs autentiserar kommunikationen från motorerna.</span><span class="sxs-lookup"><span data-stu-id="14523-133">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="14523-134">Sedan låter vi den använda Capture för att spara alla data i Data Lake.</span><span class="sxs-lookup"><span data-stu-id="14523-134">We will then have it use capture to save all the data to Data Lake.</span></span> <span data-ttu-id="14523-135">Senare kan vi använda alla data för att träna och förbättra våra maskininlärningsmodeller.</span><span class="sxs-lookup"><span data-stu-id="14523-135">Later, we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="14523-136">Slutligen hämtas våra händelseströmmar av Stream Analytics-prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="14523-136">Finally, our event streams will be picked up by Stream Analytics subscribers.</span></span> <span data-ttu-id="14523-137">Stream Analytics använder vår maskininlärningsmodell för att leta efter mönster i sensorinformationen som kan indikera problem.</span><span class="sxs-lookup"><span data-stu-id="14523-137">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="14523-138">Eftersom vi har flera partitioner och varje motor endast skickar sina data till en partition, behöver varje instans av Stream Analytics-prenumeranten endast hantera en delmängd av den fullständiga datamängden.</span><span class="sxs-lookup"><span data-stu-id="14523-138">Because we have several partitions, and each engine sends all its data to only one partition, each instance of our Stream Analytics subscriber only need deal with a subset of our overall data.</span></span> <span data-ttu-id="14523-139">Den behöver inte filtrera och korrelera samtliga.</span><span class="sxs-lookup"><span data-stu-id="14523-139">It does not have to filter and correlate over all of it.</span></span>

## <a name="which-service-should-i-choose"></a><span data-ttu-id="14523-140">Vilken tjänst ska jag välja?</span><span class="sxs-lookup"><span data-stu-id="14523-140">Which service should I choose?</span></span>
<span data-ttu-id="14523-141">Precis som med våra köalternativ kan det verka svårt att välja mellan dessa två händelseleveranstjänster till att börja med.</span><span class="sxs-lookup"><span data-stu-id="14523-141">Just like our queue choice, selecting between these two event delivery services can seem tricky at first.</span></span> <span data-ttu-id="14523-142">Båda har stöd för *At Least Once*-semantik.</span><span class="sxs-lookup"><span data-stu-id="14523-142">Both support *At Least Once* semantics.</span></span>

#### <a name="choose-event-hubs-if"></a><span data-ttu-id="14523-143">Välj Event Hubs om:</span><span class="sxs-lookup"><span data-stu-id="14523-143">Choose Event Hubs if:</span></span>  

- <span data-ttu-id="14523-144">Du behöver kunna autentisera ett stort antal utgivare.</span><span class="sxs-lookup"><span data-stu-id="14523-144">You need to support authenticating a large number of publishers.</span></span>
- <span data-ttu-id="14523-145">Du behöver kunna spara en händelseström i Data Lake eller i blobblagringen.</span><span class="sxs-lookup"><span data-stu-id="14523-145">You need to save a stream of events to Data Lake or Blob storage.</span></span>
- <span data-ttu-id="14523-146">Du behöver kunna aggregera eller analysera din händelseström.</span><span class="sxs-lookup"><span data-stu-id="14523-146">You need aggregation or analytics on your event stream.</span></span>
- <span data-ttu-id="14523-147">Du behöver tillförlitliga meddelandefunktioner eller återhämtning.</span><span class="sxs-lookup"><span data-stu-id="14523-147">You need reliable messaging or resiliency.</span></span>  

<span data-ttu-id="14523-148">Men om du bara behöver en enkel händelseinfrastruktur för publicera/prenumerera och med betrodda utgivare (till exempel din egen webbserver), bör du välja Event Grid.</span><span class="sxs-lookup"><span data-stu-id="14523-148">Otherwise, if you need a simple event publish-subscribe infrastructure, with trusted publishers (for instance, your own web server), you should choose Event Grid.</span></span>

<span data-ttu-id="14523-149">Med Event Hubs kan du skapa en pipeline för stordata som kan bearbeta miljontals händelser per sekund med kort svarstid.</span><span class="sxs-lookup"><span data-stu-id="14523-149">Event Hubs lets you build a big data pipeline capable of processing millions of events per second with low latency.</span></span> <span data-ttu-id="14523-150">Den kan hantera data från samtidiga källor och dirigera den till en mängd olika tjänster för bearbetning av dataströmmens infrastrukturer och analys.</span><span class="sxs-lookup"><span data-stu-id="14523-150">It can handle data from concurrent sources and route it to a variety of stream-processing infrastructures and analytics services.</span></span> <span data-ttu-id="14523-151">Det gör det möjligt att bearbeta i realtid och stöder upprepad återuppspelning av lagrade rådata.</span><span class="sxs-lookup"><span data-stu-id="14523-151">It enables real-time processing and supports repeated replay of stored raw data.</span></span> 