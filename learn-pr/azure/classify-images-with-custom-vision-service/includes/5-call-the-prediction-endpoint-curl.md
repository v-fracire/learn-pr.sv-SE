<span data-ttu-id="b8e75-101">I den förra övningen testade vi vår träningsmodell med funktionen **Quick Test** (Snabbtest) i Custom Vision Service-portalen.</span><span class="sxs-lookup"><span data-stu-id="b8e75-101">In the last exercise, we tested our trained model using the **Quick Test** feature of the Custom Vision Service portal.</span></span> <span data-ttu-id="b8e75-102">Det här är ett bra sätt att snabbt kontrollera modellens korrekthet med vissa testbilder.</span><span class="sxs-lookup"><span data-stu-id="b8e75-102">This is a great way to quickly check the accuracy of the model with some test images.</span></span> <span data-ttu-id="b8e75-103">Nu går vi steget längre och gör anrop till förutsägelseslutpunkten för vår modell via HTTP.</span><span class="sxs-lookup"><span data-stu-id="b8e75-103">Let's go a little further and make calls to the prediction endpoint of our model over HTTP.</span></span>

[!include[](../../../includes/azure-sandbox-activate.md)]

1. <span data-ttu-id="b8e75-104">Väl tillbaka i *Artworks-projektet*\* i Custom Vision Service-portalen väljer du fliken **Prestanda**.</span><span class="sxs-lookup"><span data-stu-id="b8e75-104">Returning to your *Artworks*\* project in the Custom Vision Service portal, select the  **Performance** tab.</span></span>

    ![Välja fliken Prestanda](../media/5-performance-tab.png)

1. <span data-ttu-id="b8e75-106">Välj **Ange som standard**  och kontrollera att den senaste iterationen av modellen är standarditerationen.</span><span class="sxs-lookup"><span data-stu-id="b8e75-106">Select **Make default** to make sure the latest iteration of the model is the default iteration.</span></span>

1. <span data-ttu-id="b8e75-107">Välj **Förutsägelse-URL**.</span><span class="sxs-lookup"><span data-stu-id="b8e75-107">Select **Prediction URL**.</span></span> <span data-ttu-id="b8e75-108">Då visas en dialogruta med den information som vi behöver för att göra anrop.</span><span class="sxs-lookup"><span data-stu-id="b8e75-108">This displays a dialog of the information we need to make our calls.</span></span> 

    ![Visa information om Förutsägelse-URL](../media/5-portal-prediction-url.png)

    <span data-ttu-id="b8e75-110">Så som visas i dialogrutan kan vi anropa förutsägelseslutpunkten och skicka en bild-URL till den.</span><span class="sxs-lookup"><span data-stu-id="b8e75-110">As the dialog shows, we can call the prediction endpoint and pass it an image URL.</span></span> <span data-ttu-id="b8e75-111">Vi kan även skicka en raw-bild till slutpunkten i brödtexten i begäran.</span><span class="sxs-lookup"><span data-stu-id="b8e75-111">We can also pass a raw image to the endpoint in the body of the request.</span></span>

    <span data-ttu-id="b8e75-112">Anteckna tre typer av information från den här dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="b8e75-112">Take note of three pieces of information from this dialog.</span></span>
     - <span data-ttu-id="b8e75-113">**Förutsägelsenyckel**: den här nyckeln måste anges som en rubrik i alla begäranden.</span><span class="sxs-lookup"><span data-stu-id="b8e75-113">**Prediction-Key**: This key has to be set as a header in all requests.</span></span> <span data-ttu-id="b8e75-114">Det är detta som ger oss tillgång till slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="b8e75-114">That's what gives us access to the endpoint.</span></span>
    - <span data-ttu-id="b8e75-115">**Begärande-URL**: dialogrutan visar två olika URL:er.</span><span class="sxs-lookup"><span data-stu-id="b8e75-115">**Request URL**: The dialog shows two different URLs.</span></span> <span data-ttu-id="b8e75-116">Om vi publicerar en bild-URL använder du den första URL som slutar med `/url`.</span><span class="sxs-lookup"><span data-stu-id="b8e75-116">If we're posting an image URL, then use the first URL, which ends in `/url`.</span></span> <span data-ttu-id="b8e75-117">Om vi vill publicera en raw-bild i meddelandetexten i begäran kan vi använda den andra URL:en, som slutar med `/image`.</span><span class="sxs-lookup"><span data-stu-id="b8e75-117">If we want to post a raw image in the body of our request, we use the second URL, which ends in `/image`.</span></span>
    - <span data-ttu-id="b8e75-118">**Innehållstyp**: om vi publicerar en raw-bild anger vi meddelandetexten i begäran till den binära representationen av bilden och innehållstypen till `application/octet-stream`.</span><span class="sxs-lookup"><span data-stu-id="b8e75-118">**Content-Type**: If we're posting a raw image, we set the body of the request to the binary representation of the image and the content type to `application/octet-stream`.</span></span> <span data-ttu-id="b8e75-119">Om vi publicerar en bild-URL lägger vi den som JSON i meddelandetexten och anger innehållstypen till `application/json`.</span><span class="sxs-lookup"><span data-stu-id="b8e75-119">If we're posting an image URL, we put that as JSON in the body and set the content type to `application/json`.</span></span>
    

3. <span data-ttu-id="b8e75-120">Kopiera och spara den första URL:en och värdet `Prediction-Key` från dialogrutan **Så här använder du Prediction API**.</span><span class="sxs-lookup"><span data-stu-id="b8e75-120">Copy and save the first URL and the `Prediction-Key` value from the **How to use the Prediction API** dialog.</span></span> 

> [!TIP]
> <span data-ttu-id="b8e75-121">**cURL** är ett kommandoradsverktyg som kan användas för att skicka och ta emot filer.</span><span class="sxs-lookup"><span data-stu-id="b8e75-121">**cURL** is a command line tool that can be used to send or receive files.</span></span> <span data-ttu-id="b8e75-122">Det ingår i Linux, macOS och Windows 10 och kan laddas ned för de flesta andra operativsystem.</span><span class="sxs-lookup"><span data-stu-id="b8e75-122">It's included with Linux, macOS, and Windows 10, and can be downloaded for most other operating systems.</span></span> <span data-ttu-id="b8e75-123">cURL har stöd för en rad protokoll, till exempel HTTP, HTTPS, FTP, FTPS, SFTP, LDAP, TELNET, SMTP och POP3. Du kan läsa mer genom att följa länkarna nedan:</span><span class="sxs-lookup"><span data-stu-id="b8e75-123">cURL supports numerous protocols like HTTP, HTTPS, FTP, FTPS, SFTP, LDAP, TELNET, SMTP, POP3, etc. For more information, refer to the links below:</span></span>
>
>- <https://en.wikipedia.org/wiki/CURL>
>- <https://curl.haxx.se/docs/> 
> 
> <span data-ttu-id="b8e75-124">cURL är redan installerat i Azure Cloud Shell i sandbox-miljön.</span><span class="sxs-lookup"><span data-stu-id="b8e75-124">cURL is already installed in the Azure Cloud Shell in the sandbox.</span></span> <span data-ttu-id="b8e75-125">Så i den här övningen gör vi HTTP-anrop till vår slutpunkt genom att använda cURL.</span><span class="sxs-lookup"><span data-stu-id="b8e75-125">So, we'll cURL in this exercise to make HTTP calls to our endpoint.</span></span>

2. <span data-ttu-id="b8e75-126">Kör följande kommando i Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="b8e75-126">Execute the following command in the Cloud Shell.</span></span> <span data-ttu-id="b8e75-127">Ersätt **[slutpunkts-URL]** med den URL som du sparade från det förra steget.</span><span class="sxs-lookup"><span data-stu-id="b8e75-127">Replace **[endpoint-URL]** with the URL you saved from the last step.</span></span> <span data-ttu-id="b8e75-128">Ersätt **[förutsägelsenyckel]** med värdet för `Prediction-Key` som du sparade från det förra steget.</span><span class="sxs-lookup"><span data-stu-id="b8e75-128">Replace **[Prediction-Key]** with the value of `Prediction-Key` you saved from the last step.</span></span> 

    ```azurecli
    curl [endpoint-URL] \
    -H "Prediction-Key: [Prediction-Key]" \
    -H "Content-Type: application/json" \
    -d "{'url' : 'https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/VanGoghTest_02.jpg'}" \
    | jq '.'
    ```

    <span data-ttu-id="b8e75-129">När kommandot har slutförts visas ett JSON-svar som liknar följande skärmbild.</span><span class="sxs-lookup"><span data-stu-id="b8e75-129">When the command completes, you'll see a JSON response similar to the following screenshot.</span></span> <span data-ttu-id="b8e75-130">API:et returnerar en sannolikhet för varje tagg i modellen.</span><span class="sxs-lookup"><span data-stu-id="b8e75-130">The API returns a probability for every tag in the model.</span></span> <span data-ttu-id="b8e75-131">Som du kan se finns det en sannolikhet nära 1 för `"painting"` **tagName**-värdet, vilket innebär att den här avbildningen definitivt är en tavla.</span><span class="sxs-lookup"><span data-stu-id="b8e75-131">As you can see, with a probability close to 1 for the `"painting"` **tagName** value, this image is definitely a painting.</span></span> <span data-ttu-id="b8e75-132">Det är dock inte en tavla som målats av någon av de konstnärer som vi tränat vår modell med.</span><span class="sxs-lookup"><span data-stu-id="b8e75-132">However, it's not a painting by any of the artists with which we trained our model.</span></span> 

    ![Miniatyr av testbild med Picasso](../media/5-prediction-json.png) 

3. <span data-ttu-id="b8e75-134">Prova fler förutsägelser genom att ersätta URL-adressen i begärandetexten ovan med URL-adresserna i följande tabell.</span><span class="sxs-lookup"><span data-stu-id="b8e75-134">Try more predictions by replacing the URL in the request body above, with the URLs in the following table.</span></span> 

    |<span data-ttu-id="b8e75-135">Bild</span><span class="sxs-lookup"><span data-stu-id="b8e75-135">Image</span></span>  | <span data-ttu-id="b8e75-136">URL</span><span class="sxs-lookup"><span data-stu-id="b8e75-136">URL</span></span>  |
    |---------|---------|
    |![Miniatyr av testbild med Picasso](../media/picasso-test-02-thumb.jpg)     | `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/PicassoTest_02.jpg`        |
    |![Miniatyr av testbild med Rembrandt](../media/rembrandt-test-01-thumb.jpg)     |  `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/RembrandtTest_01.jpg`       |
    |![Miniatyr av testbild med Pollock](../media/pollock-test-01-thumb.jpg)  |   `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/PollockTest_01.jpg`     |
   

<span data-ttu-id="b8e75-140">Vår förutsägelseslutpunkt fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="b8e75-140">Our prediction endpoint is working as expected.</span></span> <span data-ttu-id="b8e75-141">Att anropa API:et är så enkelt som att göra en HTTP-begäran till slutpunkten med en förutsägelsenyckel och en bild-URL.</span><span class="sxs-lookup"><span data-stu-id="b8e75-141">Calling the API is as simple as making a HTTP request to the endpoint with a Prediction-Key and an image URL.</span></span>