<span data-ttu-id="a74a7-101">Du har nu lagt till de klientbibliotek som behövs i appen och det har blivit dags att ansluta till ditt Azure Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="a74a7-101">You have added the required client libraries to your application and are ready to connect to your Azure storage account.</span></span>

<span data-ttu-id="a74a7-102">Om du ska kunna arbeta med data i ett lagringskonto behöver din app två typer av data:</span><span class="sxs-lookup"><span data-stu-id="a74a7-102">To work with data in a storage account, your app will need two pieces of data:</span></span>

1. <span data-ttu-id="a74a7-103">En åtkomstnyckel</span><span class="sxs-lookup"><span data-stu-id="a74a7-103">An access key</span></span>
1. <span data-ttu-id="a74a7-104">REST-API-slutpunkten</span><span class="sxs-lookup"><span data-stu-id="a74a7-104">The REST API endpoint</span></span>

## <a name="security-access-keys"></a><span data-ttu-id="a74a7-105">Åtkomstnycklar för säkerhet</span><span class="sxs-lookup"><span data-stu-id="a74a7-105">Security access keys</span></span>

<span data-ttu-id="a74a7-106">Varje lagringskonto har två unika _åtkomstnycklar_ som används till att skydda lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="a74a7-106">Each storage account has two unique _access keys_ that are used to secure the storage account.</span></span> <span data-ttu-id="a74a7-107">Om din app behöver ansluta till flera lagringskonton måste appen ha en åtkomstnyckel för varje sådant lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="a74a7-107">If your app needs to connect to multiple storage accounts, then your app will require an access key for each storage account.</span></span>

![En bild som visar ett program som är anslutet till två olika lagringskonton i molnet.](..\media\6-multiple-accounts.png)

## <a name="rest-api-endpoint"></a><span data-ttu-id="a74a7-110">Slutpunkt för REST-API:t</span><span class="sxs-lookup"><span data-stu-id="a74a7-110">REST API endpoint</span></span>

<span data-ttu-id="a74a7-111">Förutom åtkomstnycklar för autentisering mot lagringskontona behöver appen känna till lagringstjänstens slutpunkter så att den kan utfärda REST-förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="a74a7-111">In addition to access keys for authentication to storage accounts, your app will need to know the storage service endpoints to issue the REST requests.</span></span> 

<span data-ttu-id="a74a7-112">REST-slutpunkten är en kombination av lagringskontots _namn_, datatypen och en känd domän.</span><span class="sxs-lookup"><span data-stu-id="a74a7-112">The REST endpoint is a combination of your storage account _name_, the data type, and a known domain.</span></span> <span data-ttu-id="a74a7-113">Exempel:</span><span class="sxs-lookup"><span data-stu-id="a74a7-113">For example:</span></span>

| <span data-ttu-id="a74a7-114">Datatyp</span><span class="sxs-lookup"><span data-stu-id="a74a7-114">Data type</span></span> | <span data-ttu-id="a74a7-115">Exempel på slutpunkt</span><span class="sxs-lookup"><span data-stu-id="a74a7-115">Example endpoint</span></span> |
|-----------|------------------|
| <span data-ttu-id="a74a7-116">Blobar</span><span class="sxs-lookup"><span data-stu-id="a74a7-116">Blobs</span></span>     | `https://[name].blob.core.windows.net/` |
| <span data-ttu-id="a74a7-117">Köer</span><span class="sxs-lookup"><span data-stu-id="a74a7-117">Queues</span></span>    | `https://[name].queue.core.windows.net/` |
| <span data-ttu-id="a74a7-118">Tabeller</span><span class="sxs-lookup"><span data-stu-id="a74a7-118">Table</span></span>     | `https://[name].table.core.windows.net/` |
| <span data-ttu-id="a74a7-119">Filer</span><span class="sxs-lookup"><span data-stu-id="a74a7-119">Files</span></span>     | `https://[name].file.core.windows.net/` |

<span data-ttu-id="a74a7-120">Om du har en anpassad domän kopplad till Azure kan du även skapa en anpassad domänadress för slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="a74a7-120">If you have a custom domain tied to Azure, then you can also create a custom domain URL for the endpoint.</span></span>

## <a name="connection-strings"></a><span data-ttu-id="a74a7-121">Anslutningssträngar</span><span class="sxs-lookup"><span data-stu-id="a74a7-121">Connection strings</span></span>

<span data-ttu-id="a74a7-122">Det enklaste sättet att hantera åtkomstnycklar och slutpunkternas webbadresser inom program är att använda **anslutningssträngar för lagringskonton**.</span><span class="sxs-lookup"><span data-stu-id="a74a7-122">The simplest way to handle access keys and endpoint URLs within applications is to use **storage account connection strings**.</span></span> <span data-ttu-id="a74a7-123">I en anslutningssträng finns all anslutningsinformation som behövs i en enda textsträng.</span><span class="sxs-lookup"><span data-stu-id="a74a7-123">A connection string provides all needed connectivity information in a single text string.</span></span>

<span data-ttu-id="a74a7-124">Anslutningssträngar i Azure Storage ser ut ungefär som i exemplet nedan, men med åtkomstnyckeln och kontonamnet för ditt specifika lagringskonto:</span><span class="sxs-lookup"><span data-stu-id="a74a7-124">Azure Storage connection strings look similar to the example below but with the access key and account name of your specific storage account:</span></span>

```
DefaultEndpointsProtocol=https;AccountName={your-storage};
   AccountKey={your-access-key};
   EndpointSuffix=core.windows.net
```

## <a name="security"></a><span data-ttu-id="a74a7-125">Säkerhet</span><span class="sxs-lookup"><span data-stu-id="a74a7-125">Security</span></span>

<span data-ttu-id="a74a7-126">Åtkomstnycklar ger åtkomst till ditt lagringskonto och du ska därför undvika att lämna ut dem till något system eller person som du inte vill ska ha tillgång till ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="a74a7-126">Access keys are critical to providing access to your storage account and as a result, should not be given to any system or person that you do not wish to have access to your storage account.</span></span> <span data-ttu-id="a74a7-127">Åtkomstnycklar har samma funktion som användarnamn och lösenord vid inloggning på en dator.</span><span class="sxs-lookup"><span data-stu-id="a74a7-127">Access keys are the equivalent of a username and password to access your computer.</span></span>

<span data-ttu-id="a74a7-128">Anslutningsinformation för lagringskonton lagras vanligtvis i en miljövariabel, databas eller konfiguration.</span><span class="sxs-lookup"><span data-stu-id="a74a7-128">Typically, storage account connectivity information is stored within an environment variable, database, or configuration file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a74a7-129">Observera att det kan vara riskabelt att lagra den här informationen i en konfigurationsfil om du tänker inkludera samma fil i källkodskontrollen och lagra den på en offentlig lagringsplats.</span><span class="sxs-lookup"><span data-stu-id="a74a7-129">It is important to note that storing this information in a configuration file can be dangerous if you include that file in source control and store it in a public repository.</span></span> <span data-ttu-id="a74a7-130">Det här är tyvärr ett misstag som många användare gör och som kan leda till att vem som helst kan läsa källkoden på den offentliga lagringsplatsen och hitta anslutningsinformationen till ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="a74a7-130">This is a common mistake and means that anyone can browse your source code in the public repository and see your storage account connection information.</span></span>

<span data-ttu-id="a74a7-131">Varje lagringskonto har två åtkomstnycklar.</span><span class="sxs-lookup"><span data-stu-id="a74a7-131">Each storage account has two access keys.</span></span> <span data-ttu-id="a74a7-132">Anledningen till detta är att vi vill möjliggöra rotation (och regenerering) av nycklar med jämna mellanrum. Inkludera gärna metoden i ert interna regelverk för att skydda lagringskontona.</span><span class="sxs-lookup"><span data-stu-id="a74a7-132">The reason for this is to allow keys to be rotated (regenerated) periodically as part of security best practice in keeping your storage account secure.</span></span> <span data-ttu-id="a74a7-133">Den här processen kan köras från Azure Portal eller kommandoradsverktyget för Azure CLI/PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a74a7-133">This process can be done from the Azure portal or the Azure CLI / PowerShell command line tool.</span></span>

<span data-ttu-id="a74a7-134">Om du roterar en nyckel så ogiltigförklaras det ursprungliga nyckelvärdet omedelbart. Detta gör det lätt att återkalla behörigheten om någon obehörig kommit över nyckeln.</span><span class="sxs-lookup"><span data-stu-id="a74a7-134">Rotating a key will invalidate the original key value immediately and will revoke access to anyone who obtained the key inappropriately.</span></span> <span data-ttu-id="a74a7-135">Då det finns stöd för två nycklar kan du rotera nycklar utan driftstopp i apparna som använder nycklarna.</span><span class="sxs-lookup"><span data-stu-id="a74a7-135">With support for two keys, you can rotate keys without causing downtime in your applications that use them.</span></span> <span data-ttu-id="a74a7-136">Appen kan växla över till den alternativa åtkomstnyckeln medan den andra nyckeln återskapas.</span><span class="sxs-lookup"><span data-stu-id="a74a7-136">Your app can switch to using the alternate access key while the other key is regenerated.</span></span> <span data-ttu-id="a74a7-137">Om lagringskontot används av flera appar bör samtliga appar använda samma nyckel när den här tekniken används.</span><span class="sxs-lookup"><span data-stu-id="a74a7-137">If you have multiple apps using this storage account, they should all use the same key to support this technique.</span></span> <span data-ttu-id="a74a7-138">Här är grundtanken:</span><span class="sxs-lookup"><span data-stu-id="a74a7-138">Here's the basic idea:</span></span>

1. <span data-ttu-id="a74a7-139">Uppdatera anslutningssträngarna i programkoden så att de refererar till lagringskontots sekundära åtkomstnyckel.</span><span class="sxs-lookup"><span data-stu-id="a74a7-139">Update the connection strings in your application code to reference the secondary access key of the storage account.</span></span>
2. <span data-ttu-id="a74a7-140">Återskapa den primära åtkomstnyckeln för lagringskontot i Azure Portal eller på kommandoraden.</span><span class="sxs-lookup"><span data-stu-id="a74a7-140">Regenerate the primary access key for your storage account using the Azure portal or command line tool.</span></span>
3. <span data-ttu-id="a74a7-141">Uppdatera anslutningssträngarna i koden så att de refererar till den nya primärnyckeln.</span><span class="sxs-lookup"><span data-stu-id="a74a7-141">Update the connection strings in your code to reference the new primary access key.</span></span>
4. <span data-ttu-id="a74a7-142">Återskapa den sekundära åtkomstnyckeln på samma sätt.</span><span class="sxs-lookup"><span data-stu-id="a74a7-142">Regenerate the secondary access key in the same manner.</span></span>

> [!TIP]
> <span data-ttu-id="a74a7-143">Vi rekommenderar starkt att du regelbundet roterar dina åtkomstnycklar så att de hålls privata, precis som att du ändrar dina lösenord.</span><span class="sxs-lookup"><span data-stu-id="a74a7-143">It's highly recommended that you periodically rotate your access keys to ensure they remain private, just like changing your passwords.</span></span> <span data-ttu-id="a74a7-144">Om du använder nyckeln i ett serverprogram kan du lagra åtkomstnyckeln i **Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="a74a7-144">If you are using the key in a server application, you can use an **Azure Key Vault** to store the access key for you.</span></span> <span data-ttu-id="a74a7-145">Key Vault har stöd för synkronisering direkt med lagringskontot och roterar nycklarna automatiskt då och då.</span><span class="sxs-lookup"><span data-stu-id="a74a7-145">Key Vaults include support to synchronize directly to the Storage Account and automatically rotate the keys periodically.</span></span> <span data-ttu-id="a74a7-146">Med Key Vault får du ett ytterligare säkerhetslager så att din app aldrig behöver arbeta direkt med åtkomstnycklar.</span><span class="sxs-lookup"><span data-stu-id="a74a7-146">Using a Key Vault provides an additional layer of security, so your app never has to work directly with an access key.</span></span>

### <a name="shared-access-signatures-sas"></a><span data-ttu-id="a74a7-147">Signaturer för delad åtkomst (SAS)</span><span class="sxs-lookup"><span data-stu-id="a74a7-147">Shared access signatures (SAS)</span></span>

<span data-ttu-id="a74a7-148">Åtkomstnycklar är den enklaste metoden om du vill autentisera åtkomsten till ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="a74a7-148">Access keys are the easiest approach to authenticating access to a storage account.</span></span> <span data-ttu-id="a74a7-149">De ger ändå fullständig åtkomst till allt i lagringskontot, ungefär som ett rotlösenord till en dator.</span><span class="sxs-lookup"><span data-stu-id="a74a7-149">However they provide full access to anything in the storage account, similar to a root password on a computer.</span></span>

<span data-ttu-id="a74a7-150">Lagringskontona har en fristående autentiseringsmekanism som kallas _signaturer för delad åtkomst_. Den har stöd för tidsbegränsade och avgränsade behörigheter i de fall där du vill ge begränsad tillgång till andra.</span><span class="sxs-lookup"><span data-stu-id="a74a7-150">Storage accounts offer a separate authentication mechanism called _shared access signatures_ that support expiration and limited permissions for scenarios where you need to grant limited access.</span></span> <span data-ttu-id="a74a7-151">Du bör använda den här metoden när du ger andra användare läs- och skrivbehörighet till data i ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="a74a7-151">You should use this approach when you are allowing other users to read and write data to your storage account.</span></span> <span data-ttu-id="a74a7-152">I slutet av den här modulen finns länkar till dokumentationen om det här avancerade ämnet.</span><span class="sxs-lookup"><span data-stu-id="a74a7-152">There are links to our documentation on this advanced topic at the end of the module.</span></span>
