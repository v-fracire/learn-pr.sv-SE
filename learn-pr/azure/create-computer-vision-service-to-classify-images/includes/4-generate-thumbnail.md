<span data-ttu-id="3af70-101">Distributörer av dina produkter i frontlinjen skannar och laddar upp bilder av butikshyllor som de fyller på.</span><span class="sxs-lookup"><span data-stu-id="3af70-101">Frontline distributors of your products scan and upload images of store shelves they're restocking.</span></span> <span data-ttu-id="3af70-102">Du som chefsutvecklare är ansvarig för att skapa miniatyrbilder av bilderna.</span><span class="sxs-lookup"><span data-stu-id="3af70-102">As a lead developer at your company, you are responsible for creating thumbnails of the images.</span></span> <span data-ttu-id="3af70-103">Miniatyrbilderna används i alla onlinerapporter som du skapar för säljteamet.</span><span class="sxs-lookup"><span data-stu-id="3af70-103">The thumbnails are used in the online reports you create for the sales team.</span></span> <span data-ttu-id="3af70-104">Försäljningschefen sa nyligen att bilderna i rapporten är suddiga och ofta inte har produkterna i centrum, vilket gör det svårt att söka igenom stora rapporter.</span><span class="sxs-lookup"><span data-stu-id="3af70-104">Recently, the sales manager said that the images in the report are blurry and often don't have the product front and center, making it difficult to scan the large report.</span></span> <span data-ttu-id="3af70-105">Det är upp till dig att förbättra situationen.</span><span class="sxs-lookup"><span data-stu-id="3af70-105">It's up to you to improve the situation.</span></span>

<span data-ttu-id="3af70-106">Du vill prova funktionen generera miniatyrbilder i API för visuellt innehåll.</span><span class="sxs-lookup"><span data-stu-id="3af70-106">You decide to try the thumbnail generation feature of the Computer Vision API.</span></span> <span data-ttu-id="3af70-107">Du kan kanske göra ett bättre jobb än storleksändringsfunktionen du skrev.</span><span class="sxs-lookup"><span data-stu-id="3af70-107">Perhaps it can do a better job than the resizing function you wrote.</span></span>

<span data-ttu-id="3af70-108">Visuellt innehåll genererar först en högkvalitativ miniatyrbild och sedan analyseras objekten i bilden för att fastställa det intressanta området (ROI).</span><span class="sxs-lookup"><span data-stu-id="3af70-108">Computer Vision first generates a high-quality thumbnail and then analyzes the objects within the image to determine the region of interest (ROI).</span></span> <span data-ttu-id="3af70-109">Visuellt innehåll beskär bilden för att passa kraven för ”det intressanta området” (ROI).</span><span class="sxs-lookup"><span data-stu-id="3af70-109">Computer Vision then crops the image to fit the requirements of the region of interest.</span></span> <span data-ttu-id="3af70-110">Den genererade miniatyrbilden kan vid behov anges med proportioner som skiljer sig från proportionerna på den ursprungliga bilden.</span><span class="sxs-lookup"><span data-stu-id="3af70-110">The generated thumbnail can be presented using an aspect ratio that is different from the aspect ratio of the original image, depending on your needs.</span></span> <span data-ttu-id="3af70-111">Nu ska vi se hur det fungerar i praktiken.</span><span class="sxs-lookup"><span data-stu-id="3af70-111">Let's see it in action.</span></span>

## <a name="calling-the-computer-vision-api-to-generate-a-thumbnail"></a><span data-ttu-id="3af70-112">Anropa API för visuellt innehåll för att skapa en miniatyrbild</span><span class="sxs-lookup"><span data-stu-id="3af70-112">Calling the Computer Vision API to generate a thumbnail</span></span>

<span data-ttu-id="3af70-113">Åtgärden `generateThumbnail` skapar en miniatyrbild med den användardefinierade bredden och höjden.</span><span class="sxs-lookup"><span data-stu-id="3af70-113">The `generateThumbnail` operation creates a thumbnail image with the user-specified width and height.</span></span> <span data-ttu-id="3af70-114">Som standard analyserar tjänsten bilden, identifierar det intressanta området (ROI) och skapar smarta beskärningskoordinater baserat på det intressanta området.</span><span class="sxs-lookup"><span data-stu-id="3af70-114">By default, the service analyzes the image, identifies the region of interest (ROI), and generates smart cropping coordinates based on the ROI.</span></span> <span data-ttu-id="3af70-115">Smart beskärning hjälper dig när du anger ett bredd–höjd-förhållande som skiljer sig från bredd–höjd-förhållandet på den inmatade bilden.</span><span class="sxs-lookup"><span data-stu-id="3af70-115">Smart cropping helps when you specify an aspect ratio that differs from aspect ratio of the input image.</span></span> <span data-ttu-id="3af70-116">Fråge-URL har följande format:</span><span class="sxs-lookup"><span data-stu-id="3af70-116">The request URL has the following format:</span></span>

`https://<region>.api.cognitive.microsoft.com/vision/v2.0/generateThumbnail?width=<...>&height=<...>&smartCropping=<...>`

<span data-ttu-id="3af70-117">Genom att ge olika parametrar till API:t kan du generera den miniatyr du behöver.</span><span class="sxs-lookup"><span data-stu-id="3af70-117">Different parameters can be provided to the API to generate the proper thumbnail for your needs.</span></span> <span data-ttu-id="3af70-118">Parametrarna `width` och `height` krävs.</span><span class="sxs-lookup"><span data-stu-id="3af70-118">The `width` and `height` parameters are required.</span></span> <span data-ttu-id="3af70-119">De anger för API vilken storlek du behöver för en viss bild.</span><span class="sxs-lookup"><span data-stu-id="3af70-119">They tell the API which size you need for a specific image.</span></span> <span data-ttu-id="3af70-120">Parametern `smartCropping` genererar en smartare beskärning genom att analysera det intressantaste området i bilden och behålla det i miniatyren.</span><span class="sxs-lookup"><span data-stu-id="3af70-120">The `smartCropping` parameter generates smarter cropping by analyzing the region of interest in your image to keep it within the thumbnail.</span></span> <span data-ttu-id="3af70-121">När smart beskärning är aktiverat behålls till exempel ansiktet i en beskuren profilbild inom bildramen fastän bilden har ett annat bredd–höjd-förhållande.</span><span class="sxs-lookup"><span data-stu-id="3af70-121">As an example, with smart cropping enabled, a cropped profile picture would keep someone's face within the picture frame even when the picture has a different aspect ratio.</span></span>

[!INCLUDE [get-key-note](./get-key.md)]

## <a name="generate-a-thumbnail"></a><span data-ttu-id="3af70-122">Skapa en miniatyrbild</span><span class="sxs-lookup"><span data-stu-id="3af70-122">Generate a thumbnail</span></span>

<span data-ttu-id="3af70-123">Vi använder följande bild i det här exemplet, men du kan testa samma kommando med URL:er till andra bilder.</span><span class="sxs-lookup"><span data-stu-id="3af70-123">We'll use the following image in this example, but you're free to try the same command with URLs to other images.</span></span>

![Bild av en gullig vit hund som sitter på grönt gräs.](../media/4-dog.png)

1. <span data-ttu-id="3af70-125">Kör följande kommandon i Azure Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="3af70-125">Execute the following commands in Azure Cloud Shell.</span></span> <span data-ttu-id="3af70-126">Ersätt `<region>` i kommandot med ditt Cognitive Services-kontos region</span><span class="sxs-lookup"><span data-stu-id="3af70-126">Replace `<region>` in the command with the region of your cognitive services account</span></span>

```azurecli
curl "https://<region>.api.cognitive.microsoft.com/vision/v2.0/generateThumbnail?width=100&height=100&smartCropping=true" \
-H "Ocp-Apim-Subscription-Key: $key" \
-H "Content-Type: application/json" \
-d "{'url' : 'https://raw.githubusercontent.com/MicrosoftDocs/mslearn-process-images-with-the-computer-vision-service/master/images/dog.png'}" \
-o  thumbnail.jpg
```

<span data-ttu-id="3af70-127">I det här exemplet ber vi tjänsten att skapa en miniatyrbild som är 100 x 100.</span><span class="sxs-lookup"><span data-stu-id="3af70-127">In this example, we ask the service to create a thumbnail that is 100x100.</span></span> <span data-ttu-id="3af70-128">Smart beskärning är aktiverat.</span><span class="sxs-lookup"><span data-stu-id="3af70-128">Smart cropping is enabled.</span></span> <span data-ttu-id="3af70-129">Ett lyckat svar innehåller den binära miniatyrbilden som vi skriver till en fil med namnet thumbnail.jpg.</span><span class="sxs-lookup"><span data-stu-id="3af70-129">A successful response contains the thumbnail image binary, which we write to a file called thumbnail.jpg.</span></span>

> [!CAUTION]
> <span data-ttu-id="3af70-130">Parametern `-o` dirigerar om utdata till en fil.</span><span class="sxs-lookup"><span data-stu-id="3af70-130">The `-o` parameter redirects the output to a file.</span></span> <span data-ttu-id="3af70-131">Filen skrivs alltid över, så om du vill behålla mer än en miniatyrbild när du prövar detta kommandot måste du ändra filnamnet.</span><span class="sxs-lookup"><span data-stu-id="3af70-131">The file is always overwritten, so if you want to keep around  more than one thumbnail while trying this command, change the file name.</span></span>

## <a name="view-the-generated-thumbnail"></a><span data-ttu-id="3af70-132">Visa den skapade miniatyrbilden</span><span class="sxs-lookup"><span data-stu-id="3af70-132">View the generated thumbnail</span></span>

<span data-ttu-id="3af70-133">Du hittar den genererade miniatyren i ditt Azure Cloud Shell-lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="3af70-133">The generated thumbnail will be found in your Azure Cloud Shell storage account.</span></span> <span data-ttu-id="3af70-134">Vi gav filen namnet **thumbnail.jpg**.</span><span class="sxs-lookup"><span data-stu-id="3af70-134">We named the file **thumbnail.jpg**.</span></span>

<span data-ttu-id="3af70-135">Cloud Shell i Microsoft Learn har inte möjlighet att hämta filer, men du kan hämta miniatyrbilden via Azure Portal med hjälp av följande anvisningar.</span><span class="sxs-lookup"><span data-stu-id="3af70-135">The Cloud Shell in Microsoft Learn doesn't have the ability to download files, but you can follow these instructions to download the thumbnail through the Azure portal.</span></span>

1. <span data-ttu-id="3af70-136">Kör följande kommandon i Azure Cloud Shell för att bekräfta att filen **thumbnail.jpg** finns i arbetsmappen.</span><span class="sxs-lookup"><span data-stu-id="3af70-136">Execute the following commands in Azure Cloud Shell to confirm that the file **thumbnail.jpg** exists in your home folder.</span></span>

    ```azurecli
    cd ~
    ls -l
    ```



1. <span data-ttu-id="3af70-137">Flytta `thumbnail.jpg` till clouddrive-mappen med följande kommando.</span><span class="sxs-lookup"><span data-stu-id="3af70-137">Execute the following command to move `thumbnail.jpg` into the clouddrive folder.</span></span>

    ```azurecli
    mv ~/thumbnail.jpg ~/clouddrive
    ```
1. <span data-ttu-id="3af70-138">Logga in på [Azure Portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) med samma konto som du använde för att aktivera sandbox-miljön.</span><span class="sxs-lookup"><span data-stu-id="3af70-138">Sign into the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) using the same account you activated the sandbox with.</span></span>
1. <span data-ttu-id="3af70-139">Välj det lagringskonto som börjar med `cloudshell` på panelen **Alla resurser** på portalens instrumentpanel.</span><span class="sxs-lookup"><span data-stu-id="3af70-139">In the **All resources** panel of the portal dashboard, select the storage account with name beginning with `cloudshell`.</span></span>
1. <span data-ttu-id="3af70-140">Välj **Storage Explorer** på Storage-kontopanelen, sedan **FILRESURSER** och därefter filresursen i samlingen med det namn som börjar ned \*\* cloudshellfiles\*\*\*.</span><span class="sxs-lookup"><span data-stu-id="3af70-140">In the Storage account panel, select **Storage Explorer**, then **FILE SHARES** and then the file share in that collection with the name beginning with \*\*cloudshellfiles\*\*\*.</span></span>
1. <span data-ttu-id="3af70-141">Välj den *thunbnail.jpg* fil och sedan **hämta** på den översta menyn för att se avbildningen.</span><span class="sxs-lookup"><span data-stu-id="3af70-141">Select the *thunbnail.jpg* file and then **Download** from the top menu to see the image.</span></span>

<span data-ttu-id="3af70-142">Åtgärden `generateThumbnail` är en kraftfull miniatyrskapare som klarar av att hålla det intressanta området (ROI) av en bild i miniatyrbilden.</span><span class="sxs-lookup"><span data-stu-id="3af70-142">The `generateThumbnail` operation is a powerful thumbnail generator that is capable of keeping the Region Of Interest (ROI) of an image in the thumbnail.</span></span>

<span data-ttu-id="3af70-143">Mer information om åtgärden `generateThumbnails` finns i referensdokumentationen [Hämta miniatyrbild](https://westus.dev.cognitive.microsoft.com/docs/services/5adf991815e1060e6355ad44/operations/56f91f2e778daf14a499e1fb).</span><span class="sxs-lookup"><span data-stu-id="3af70-143">For more information about the `generateThumbnails` operation, see the [Get Thumbnail](https://westus.dev.cognitive.microsoft.com/docs/services/5adf991815e1060e6355ad44/operations/56f91f2e778daf14a499e1fb) reference documentation.</span></span>