<span data-ttu-id="5e065-101">Nu ska vi tillämpa en nätverkssäkerhetsgrupp på nätverket så att vi bara tillåter HTTP-trafik genom servern.</span><span class="sxs-lookup"><span data-stu-id="5e065-101">Let's apply a network security group to our network, so that we only allow HTTP traffic through our server.</span></span>

## <a name="create-a-network-security-group"></a><span data-ttu-id="5e065-102">Skapa en nätverkssäkerhetsgrupp</span><span class="sxs-lookup"><span data-stu-id="5e065-102">Create a network security group</span></span>

<span data-ttu-id="5e065-103">Azure bör ha skapat en säkerhetsgrupp åt oss eftersom vi angav att vi ville ha SSH-åtkomst.</span><span class="sxs-lookup"><span data-stu-id="5e065-103">Azure should have created a security group for us because we indicated we wanted SSH access.</span></span> <span data-ttu-id="5e065-104">Men vi ska ändå skapa en ny säkerhetsgrupp så att du ser hur processen ser ut.</span><span class="sxs-lookup"><span data-stu-id="5e065-104">But let's create a new security group, so you can walk through the entire process.</span></span> <span data-ttu-id="5e065-105">Detta är särskilt viktigt om du bestämmer dig för att skapa det virtuella nätverket _innan_ de virtuella datorerna.</span><span class="sxs-lookup"><span data-stu-id="5e065-105">This is particularly important if you decide to create your virtual network _before_ your VMs.</span></span> <span data-ttu-id="5e065-106">Som vi nämnt tidigare är säkerhetsgrupper _valfria_ och skapas inte nödvändigtvis med nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-106">As mentioned earlier, security groups are _optional_ and not necessarily created with the network.</span></span>

1. <span data-ttu-id="5e065-107">Skapa en ny resurs genom att klicka på knappen **Skapa en resurs** i den vänstra sidopanelen i [Azure Portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="5e065-107">In the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true), click the **Create a resource** button in the left-corner sidebar to start a new resource creation.</span></span>

1. <span data-ttu-id="5e065-108">Skriv **Nätverkssäkerhetsgrupp** i filterrutan och välj det matchande objektet i listan.</span><span class="sxs-lookup"><span data-stu-id="5e065-108">Type **Network security group** into the filter box and select the matching item in the list.</span></span>

1. <span data-ttu-id="5e065-109">Kontrollera att distributionsmodellen **Resource Manager** är vald och klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="5e065-109">Make sure the **Resource Manager** deployment model is selected and click **Create**.</span></span>

1. <span data-ttu-id="5e065-110">Ange ett **namn** på säkerhetsgruppen.</span><span class="sxs-lookup"><span data-stu-id="5e065-110">Provide a **Name** for your security group.</span></span> <span data-ttu-id="5e065-111">Återigen är namngivningskonventioner en bra idé.</span><span class="sxs-lookup"><span data-stu-id="5e065-111">Again, naming conventions are a good idea here.</span></span> <span data-ttu-id="5e065-112">Vi använder **test-web-eus-nsg1** för **Test Web Network Security Group #1 in East US**.</span><span class="sxs-lookup"><span data-stu-id="5e065-112">Let's use **test-web-eus-nsg1** for **Test Web Network Security Group #1 in East US**.</span></span> <span data-ttu-id="5e065-113">Du vill troligen ändra platsdelen i namnet så att den speglar var du placerar säkerhetsgruppen.</span><span class="sxs-lookup"><span data-stu-id="5e065-113">You'll likely want to change the location portion of the name to reflect where you put the security group.</span></span>

1. <span data-ttu-id="5e065-114">Välj rätt **prenumeration** och använd din befintliga **resursgrupp**.</span><span class="sxs-lookup"><span data-stu-id="5e065-114">Select the proper **Subscription** and use your existing **Resource group**.</span></span>

1. <span data-ttu-id="5e065-115">Placera den sedan på samma **plats** som den virtuella datorn/det virtuella nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-115">Finally, put it into the same **Location** as the VM / virtual network.</span></span> <span data-ttu-id="5e065-116">Obs! Du kan inte använda den här resursen om den finns på en annan plats.</span><span class="sxs-lookup"><span data-stu-id="5e065-116">This is important; you won't be able to apply this resource if it's in a different location.</span></span>

1. <span data-ttu-id="5e065-117">Skapa gruppen genom att klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="5e065-117">Click **Create** to create the group.</span></span>

## <a name="add-a-new-inbound-rule-to-our-network-security-group"></a><span data-ttu-id="5e065-118">Lägg till en ny inkommande regel i nätverkssäkerhetsgruppen</span><span class="sxs-lookup"><span data-stu-id="5e065-118">Add a new inbound rule to our network security group</span></span>

<span data-ttu-id="5e065-119">Distributionen bör slutföras snabbt.</span><span class="sxs-lookup"><span data-stu-id="5e065-119">Deployment should complete quickly.</span></span> <span data-ttu-id="5e065-120">När den är klar kan vi lägga till nya regler i säkerhetsgruppen:</span><span class="sxs-lookup"><span data-stu-id="5e065-120">When it's finished, we can add new rules to our security group:</span></span>

1. <span data-ttu-id="5e065-121">Leta upp den nya säkerhetsgruppsresursen och välj den i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="5e065-121">Find the new security group resource and select it in the Azure portal.</span></span>

1. <span data-ttu-id="5e065-122">På översiktssidan ser du att den har några standardregler som låser nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-122">On the overview page, you'll find that it has some default rules created to lock down the network.</span></span>

    <span data-ttu-id="5e065-123">På sidan för inkommande trafik:</span><span class="sxs-lookup"><span data-stu-id="5e065-123">On the inbound side:</span></span>

    - <span data-ttu-id="5e065-124">All inkommande trafik från ett virtuellt nätverk till ett annat tillåts.</span><span class="sxs-lookup"><span data-stu-id="5e065-124">All incoming traffic from one VNet to another is allowed.</span></span> <span data-ttu-id="5e065-125">På så sätt kan resurser i det virtuella nätverket prata med varandra.</span><span class="sxs-lookup"><span data-stu-id="5e065-125">This lets resources on the VNet talk to each other.</span></span>
    - <span data-ttu-id="5e065-126">Azure Load Balancer **avsöker** begäranden för att kontrollera att den virtuella datorn är aktiv.</span><span class="sxs-lookup"><span data-stu-id="5e065-126">Azure Load Balancer **probe** requests to ensure the VM is alive.</span></span>
    - <span data-ttu-id="5e065-127">All annan inkommande trafik nekas.</span><span class="sxs-lookup"><span data-stu-id="5e065-127">All other inbound traffic is denied.</span></span>

    <span data-ttu-id="5e065-128">På sidan för utgående trafik:</span><span class="sxs-lookup"><span data-stu-id="5e065-128">On the outbound side:</span></span>
    - <span data-ttu-id="5e065-129">All inkommande nätverkstrafik i det virtuella nätverket tillåts.</span><span class="sxs-lookup"><span data-stu-id="5e065-129">All in-network traffic on the VNet is allowed.</span></span>
    - <span data-ttu-id="5e065-130">All utgående trafik till Internet tillåts.</span><span class="sxs-lookup"><span data-stu-id="5e065-130">All outbound traffic to the internet is permitted.</span></span>
    - <span data-ttu-id="5e065-131">All annan utgående trafik nekas.</span><span class="sxs-lookup"><span data-stu-id="5e065-131">All other outbound traffic is denied.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5e065-132">Dessa standardregler har höga prioritetsvärden, vilket innebär att de utvärderas _sist_.</span><span class="sxs-lookup"><span data-stu-id="5e065-132">These default rules are set with high-priority values, which means that they get evaluated _last_.</span></span> <span data-ttu-id="5e065-133">De kan inte ändras eller tas bort, men du kan _åsidosätta_ dem genom att skapa mer specifika regler som matchar din trafik med ett lägre prioritetsvärde.</span><span class="sxs-lookup"><span data-stu-id="5e065-133">They cannot be changed or deleted, but you can _override_ them by creating more specific rules to match your traffic with a lower priority value.</span></span>

1. <span data-ttu-id="5e065-134">Klicka på avsnittet **Inkommande säkerhetsregler** på panelen **Inställningar** för säkerhetsgruppen.</span><span class="sxs-lookup"><span data-stu-id="5e065-134">Click the **Inbound security rules** section in the **Settings** panel for the security group.</span></span>

1. <span data-ttu-id="5e065-135">Lägg till en ny säkerhetsregel genom att klicka på **+ Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="5e065-135">Click **+ Add** to add a new security rule.</span></span>

    ![Skärmbild av Azure Portal med inställningarna för inkommande säkerhetsregler med knappen Lägg till markerad.](../media/8-add-rule.png)

    <span data-ttu-id="5e065-137">Du kan ange informationen som behövs för en säkerhetsregel med någon av två metoder: grundläggande och avancerad.</span><span class="sxs-lookup"><span data-stu-id="5e065-137">There are two ways to enter the information necessary for a security rule: basic and advanced.</span></span> <span data-ttu-id="5e065-138">Du kan växla mellan dem genom att klicka på knappen längst upp på panelen **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="5e065-138">You can switch between them by clicking the button at the top of the **add** panel.</span></span>

    ![Ett par skärmbilder i Azure Portal visar växlingen mellan grundläggande och avancerad regelinmatning, med en pil som länkar mellan de två lägena för växlingsknappen markerad.](../media/8-advanced-create-rule.png)

    <span data-ttu-id="5e065-140">Avancerat läge ger möjlighet att anpassa regeln helt.</span><span class="sxs-lookup"><span data-stu-id="5e065-140">The advanced mode provides the ability to customize the rule completely.</span></span> <span data-ttu-id="5e065-141">Om du vill konfigurera ett känt protokoll är dock ett grundläggande läge lite enklare att arbeta med.</span><span class="sxs-lookup"><span data-stu-id="5e065-141">However, if you need to configure a known protocol, the basic mode is a bit easier to work with.</span></span>

1. <span data-ttu-id="5e065-142">Växla till det grundläggande läget.</span><span class="sxs-lookup"><span data-stu-id="5e065-142">Switch to the basic mode.</span></span>

1. <span data-ttu-id="5e065-143">Lägg till informationen för vår HTTP-regel:</span><span class="sxs-lookup"><span data-stu-id="5e065-143">Add the information for our HTTP rule:</span></span>

    - <span data-ttu-id="5e065-144">Ange HTTP för **Tjänst**.</span><span class="sxs-lookup"><span data-stu-id="5e065-144">Set the **Service** to be HTTP.</span></span> <span data-ttu-id="5e065-145">När du gör det anges portintervallet åt dig.</span><span class="sxs-lookup"><span data-stu-id="5e065-145">This will set your port range up for you.</span></span>
    - <span data-ttu-id="5e065-146">Ange **Prioritet** till **1000**.</span><span class="sxs-lookup"><span data-stu-id="5e065-146">Set the **Priority** to **1000**.</span></span> <span data-ttu-id="5e065-147">Det måste vara ett lägre värde än för standardregeln **Neka**.</span><span class="sxs-lookup"><span data-stu-id="5e065-147">It has to be a lower number than the default **Deny** rule.</span></span> <span data-ttu-id="5e065-148">Du kan starta intervallet med valfritt värde, men vi rekommenderar att du inte är för snäv om du skulle behöva skapa ett undantag senare.</span><span class="sxs-lookup"><span data-stu-id="5e065-148">You can start the range at any value, but it's recommended that you give yourself some space in case an exception needs to be created later.</span></span>
    - <span data-ttu-id="5e065-149">Ge regeln ett namn. Vi använder **allow-http-traffic**.</span><span class="sxs-lookup"><span data-stu-id="5e065-149">Give the rule a name; we'll use **allow-http-traffic**.</span></span>
    - <span data-ttu-id="5e065-150">Ge regeln en beskrivning.</span><span class="sxs-lookup"><span data-stu-id="5e065-150">Give the rule a description.</span></span>

1. <span data-ttu-id="5e065-151">Gå tillbaka till läget **Avancerat**.</span><span class="sxs-lookup"><span data-stu-id="5e065-151">Switch back to the **Advanced** mode.</span></span> <span data-ttu-id="5e065-152">Observera att inställningarna finns kvar.</span><span class="sxs-lookup"><span data-stu-id="5e065-152">Notice that our settings are still present.</span></span> <span data-ttu-id="5e065-153">Vi kan använda den här panelen för att skapa mer detaljerade inställningar.</span><span class="sxs-lookup"><span data-stu-id="5e065-153">We can use this panel to create more fine-grained settings.</span></span> <span data-ttu-id="5e065-154">Mer specifikt vill vi antagligen begränsa **Källa** till en bestämd IP-adress eller ett intervall med IP-adresser som är specifika för kamerorna.</span><span class="sxs-lookup"><span data-stu-id="5e065-154">In particular, we would likely restrict the **Source** to be a specific IP address or range of IP addresses specific to the cameras.</span></span> <span data-ttu-id="5e065-155">Om du känner till den aktuella IP-adressen för den lokala datorn kan du prova med den.</span><span class="sxs-lookup"><span data-stu-id="5e065-155">If you know the current IP address of your local computer, you can try that.</span></span> <span data-ttu-id="5e065-156">Annars lämnar du inställningen som **Alla** så att du kan testa regeln.</span><span class="sxs-lookup"><span data-stu-id="5e065-156">Otherwise, leave the setting as **Any**, so you can test the rule.</span></span>

1. <span data-ttu-id="5e065-157">Klicka på **Lägg till** för att skapa regeln.</span><span class="sxs-lookup"><span data-stu-id="5e065-157">Click **Add** to create the rule.</span></span> <span data-ttu-id="5e065-158">När du gör det uppdateras listan över regler för inkommande trafik – observera att de visas i prioritetsordning, vilket är den ordning som de kommer att granskas i.</span><span class="sxs-lookup"><span data-stu-id="5e065-158">This will update the list of inbound rules - notice they are in priority order, which is how they will be examined.</span></span>

## <a name="apply-the-security-group"></a><span data-ttu-id="5e065-159">Tillämpa säkerhetsgruppen</span><span class="sxs-lookup"><span data-stu-id="5e065-159">Apply the security group</span></span>

<span data-ttu-id="5e065-160">Som du kanske minns kan vi tillämpa säkerhetsgruppen på ett nätverksgränssnitt för att skydda en enskild virtuell dator, eller på ett undernät där den i så fall gäller för alla resurser i undernätet.</span><span class="sxs-lookup"><span data-stu-id="5e065-160">Recall that we can apply the security group to a network interface to guard a single VM or to a subnet where it would apply to any resources on that subnet.</span></span> <span data-ttu-id="5e065-161">Den sista metoden är den vanligaste, så vi använder den.</span><span class="sxs-lookup"><span data-stu-id="5e065-161">The latter approach tends to be the most common, so let's do that.</span></span> <span data-ttu-id="5e065-162">Vi kan komma till den här resursen i Azure antingen via den virtuella nätverksresursen, eller indirekt via den virtuella datorn som använder det virtuella nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-162">We could get to this resource in Azure through either the virtual network resource or indirectly through the VM that is using the virtual network.</span></span>

1. <span data-ttu-id="5e065-163">Växla till panelen **Översikt** för den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="5e065-163">Switch to the **Overview** panel for the virtual machine.</span></span> <span data-ttu-id="5e065-164">Du hittar den virtuella datorn under **Alla resurser**.</span><span class="sxs-lookup"><span data-stu-id="5e065-164">You can find the VM under **All Resources**.</span></span>

1. <span data-ttu-id="5e065-165">Välj objektet **Nätverk** i avsnittet **Inställningar**.</span><span class="sxs-lookup"><span data-stu-id="5e065-165">Select the **Networking** item in the **Settings** section.</span></span>

1. <span data-ttu-id="5e065-166">I nätverksegenskaperna hittar du information om nätverksinställningarna som används för den virtuella datorn, inklusive **Virtuellt nätverk/undernät**.</span><span class="sxs-lookup"><span data-stu-id="5e065-166">In the networking properties, you will find information about the networking applied to the VM, including the **Virtual network/subnet**.</span></span> <span data-ttu-id="5e065-167">Det här är en klickbar länk till resursen.</span><span class="sxs-lookup"><span data-stu-id="5e065-167">This is a clickable link to get to the resource.</span></span> <span data-ttu-id="5e065-168">Klicka på den för att öppna det virtuella nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-168">Click it to open the virtual network.</span></span> <span data-ttu-id="5e065-169">Den här länken är _även_ tillgänglig på panelen **Översikt** för den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="5e065-169">This link is _also_ available on the **Overview** panel of the VM.</span></span> <span data-ttu-id="5e065-170">Båda länkarna öppnar en **översikt** över det virtuella nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-170">Either of these will open the **Overview** of the virtual network.</span></span>

1. <span data-ttu-id="5e065-171">Välj objektet **Undernät** i avsnittet **Inställningar**.</span><span class="sxs-lookup"><span data-stu-id="5e065-171">In the **Settings** section, select the **Subnets** item.</span></span>

1. <span data-ttu-id="5e065-172">Vi bör redan ha ett undernät (standard) sedan tidigare då vi skapade den virtuella datorn och nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-172">We should have a single subnet defined (default) from when we created the VM + network earlier.</span></span> <span data-ttu-id="5e065-173">Klicka på objektet i listan för att öppna informationen.</span><span class="sxs-lookup"><span data-stu-id="5e065-173">Click the item in the list to open the details.</span></span>

1. <span data-ttu-id="5e065-174">Klicka på posten **Nätverkssäkerhetsgrupp**.</span><span class="sxs-lookup"><span data-stu-id="5e065-174">Click the **Network security group** entry.</span></span>

1. <span data-ttu-id="5e065-175">Välj den nya säkerhetsgruppen: **test-web-eus-nsg1**.</span><span class="sxs-lookup"><span data-stu-id="5e065-175">Select your new security group: **test-web-eus-nsg1**.</span></span> <span data-ttu-id="5e065-176">Det bör också finnas en annan grupp här, som skapades med den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="5e065-176">There should be another group here as well that was created with the VM.</span></span>

1. <span data-ttu-id="5e065-177">Spara ändringen genom att klicka på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="5e065-177">Click **Save** to save the change.</span></span> <span data-ttu-id="5e065-178">Det tar någon minut att tillämpa ändringen i nätverket.</span><span class="sxs-lookup"><span data-stu-id="5e065-178">It will take a minute to apply to the network.</span></span>

## <a name="update-the-nsg-on-the-network-interface"></a><span data-ttu-id="5e065-179">Uppdatera NSG:n på nätverksgränssnittet</span><span class="sxs-lookup"><span data-stu-id="5e065-179">Update the NSG on the network interface</span></span>

<span data-ttu-id="5e065-180">Port 80 är öppen på NSG:n som används på undernätet, men den kommer fortfarande att blockeras eftersom den för tillfället inte tillåts på den NSG som används för nätverksgränssnittet.</span><span class="sxs-lookup"><span data-stu-id="5e065-180">Port 80 is open on the NSG applied to the subnet, but it's still going to be blocked because it's not currently allowed on the NSG applied to the network interface.</span></span> <span data-ttu-id="5e065-181">Vi åtgärdar det så ska vi kunna ansluta.</span><span class="sxs-lookup"><span data-stu-id="5e065-181">Let's fix that and then we should be able to connect.</span></span>

1. <span data-ttu-id="5e065-182">Växla tillbaka till panelen **Översikt** för den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="5e065-182">Switch back to the **Overview** panel for the virtual machine.</span></span> <span data-ttu-id="5e065-183">Du hittar den virtuella datorn under **Alla resurser**.</span><span class="sxs-lookup"><span data-stu-id="5e065-183">You can find the VM under **All Resources**.</span></span>

1. <span data-ttu-id="5e065-184">I avsnittet **Inställningar** väljer du objektet **Nätverk**.</span><span class="sxs-lookup"><span data-stu-id="5e065-184">In the **Settings** section, select the **Networking** item.</span></span>

1. <span data-ttu-id="5e065-185">I avsnittet **regler för inkommande portar** bör du se NSG-reglerna för undernätet och NSG-reglerna för nätverksgränssnittet under den.</span><span class="sxs-lookup"><span data-stu-id="5e065-185">In the **Inbound port rules** section you should see the NSG rules for the subnet, then the NSG rules for the network interface just below it.</span></span> <span data-ttu-id="5e065-186">I NSG-reglerna för nätverksgränssnittet väljer du **Lägg till regel för inkommande portar**.</span><span class="sxs-lookup"><span data-stu-id="5e065-186">In the NSG rules for the network interface, select **Add inbound port rule**.</span></span>

1. <span data-ttu-id="5e065-187">Växla till det grundläggande läget.</span><span class="sxs-lookup"><span data-stu-id="5e065-187">Switch to the basic mode.</span></span>

1. <span data-ttu-id="5e065-188">Lägg till informationen för vår HTTP-regel:</span><span class="sxs-lookup"><span data-stu-id="5e065-188">Add the information for our HTTP rule:</span></span>

    - <span data-ttu-id="5e065-189">Ange HTTP för **Tjänst**.</span><span class="sxs-lookup"><span data-stu-id="5e065-189">Set the **Service** to be HTTP.</span></span> <span data-ttu-id="5e065-190">När du gör det anges portintervallet åt dig.</span><span class="sxs-lookup"><span data-stu-id="5e065-190">This will set your port range up for you.</span></span>
    - <span data-ttu-id="5e065-191">Ange **Prioritet** till **310**.</span><span class="sxs-lookup"><span data-stu-id="5e065-191">Set the **Priority** to **310**.</span></span>
    - <span data-ttu-id="5e065-192">Ge regeln ett namn. Vi använder **allow-http-traffic**.</span><span class="sxs-lookup"><span data-stu-id="5e065-192">Give the rule a name; we'll use **allow-http-traffic**.</span></span>
    - <span data-ttu-id="5e065-193">Ge regeln en beskrivning.</span><span class="sxs-lookup"><span data-stu-id="5e065-193">Give the rule a description.</span></span>

1. <span data-ttu-id="5e065-194">Klicka på **Lägg till** för att skapa regeln.</span><span class="sxs-lookup"><span data-stu-id="5e065-194">Click **Add** to create the rule.</span></span>

## <a name="verify-the-rules"></a><span data-ttu-id="5e065-195">Verifiera reglerna</span><span class="sxs-lookup"><span data-stu-id="5e065-195">Verify the rules</span></span>

<span data-ttu-id="5e065-196">Nu ska vi bekräfta ändringen:</span><span class="sxs-lookup"><span data-stu-id="5e065-196">Let's validate the change:</span></span>

1. <span data-ttu-id="5e065-197">Växla tillbaka till panelen **Översikt** för den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="5e065-197">Switch back to the **Overview** panel for the virtual machine.</span></span> <span data-ttu-id="5e065-198">Du hittar den virtuella datorn under **Alla resurser**.</span><span class="sxs-lookup"><span data-stu-id="5e065-198">You can find the VM under **All Resources**.</span></span>

1. <span data-ttu-id="5e065-199">Välj objektet **Nätverk** i avsnittet **Inställningar**.</span><span class="sxs-lookup"><span data-stu-id="5e065-199">Select the **Networking** item in the **Settings** section.</span></span>

1. <span data-ttu-id="5e065-200">I nätverkgränssnittsinformationen så finns det en länk för **Gällande säkerhetsregler** som snabbt visar hur regler kommer att utvärderas.</span><span class="sxs-lookup"><span data-stu-id="5e065-200">In the network interface details, there is a link for **Effective security rules** that will quickly show you how rules are going to be evaluated.</span></span> <span data-ttu-id="5e065-201">Klicka på länken för att öppna analysen och kontrollera att du ser dina nya regler.</span><span class="sxs-lookup"><span data-stu-id="5e065-201">Click the link to open the analysis and make sure you see your new rules.</span></span>

    ![Skärmbild av Azure-portalen som visar bladet Gällande säkerhetsregler för vårt nätverk.](../media/8-effective-rules.png)

1. <span data-ttu-id="5e065-203">Det bästa sättet att verifiera att allt fungerar är såklart att skicka en HTTP-begäran till servern.</span><span class="sxs-lookup"><span data-stu-id="5e065-203">Of course, the best way to validate it's all working is to hit our server with an HTTP request.</span></span> <span data-ttu-id="5e065-204">Nu bör det fungera.</span><span class="sxs-lookup"><span data-stu-id="5e065-204">It should now work.</span></span>

    ![Skärmbild av en webbläsare som visar Apaches standardwebbsida för IP-adressen till den nya virtuella Linux-datorn.](../media/6-apache-works.png)

## <a name="one-more-thing"></a><span data-ttu-id="5e065-206">En sak till</span><span class="sxs-lookup"><span data-stu-id="5e065-206">One more thing</span></span>

<span data-ttu-id="5e065-207">Det kan vara knepigt att få till säkerhetsreglerna så att de blir rätt.</span><span class="sxs-lookup"><span data-stu-id="5e065-207">Security rules are tricky to get right.</span></span> <span data-ttu-id="5e065-208">Vi gjorde ett misstag när vi tillämpade den här nya säkerhetsgruppen – vi förlorar vår SSH-åtkomst!</span><span class="sxs-lookup"><span data-stu-id="5e065-208">We made a mistake when we applied this new security group - we lost our SSH access!</span></span> <span data-ttu-id="5e065-209">För att åtgärda det här problemet kan du lägga till en annan regel till säkerhetsgruppen som gäller för undernätet för att tillåta SSH-åtkomst.</span><span class="sxs-lookup"><span data-stu-id="5e065-209">To fix this, you can add another rule to the security group applied to the subnet to allow SSH access.</span></span> <span data-ttu-id="5e065-210">Se till att begränsa de inkommande TCP/IP-adresserna för regeln till de som du äger.</span><span class="sxs-lookup"><span data-stu-id="5e065-210">Make sure to restrict the inbound TCP/IP addresses for the rule to be the ones you own.</span></span>

> [!WARNING]
> <span data-ttu-id="5e065-211">Var alltid noga med att låsa portar som används för administrativ åtkomst.</span><span class="sxs-lookup"><span data-stu-id="5e065-211">Always make sure to lock down ports used for administrative access.</span></span> <span data-ttu-id="5e065-212">En ännu bättre metod är att skapa ett VPN för att länka det virtuella nätverket till ditt privata nätverk och endast tillåta RDP- eller SSH-begäranden från det adressintervallet.</span><span class="sxs-lookup"><span data-stu-id="5e065-212">An even better approach is to create a VPN to link the virtual network to your private network and only allow RDP or SSH requests from that address range.</span></span> <span data-ttu-id="5e065-213">Du kan också ändra den port som används av SSH till något annat än standardvärdet.</span><span class="sxs-lookup"><span data-stu-id="5e065-213">You can also change the port used by SSH to be something other than the default.</span></span> <span data-ttu-id="5e065-214">Kom ihåg att det inte är tillräckligt att ändra portarna för att stoppa attacker.</span><span class="sxs-lookup"><span data-stu-id="5e065-214">Keep in mind that changing ports is not sufficient to stop attacks.</span></span> <span data-ttu-id="5e065-215">De blir bara lite svårare att upptäcka.</span><span class="sxs-lookup"><span data-stu-id="5e065-215">It simply makes it a little harder to discover.</span></span>