<span data-ttu-id="45003-101">Du är nu redo att börja implementera temperaturtjänsten.</span><span class="sxs-lookup"><span data-stu-id="45003-101">You are now ready to start implementing the temperature service.</span></span> <span data-ttu-id="45003-102">I den föregående delen fastställde du att en lösning utan server skulle passa bäst för dina behov.</span><span class="sxs-lookup"><span data-stu-id="45003-102">In the previous unit, you determined that a serverless solution would best fit your needs.</span></span> <span data-ttu-id="45003-103">Låt oss börja med att skapa en funktionsapp för att lagra våra Azure-funktion.</span><span class="sxs-lookup"><span data-stu-id="45003-103">Let's start by creating a function app to hold our Azure Function.</span></span>

[!include[](../../../includes/azure-sandbox-activate.md)]

## <a name="what-is-a-function-app"></a><span data-ttu-id="45003-104">Vad är en funktionsapp?</span><span class="sxs-lookup"><span data-stu-id="45003-104">What is a function app?</span></span>

<span data-ttu-id="45003-105">Funktioner tillhandahålls i en körningskontext som kallas **funktionsapp**.</span><span class="sxs-lookup"><span data-stu-id="45003-105">Functions are hosted in an execution context called a **function app**.</span></span> <span data-ttu-id="45003-106">Du definierar funktionsappar för att logiskt gruppera och strukturera funktionerna och en beräkningsresurs i Azure.</span><span class="sxs-lookup"><span data-stu-id="45003-106">You define function apps to logically group and structure your functions and a compute resource in Azure.</span></span> <span data-ttu-id="45003-107">I vårt exempel med en hiss skulle en funktionsapp ha skapats som värd för temperaturtjänsten för maskineriets drivhjul.</span><span class="sxs-lookup"><span data-stu-id="45003-107">In our elevator example, you would create a function app to host the escalator drive gear temperature service.</span></span> <span data-ttu-id="45003-108">Det finns några beslut som måste fattas för att skapa en funktionsapp. Du måste välja en tjänstplan och ett kompatibelt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="45003-108">There are a few decisions that need to be made to create the function app; you need to choose a service plan and select a compatible storage account.</span></span>

### <a name="choosing-a-service-plan"></a><span data-ttu-id="45003-109">Välja en tjänstplan</span><span class="sxs-lookup"><span data-stu-id="45003-109">Choosing a service plan</span></span>

<span data-ttu-id="45003-110">Funktionsappar kan användas med en av två typer av tjänstplaner.</span><span class="sxs-lookup"><span data-stu-id="45003-110">Function apps may use one of two types of service plans.</span></span> <span data-ttu-id="45003-111">Den första är **förbrukningsplanen**.</span><span class="sxs-lookup"><span data-stu-id="45003-111">The first service plan is the **Consumption service plan**.</span></span> <span data-ttu-id="45003-112">Välj den här planen om du använder Azures programplattform utan server.</span><span class="sxs-lookup"><span data-stu-id="45003-112">This is the plan that you choose when using the Azure serverless application platform.</span></span> <span data-ttu-id="45003-113">Förbrukningsplanen innehåller automatisk skalning, och du debiteras när funktionerna körs.</span><span class="sxs-lookup"><span data-stu-id="45003-113">The Consumption service plan provides automatic scaling and bills you when your functions are running.</span></span> <span data-ttu-id="45003-114">I förbrukningsplanen ingår en konfigurerbar tidsgräns för funktionens körning.</span><span class="sxs-lookup"><span data-stu-id="45003-114">The Consumption plan comes with a configurable timeout period for the execution of a function.</span></span> <span data-ttu-id="45003-115">Den är som standard 5 minuter, men kan konfigureras för upp till 10 minuter.</span><span class="sxs-lookup"><span data-stu-id="45003-115">By default, it is 5 minutes, but may be configured to have a timeout as long as 10 minutes.</span></span>

<span data-ttu-id="45003-116">Den andra planen är **Azure App Service-planen**.</span><span class="sxs-lookup"><span data-stu-id="45003-116">The second plan is called the **Azure App Service plan**.</span></span> <span data-ttu-id="45003-117">Med den här planen kan du undvika tidsgränsperioder genom att funktionen körs kontinuerligt på en virtuell dator som du definierar.</span><span class="sxs-lookup"><span data-stu-id="45003-117">This plan allows you to avoid timeout periods by having your function run continuously on a VM that you define.</span></span> <span data-ttu-id="45003-118">När du använder en App Service-plan ansvarar du för att hantera de appresurser som funktionen körs på, så det är tekniskt sett inte en serverlös plan.</span><span class="sxs-lookup"><span data-stu-id="45003-118">When using an App Service plan, you are responsible for managing the app resources the function runs on, so this is technically not a serverless plan.</span></span> <span data-ttu-id="45003-119">Men det kan vara ett bättre alternativ om dina funktioner används kontinuerligt eller kräver mer processorkraft eller körningstid än vad som ingår i förbrukningsplanen.</span><span class="sxs-lookup"><span data-stu-id="45003-119">However, it may be a better choice if your functions are used continuously or if your functions require more processing power or execution time than the Consumption plan can provide.</span></span>

### <a name="storage-account-requirements"></a><span data-ttu-id="45003-120">Krav för lagringskonto</span><span class="sxs-lookup"><span data-stu-id="45003-120">Storage account requirements</span></span>

<span data-ttu-id="45003-121">När du skapar en funktionsapp måste den kopplas till ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="45003-121">When you create a function app, it must be linked to a storage account.</span></span> <span data-ttu-id="45003-122">Du kan välja ett befintligt konto eller skapa ett nytt.</span><span class="sxs-lookup"><span data-stu-id="45003-122">You can select an existing account or create a new one.</span></span> <span data-ttu-id="45003-123">Lagringskontot används av funktionsappen vid interna åtgärder som att logga funktionskörningar och hantera körningsutlösare.</span><span class="sxs-lookup"><span data-stu-id="45003-123">The function app uses this storage account for internal operations such as logging function executions and managing execution triggers.</span></span> <span data-ttu-id="45003-124">Med förbrukningsplanen är det även här som funktionskoden och konfigurationsfilen lagras.</span><span class="sxs-lookup"><span data-stu-id="45003-124">On the Consumption service plan, this is also where the function code and configuration file are stored.</span></span>

## <a name="create-a-function-app"></a><span data-ttu-id="45003-125">Skapa en funktionsapp</span><span class="sxs-lookup"><span data-stu-id="45003-125">Create a function app</span></span>

<span data-ttu-id="45003-126">Nu ska vi skapa en funktionsapp i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="45003-126">Let's create a function app in the Azure portal.</span></span>

1. <span data-ttu-id="45003-127">Logga in på [Azure-portalen](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) med samma konto som du använde för att aktivera sandbox-miljön.</span><span class="sxs-lookup"><span data-stu-id="45003-127">Sign into the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) using the same account you activated the sandbox with.</span></span>

1. <span data-ttu-id="45003-128">Välj knappen **Skapa en resurs** längst upp till vänster på Azure Portal och sedan **Kom igång > Serverlös funktionsapp** för att öppna bladet Funktionsapp *Skapa*.</span><span class="sxs-lookup"><span data-stu-id="45003-128">Select the **Create a resource** button found on the upper left-hand corner of the Azure portal, and then select **Get started > Serverless Function App** to open the Function App *Create* blade.</span></span> <span data-ttu-id="45003-129">Du kan också använda alternativet **Compute > Funktionsapp** då samma blad öppnas.</span><span class="sxs-lookup"><span data-stu-id="45003-129">Alternatively, you can use the **Compute > Function App** option, which will open the same blade.</span></span>

  ![Skärmbild av Azure Portal som visar bladet Skapa resurs med Compute-avsnittet och Funktionsapp markerade.](../media/3-create-function-app-blade.png)

1. <span data-ttu-id="45003-131">Välj ett globalt unikt appnamn.</span><span class="sxs-lookup"><span data-stu-id="45003-131">Choose a globally unique app name.</span></span> <span data-ttu-id="45003-132">Det kommer att fungera som bas-URL för din tjänst.</span><span class="sxs-lookup"><span data-stu-id="45003-132">This will serve as the base URL of your service.</span></span> <span data-ttu-id="45003-133">Du kan till exempel kalla den **escalator-functions-xxxxxxx**, där kryssen kan ersättas med dina initialer och ditt födelseår.</span><span class="sxs-lookup"><span data-stu-id="45003-133">For example, you can name it **escalator-functions-xxxxxxx**, where the x's can be replaced with your initials and your birth year.</span></span> <span data-ttu-id="45003-134">Om den ändå inte är globalt unikt kan du testa vilken kombination som helst.</span><span class="sxs-lookup"><span data-stu-id="45003-134">If this isn't globally unique, you can try any other combination.</span></span> <span data-ttu-id="45003-135">Giltiga tecken är a-z, 0-9 och -.</span><span class="sxs-lookup"><span data-stu-id="45003-135">Valid characters are a-z, 0-9 and -.</span></span>

1. <span data-ttu-id="45003-136">Välj den Azure-prenumeration som du vill ska vara värd för funktionsappen.</span><span class="sxs-lookup"><span data-stu-id="45003-136">Select the Azure subscription where you would like the function app hosted.</span></span>

1. <span data-ttu-id="45003-137">Välj den befintliga resursgruppen som heter ”**<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>**”.</span><span class="sxs-lookup"><span data-stu-id="45003-137">Select the existing resource group called "**<rgn>[sandbox resource group name]</rgn>**".</span></span>

1. <span data-ttu-id="45003-138">Välj **Windows** som OS.</span><span class="sxs-lookup"><span data-stu-id="45003-138">Select **Windows** for OS.</span></span>

1. <span data-ttu-id="45003-139">Välj **Förbrukningsplan** som **Värdplan**. Det är alltså det serverlösa värdalternativet.</span><span class="sxs-lookup"><span data-stu-id="45003-139">For **Hosting Plan**, select **Consumption Plan**, which is the serverless hosting option.</span></span>

1. <span data-ttu-id="45003-140">Välj den geografiska plats som är närmast dig från listan nedan.</span><span class="sxs-lookup"><span data-stu-id="45003-140">Select the geographical location closest to you from the list below.</span></span> <span data-ttu-id="45003-141">I ett produktionssystem vill du helst välja en plats nära dina kunder eller funktionens kunder.</span><span class="sxs-lookup"><span data-stu-id="45003-141">In a production system, you would want to select a location near your customers or consumers of the function.</span></span>

    [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]

1. <span data-ttu-id="45003-142">För **Körningsstack** väljer du JavaScript i listrutan, som är det språk som vi implementerar funktionsexemplen i den här övningen i.</span><span class="sxs-lookup"><span data-stu-id="45003-142">For **Runtime Stack**, select JavaScript from the dropdown, which is the language in which we implement the function examples in this exercise.</span></span>

1. <span data-ttu-id="45003-143">Skapa ett nytt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="45003-143">Create a new storage account.</span></span> <span data-ttu-id="45003-144">Azure ger det ett namn baserat på appnamnet.</span><span class="sxs-lookup"><span data-stu-id="45003-144">Azure will give it a name based on the app name.</span></span> <span data-ttu-id="45003-145">Du kan ändra det om du vill, men det måste också vara unikt.</span><span class="sxs-lookup"><span data-stu-id="45003-145">You can change it if you like, but it must also be unique.</span></span>

1. <span data-ttu-id="45003-146">Se till att Azure Application Insights är **På** och välj den region som är närmast dig (eller dina kunder).</span><span class="sxs-lookup"><span data-stu-id="45003-146">Make sure that Azure Application Insights is **On** and select the region closest to you (or your customers).</span></span>

1. <span data-ttu-id="45003-147">Välj **Skapa**. Distributionen kan ta några minuter.</span><span class="sxs-lookup"><span data-stu-id="45003-147">Select **Create**; deployment will take a few minutes.</span></span> <span data-ttu-id="45003-148">Du får ett meddelande när den är klar.</span><span class="sxs-lookup"><span data-stu-id="45003-148">You'll receive a notification once it's complete.</span></span>

## <a name="verify-your-azure-function-app"></a><span data-ttu-id="45003-149">Verifiera din Azure-funktionsapp</span><span class="sxs-lookup"><span data-stu-id="45003-149">Verify your Azure function app</span></span>

1. <span data-ttu-id="45003-150">Välj **Resursgrupper** i den vänstra menyn i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="45003-150">From the Azure portal left-hand menu, select **Resource groups**.</span></span> <span data-ttu-id="45003-151">Du bör då se en resursgrupp med namnet **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>** i listan över tillgängliga grupper.</span><span class="sxs-lookup"><span data-stu-id="45003-151">You should then see a resource group named **<rgn>[sandbox resource group name]</rgn>** in the list of available groups.</span></span>

    ![Skärmbild av Azure-portalen som visar bladet Resursgrupper med menyalternativet Resursgrupper och listobjektet <rgn>[Resursgruppsnamn för sandbox-miljö]</rgn> markerat.](../media/3-resource-group.png)

1. <span data-ttu-id="45003-153">Välj resursgruppen **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>**.</span><span class="sxs-lookup"><span data-stu-id="45003-153">Select the resource group **<rgn>[sandbox resource group name]</rgn>**.</span></span> <span data-ttu-id="45003-154">Du bör se en lista över resurser som liknar följande lista.</span><span class="sxs-lookup"><span data-stu-id="45003-154">You should then see a resource list like the following list.</span></span>

    ![Skärmbild av Azure-portalen som visar alla resurser i gruppen <rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>, inklusive poster för en App Service-plan, ett lagringskonto, en Application Insights-resurs och en App Service.](../media/3-resource-list.png)

<span data-ttu-id="45003-156">Objektet med blixtikonen, som visas som en App Service, är din nya funktionsapp.</span><span class="sxs-lookup"><span data-stu-id="45003-156">The item with the lightning bolt Function icon, listed as an App Service, is your new function app.</span></span> <span data-ttu-id="45003-157">Du kan klicka på den för att öppna information om den nya funktionen – den har tilldelats en offentlig URL, om du öppnar den i en webbläsare bör du få en standardsida som visar att din funktionsapp körs.</span><span class="sxs-lookup"><span data-stu-id="45003-157">You can click on it to open the details about the new function - it has a public URL assigned to it, if you open that in a browser, you should get a default web page that indicates your Function App is running.</span></span>
