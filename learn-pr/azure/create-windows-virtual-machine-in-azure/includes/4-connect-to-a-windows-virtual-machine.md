<span data-ttu-id="405e3-101">Nu när vi har en virtuell Windows-dator i Azure ska vi placera dina program och data på dessa virtuella datorer för att bearbeta våra trafikvideor.</span><span class="sxs-lookup"><span data-stu-id="405e3-101">Now that we have a Windows VM in Azure, the next thing you’ll do is put your applications and data on those VMs to process our traffic videos.</span></span> 

<span data-ttu-id="405e3-102">Men om du inte har konfigurerat en plats-till-plats-VPN till Azure kan dina virtuella Azure-datorer inte nås från det lokala nätverket.</span><span class="sxs-lookup"><span data-stu-id="405e3-102">However, unless you’ve set up a site-to-site VPN to Azure, your Azure VMs won’t be accessible from your local network.</span></span> <span data-ttu-id="405e3-103">Om du precis har kommit igång med Azure har du troligen inte någon fungerande plats-till-plats-VPN.</span><span class="sxs-lookup"><span data-stu-id="405e3-103">If you’re just getting started with Azure, it’s unlikely that you have a working site-to-site VPN.</span></span> <span data-ttu-id="405e3-104">Så hur ska du då överföra filerna till virtuella Azure-datorer?</span><span class="sxs-lookup"><span data-stu-id="405e3-104">So how can you transfer files to Azure VMs?</span></span> <span data-ttu-id="405e3-105">Ett enkelt sätt är att använda funktionen Anslutning till fjärrskrivbord i Azure för att dela dina lokala enheter med dina nya virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="405e3-105">One easy way is to use Azure’s Remote Desktop Connections feature to share your local drives with your new Azure VMs.</span></span>

<span data-ttu-id="405e3-106">Nu när vi har en ny virtuell Windows-dator måste vi installera vår egna programvara på den.</span><span class="sxs-lookup"><span data-stu-id="405e3-106">Now that we have a new Windows virtual machine, we need to install our custom software on to it.</span></span> <span data-ttu-id="405e3-107">Det finns flera sätt att göra detta på.</span><span class="sxs-lookup"><span data-stu-id="405e3-107">There are several ways we can do this.</span></span>

- <span data-ttu-id="405e3-108">Remote Desktop Protocol (RDP)</span><span class="sxs-lookup"><span data-stu-id="405e3-108">Remote Desktop Protocol (RDP)</span></span>
- <span data-ttu-id="405e3-109">Anpassade skript</span><span class="sxs-lookup"><span data-stu-id="405e3-109">Custom scripts</span></span>
- <span data-ttu-id="405e3-110">Anpassade avbildningar av virtuella datorer (med förinstallerad programvara)</span><span class="sxs-lookup"><span data-stu-id="405e3-110">Custom VM images (with the software preinstalled)</span></span>

<span data-ttu-id="405e3-111">Låt oss titta på den enklaste metoden för Windows-datorer: Fjärrskrivbord.</span><span class="sxs-lookup"><span data-stu-id="405e3-111">Let's look at the simplest approach for Windows VMs: Remote Desktop.</span></span>

## <a name="what-is-the-remote-desktop-protocol"></a><span data-ttu-id="405e3-112">Vad är Remote Desktop Protocol?</span><span class="sxs-lookup"><span data-stu-id="405e3-112">What is the Remote Desktop Protocol?</span></span>

<span data-ttu-id="405e3-113">Med Remote Desktop Protocol (RDP) kan du fjärransluta till användargränssnittet i Windows-baserade datorer.</span><span class="sxs-lookup"><span data-stu-id="405e3-113">Remote Desktop (RDP) provides remote connectivity to the UI of Windows-based computers.</span></span> <span data-ttu-id="405e3-114">Du kan logga in på en fjärransluten fysisk eller virtuell Windows-dator och styra datorn, precis som när du sitter vid den.</span><span class="sxs-lookup"><span data-stu-id="405e3-114">RDP enables you to sign in to a remote physical or virtual Windows computer and control that computer as if you were seated at the console.</span></span> <span data-ttu-id="405e3-115">Med en RDP-anslutning kan du utföra merparten av de åtgärder som du kan göra från konsolen på en fysisk dator, med undantag för vissa ström- och maskinvarurelaterade funktioner.</span><span class="sxs-lookup"><span data-stu-id="405e3-115">An RDP connection enables you to carry out the vast majority of operations that you can do from the console of a physical computer, with the exception of some power and hardware-related functions.</span></span>

<span data-ttu-id="405e3-116">En RDP-anslutning kräver en RDP-klient.</span><span class="sxs-lookup"><span data-stu-id="405e3-116">An RDP connection requires an RDP client.</span></span> <span data-ttu-id="405e3-117">Microsoft tillhandahåller RDP-klienter för följande operativsystem:</span><span class="sxs-lookup"><span data-stu-id="405e3-117">Microsoft provides RDP clients for the following operating systems:</span></span>

- <span data-ttu-id="405e3-118">Windows (inbyggt)</span><span class="sxs-lookup"><span data-stu-id="405e3-118">Windows (built-in)</span></span>
- <span data-ttu-id="405e3-119">MacOS</span><span class="sxs-lookup"><span data-stu-id="405e3-119">MacOS</span></span>
- <span data-ttu-id="405e3-120">iOS</span><span class="sxs-lookup"><span data-stu-id="405e3-120">iOS</span></span>
- <span data-ttu-id="405e3-121">Android</span><span class="sxs-lookup"><span data-stu-id="405e3-121">Android</span></span>

<span data-ttu-id="405e3-122">Följande skärmbild visar Remote Desktop Protocol-klienten i Windows 10.</span><span class="sxs-lookup"><span data-stu-id="405e3-122">The following screenshot displays the Remote Desktop Protocol client in Windows 10.</span></span>

![Skärmbild av användargränssnittet för Remote Desktop Protocol-klienten.](../media/4-rdp-client.png)

<span data-ttu-id="405e3-124">Det finns även Linux-klienter med öppen källkod, till exempel Remmina som gör det möjligt att ansluta till en Windows-dator från en Ubuntu-distribution.</span><span class="sxs-lookup"><span data-stu-id="405e3-124">There are also open source Linux clients, such as Remmina that enable you to connect to a Windows PC from an Ubuntu distribution.</span></span>

## <a name="connecting-to-an-azure-vm"></a><span data-ttu-id="405e3-125">Ansluta till en virtuell Azure-dator</span><span class="sxs-lookup"><span data-stu-id="405e3-125">Connecting to an Azure VM</span></span>

<span data-ttu-id="405e3-126">Som vi såg alldeles nyss kommunicerar virtuella Azure-datorer i ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="405e3-126">As we saw a moment ago, Azure VMs communicate on a virtual network.</span></span> <span data-ttu-id="405e3-127">De kan också ha en valfri offentlig IP-adress som har tilldelats till dem.</span><span class="sxs-lookup"><span data-stu-id="405e3-127">They can also have an optional public IP address assigned to them.</span></span> <span data-ttu-id="405e3-128">Med en offentlig IP-adress kan vi kommunicera med den virtuella datorn via Internet.</span><span class="sxs-lookup"><span data-stu-id="405e3-128">With a public IP, we can communicate with the VM over the Internet.</span></span> <span data-ttu-id="405e3-129">Vi kan också konfigurera ett virtuellt privat nätverk (VPN) som ansluter det lokala nätverket till Azure. Då kan vi på ett säkert sätt ansluta till den virtuella datorn utan att exponera en offentlig IP-adress.</span><span class="sxs-lookup"><span data-stu-id="405e3-129">Alternatively, we can setup a virtual private network (VPN) that connects our on-premises network to Azure - letting us securely connect to the VM without exposing a public IP.</span></span> <span data-ttu-id="405e3-130">Den här metoden beskrivs i en annan modul och är fullständigt dokumenterad om du vill utforska det alternativet.</span><span class="sxs-lookup"><span data-stu-id="405e3-130">This approach is covered in another module and is fully documented if you are interested in exploring that option.</span></span>

<span data-ttu-id="405e3-131">En sak att tänka på med offentliga IP-adresser i Azure är att de ofta tilldelas dynamiskt.</span><span class="sxs-lookup"><span data-stu-id="405e3-131">One thing to be aware of with public IP addresses in Azure is they are often dynamically allocated.</span></span> <span data-ttu-id="405e3-132">Det innebär att IP-adressen kan ändras över tid – för virtuella datorer sker det när den virtuella datorn startas om.</span><span class="sxs-lookup"><span data-stu-id="405e3-132">That means the IP address can change over time - for VMs this happens when the VM is restarted.</span></span> <span data-ttu-id="405e3-133">Du kan betala mer för att tilldela statiska adresser om du vill ansluta direkt till en IP-adress i stället för ett namn och se till att IP-adressen inte ändras.</span><span class="sxs-lookup"><span data-stu-id="405e3-133">You can pay more to assign static addresses if you want to connect directly to an IP address instead of a name and need to ensure that the IP address will not change.</span></span>

### <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a><span data-ttu-id="405e3-134">Hur ansluter du till en virtuell dator i Azure med RDP?</span><span class="sxs-lookup"><span data-stu-id="405e3-134">How do you connect to a VM in Azure using RDP?</span></span>

<span data-ttu-id="405e3-135">Det är enkelt att ansluta till en virtuell dator i Azure med RDP.</span><span class="sxs-lookup"><span data-stu-id="405e3-135">Connecting to a VM in Azure using RDP is a simple process.</span></span> <span data-ttu-id="405e3-136">Gå till egenskaperna för din virtuella dator i Azure Portal och klicka på **Anslut** högst upp.</span><span class="sxs-lookup"><span data-stu-id="405e3-136">In the Azure portal, you go to the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="405e3-137">De IP-adresser som tilldelats till den virtuella datorn visas och du kan ladda ned en förkonfigurerad **.rdp** -fil som Windows sedan öppnar i RDP-klienten.</span><span class="sxs-lookup"><span data-stu-id="405e3-137">This will show you the IP addresses assigned to the VM and give you the option to download a preconfigured **.rdp** file that Windows then opens in the RDP client.</span></span> <span data-ttu-id="405e3-138">Du kan välja att ansluta via den offentliga IP-adressen till den virtuella datorn i RDP-filen.</span><span class="sxs-lookup"><span data-stu-id="405e3-138">You can choose to connect over the public IP address of the VM in the RDP file.</span></span> <span data-ttu-id="405e3-139">Om du ansluter via VPN eller ExpressRoute kan du välja den interna IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="405e3-139">Alternatively, if you're connecting over VPN or ExpressRoute, you can select the internal IP address.</span></span> <span data-ttu-id="405e3-140">Du kan också välja portnumret för anslutningen.</span><span class="sxs-lookup"><span data-stu-id="405e3-140">You can also select the port number for the connection.</span></span>

<span data-ttu-id="405e3-141">Om du använder en statisk offentlig IP-adress för den virtuella datorn, kan du spara **.rdp**-filen på skrivbordet.</span><span class="sxs-lookup"><span data-stu-id="405e3-141">If you're using a static public IP address for the VM, you can save the **.rdp** file to your desktop.</span></span> <span data-ttu-id="405e3-142">Om du använder dynamisk IP-adresshantering är **.rdp**-filen endast giltig när den virtuella datorn körs.</span><span class="sxs-lookup"><span data-stu-id="405e3-142">If you're using dynamic IP addressing, the **.rdp** file only remains valid while the VM is running.</span></span> <span data-ttu-id="405e3-143">Om du stoppar och startar om den virtuella datorn måste du hämta en annan **.rdp**-fil.</span><span class="sxs-lookup"><span data-stu-id="405e3-143">If you stop and restart the VM, you must download another **.rdp** file.</span></span>

> [!TIP]
> <span data-ttu-id="405e3-144">Du kan också ange den offentliga IP-adressen för den virtuella datorn i Windows RDP-klienten och klicka på **Anslut**.</span><span class="sxs-lookup"><span data-stu-id="405e3-144">You can also enter the public IP address of the VM into the Windows RDP client and click **Connect**.</span></span>

<span data-ttu-id="405e3-145">När du ansluter får du troligtvis två varningar.</span><span class="sxs-lookup"><span data-stu-id="405e3-145">When you connect, you will typically receive two warnings.</span></span> <span data-ttu-id="405e3-146">Dessa är:</span><span class="sxs-lookup"><span data-stu-id="405e3-146">These are:</span></span>

<span data-ttu-id="405e3-147">-**Utgivarvarning** – Orsakas av att **.rdp**-filen inte har signerats offentligt.</span><span class="sxs-lookup"><span data-stu-id="405e3-147">-**Publisher warning** - caused by the **.rdp** file not being publicly signed.</span></span>
- <span data-ttu-id="405e3-148">**Certifikatvarning** – Orsakas av att datorcertifikatet inte är betrott.</span><span class="sxs-lookup"><span data-stu-id="405e3-148">**Certificate warning** - caused by the machine certificate not being trusted.</span></span>

<span data-ttu-id="405e3-149">Dessa varningar kan ignoreras i testmiljöer.</span><span class="sxs-lookup"><span data-stu-id="405e3-149">In test environments, these warnings can be ignored.</span></span> <span data-ttu-id="405e3-150">I produktionsmiljö kan **.rdp**-filen signeras med hjälp av **RDPSIGN. EXE** och datorcertifikatet kan placeras i klientens arkiv för **betrodda rotcertifikatutfärdare**.</span><span class="sxs-lookup"><span data-stu-id="405e3-150">In production environments, the **.rdp** file can be signed using **RDPSIGN.EXE** and the machine certificate placed in the client's **Trusted Root Certification Authorities** store.</span></span>

<span data-ttu-id="405e3-151">Nu ska vi prova att använda RDP för att ansluta till vår virtuella dator.</span><span class="sxs-lookup"><span data-stu-id="405e3-151">Let's try using RDP to connect to our VM.</span></span>