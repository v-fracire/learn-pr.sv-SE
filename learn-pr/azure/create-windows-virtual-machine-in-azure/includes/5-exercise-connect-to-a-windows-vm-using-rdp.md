<span data-ttu-id="2965c-101">Vår virtuella Windows-dator har distribuerats och körs men den har inte konfigurerats att utföra något arbete än.</span><span class="sxs-lookup"><span data-stu-id="2965c-101">We have our Windows VM deployed and running, but it's not configured to do any work.</span></span>

<span data-ttu-id="2965c-102">Som du kanske minns är vårt scenario ett videobearbetningssystem.</span><span class="sxs-lookup"><span data-stu-id="2965c-102">Recall our scenario is a video processing system.</span></span> <span data-ttu-id="2965c-103">Vår plattform tar emot filer via FTP.</span><span class="sxs-lookup"><span data-stu-id="2965c-103">Our platform receives files through FTP.</span></span> <span data-ttu-id="2965c-104">Trafikkamerorna överför videoklipp till en känd URL, som mappas till en mapp på servern.</span><span class="sxs-lookup"><span data-stu-id="2965c-104">The traffic cameras upload video clips to a known URL, which is mapped to a folder on the server.</span></span> <span data-ttu-id="2965c-105">Den anpassade programvaran på varje virtuell Windows-dator körs som en tjänst och bevakar mappen och bearbetar varje överfört klipp.</span><span class="sxs-lookup"><span data-stu-id="2965c-105">The custom software on each Windows VM runs as a service and watches the folder and processes each uploaded clip.</span></span> <span data-ttu-id="2965c-106">Den skickar sedan den normaliserade videon till våra algoritmer som körs på andra Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="2965c-106">It then passes the normalized video to our algorithms running on other Azure services.</span></span>

<span data-ttu-id="2965c-107">Det finns några saker som vi behöver konfigurera för att det här scenariot ska fungera:</span><span class="sxs-lookup"><span data-stu-id="2965c-107">There are a few things we would need to configure to support this scenario:</span></span>

- <span data-ttu-id="2965c-108">Installera FTP och öppna de portar som behövs för att kommunicera.</span><span class="sxs-lookup"><span data-stu-id="2965c-108">Install FTP and open the ports it needs to communicate.</span></span>
- <span data-ttu-id="2965c-109">Installera den tillverkarspecifika video-codecen som är unik för stadens kamerasystem.</span><span class="sxs-lookup"><span data-stu-id="2965c-109">Install the proprietary video codec unique to the city's camera system.</span></span>
- <span data-ttu-id="2965c-110">Installera transkodningstjänsten som bearbetar överförda videor.</span><span class="sxs-lookup"><span data-stu-id="2965c-110">Install our transcoding service that processes uploaded videos.</span></span>

<span data-ttu-id="2965c-111">Många av dessa är typiska administrativa uppgifter som vi inte beskriver här, och vi har inte heller någon programvara att installera.</span><span class="sxs-lookup"><span data-stu-id="2965c-111">Many of these are typical administrative tasks we won't actually cover here, and we don't have software to install.</span></span> <span data-ttu-id="2965c-112">I stället går vi igenom stegen och visar hur du _skulle kunna_ installera anpassad programvara eller programvara från tredje part via fjärrskrivbord.</span><span class="sxs-lookup"><span data-stu-id="2965c-112">Instead, we will walk through the steps and show you how you _could_ install custom or third-party software using Remote Desktop.</span></span> <span data-ttu-id="2965c-113">Vi börjar med att hämta anslutningsinformationen.</span><span class="sxs-lookup"><span data-stu-id="2965c-113">Let's start by getting the connection information.</span></span>

## <a name="connect-to-the-vm-with-remote-desktop-protocol"></a><span data-ttu-id="2965c-114">Ansluta till den virtuella datorn med RDP (Remote Desktop Protocol)</span><span class="sxs-lookup"><span data-stu-id="2965c-114">Connect to the VM with Remote Desktop Protocol</span></span>

<span data-ttu-id="2965c-115">För att ansluta till en virtuell Azure-dator med en RDP-klient behöver du:</span><span class="sxs-lookup"><span data-stu-id="2965c-115">To connect to an Azure VM with an RDP client, you will need:</span></span>

- <span data-ttu-id="2965c-116">Den virtuella datorns offentliga IP-adress (eller privata om den virtuella datorn har konfigurerats att ansluta till ditt nätverk).</span><span class="sxs-lookup"><span data-stu-id="2965c-116">The public IP address of the VM (or private if the VM is configured to connect to your network).</span></span>
- <span data-ttu-id="2965c-117">Portnumret.</span><span class="sxs-lookup"><span data-stu-id="2965c-117">The port number.</span></span>

<span data-ttu-id="2965c-118">Du kan ange den här informationen i RDP-klienten eller hämta en förkonfigurerad **RDP**-fil.</span><span class="sxs-lookup"><span data-stu-id="2965c-118">You can enter this information into the RDP client, or download a pre-configured **RDP** file.</span></span>

### <a name="download-the-rdp-file"></a><span data-ttu-id="2965c-119">Ladda ned RDP-filen</span><span class="sxs-lookup"><span data-stu-id="2965c-119">Download the RDP file</span></span>

1. <span data-ttu-id="2965c-120">Kontrollera att panelen [Översikt](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) för den virtuella datorn som du skapade tidigare är öppen på **Azure Portal**.</span><span class="sxs-lookup"><span data-stu-id="2965c-120">In the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true), ensure the **Overview** panel for the virtual machine that you created earlier is open.</span></span> <span data-ttu-id="2965c-121">Du hittar den virtuella datorn under **Alla resurser** om du behöver öppna den.</span><span class="sxs-lookup"><span data-stu-id="2965c-121">You can find the VM under **All Resources** if you need to open it.</span></span> <span data-ttu-id="2965c-122">Översiktspanelen innehåller mycket information om den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-122">The overview panel has a lot of information about the VM.</span></span>

    - <span data-ttu-id="2965c-123">Du kan se om den virtuella datorn körs.</span><span class="sxs-lookup"><span data-stu-id="2965c-123">You can see whether the VM is running.</span></span>
    - <span data-ttu-id="2965c-124">Stoppa eller starta om den.</span><span class="sxs-lookup"><span data-stu-id="2965c-124">Stop or restart it.</span></span>
    - <span data-ttu-id="2965c-125">Hämta den offentliga IP-adressen för att ansluta till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-125">Get the public IP address to connect to the VM.</span></span>
    - <span data-ttu-id="2965c-126">Visa processor-, disk- och nätverksaktivitet.</span><span class="sxs-lookup"><span data-stu-id="2965c-126">See the activity of the CPU, disk, and network.</span></span>

1. <span data-ttu-id="2965c-127">Klicka på knappen **Anslut** längst upp i fönstret.</span><span class="sxs-lookup"><span data-stu-id="2965c-127">Click the **Connect** button at the top of the pane.</span></span>

1. <span data-ttu-id="2965c-128">Skriv ned inställningarna för **IP-adress** och **Portnummer** på bladet **Anslut till virtuell dator**. Klicka sedan på **Ladda ned RDP-fil** och spara filen på datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-128">In the **Connect to virtual machine** blade, note the **IP address** and **Port number** settings, then click **Download RDP File** and save it to your computer.</span></span>

1. <span data-ttu-id="2965c-129">Innan vi ansluter ska vi justera några inställningar.</span><span class="sxs-lookup"><span data-stu-id="2965c-129">Before we connect, let's adjust a few settings.</span></span> <span data-ttu-id="2965c-130">I Windows letar du upp filen med Explorer, högerklickar och väljer **Redigera**.</span><span class="sxs-lookup"><span data-stu-id="2965c-130">On Windows, find the file using Explorer, right-click and select **Edit**.</span></span> <span data-ttu-id="2965c-131">I MacOS måste du först öppna filen med RDP-klienten och sedan högerklicka på objektet i listan som visas och välja **Redigera**.</span><span class="sxs-lookup"><span data-stu-id="2965c-131">On MacOS you will need to open the file first with the RDP client and then right-click on the item in the displayed list and select **Edit**.</span></span>

1. <span data-ttu-id="2965c-132">Du kan ändra flera inställningar som styr anslutningen till den virtuella Azure-datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-132">You can adjust a variety of settings to control the experience in connecting to the Azure VM.</span></span> <span data-ttu-id="2965c-133">De inställningar som är intressanta här är:</span><span class="sxs-lookup"><span data-stu-id="2965c-133">The settings you will want to examine are:</span></span>

    - <span data-ttu-id="2965c-134">**Visa**: Standardinställningen är hela skärmen.</span><span class="sxs-lookup"><span data-stu-id="2965c-134">**Display**: By default, it will be full screen.</span></span> <span data-ttu-id="2965c-135">Du kan ändra detta till en lägre upplösning eller använda alla övervakare om du har fler än en.</span><span class="sxs-lookup"><span data-stu-id="2965c-135">You can change this to a lower resolution, or use all your monitors if you have more than one.</span></span>
    - <span data-ttu-id="2965c-136">**Lokala resurser**: Du kan dela lokala enheter med den virtuella datorn, så att du kan kopiera filer från din dator till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-136">**Local Resources**: You can share local drives with the VM - allowing you to copy files from your PC to the VM.</span></span> <span data-ttu-id="2965c-137">Klicka på knappen **Mer** under **Lokala enheter och resurser** för att välja vad som ska delas.</span><span class="sxs-lookup"><span data-stu-id="2965c-137">Click the **More** button under **Local devices and resources** to select what is shared.</span></span>
    - <span data-ttu-id="2965c-138">**Experience** (Upplevelse): Anpassa den visuella upplevelsen baserat på din nätverkskvalitet.</span><span class="sxs-lookup"><span data-stu-id="2965c-138">**Experience**: Adjust the visual experience based on your network quality.</span></span>

1. <span data-ttu-id="2965c-139">Dela din lokala C:-enhet så att det är synlig för den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-139">Share your Local C: drive so it will be visible to the VM.</span></span>

1. <span data-ttu-id="2965c-140">Gå tillbaka till fliken **Allmänt** och klicka på **Spara** för att spara ändringarna.</span><span class="sxs-lookup"><span data-stu-id="2965c-140">Switch back to the **General** tab and click **Save** to save the changes.</span></span> <span data-ttu-id="2965c-141">Du kan alltid gå tillbaka och redigera den här filen senare om du vill prova andra inställningar.</span><span class="sxs-lookup"><span data-stu-id="2965c-141">You can always come back and edit this file later to try other settings.</span></span>

### <a name="connect-to-the-windows-vm"></a><span data-ttu-id="2965c-142">Ansluta till den virtuella Windows-datorn</span><span class="sxs-lookup"><span data-stu-id="2965c-142">Connect to the Windows VM</span></span>

1. <span data-ttu-id="2965c-143">Klicka på knappen **Anslut** för att ansluta till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-143">Click the **Connect** button to start the connection to the VM.</span></span>

1. <span data-ttu-id="2965c-144">Notera säkerhetsvarningen och fjärrdatorns IP-adress i dialogrutan **Anslutning till fjärrskrivbord** och klicka sedan på **Anslut**.</span><span class="sxs-lookup"><span data-stu-id="2965c-144">In the **Remote Desktop Connection** dialog box, note the security warning and the remote computer IP address, then click **Connect**.</span></span>

1. <span data-ttu-id="2965c-145">I dialogrutan **Windows-säkerhet** anger du samma användarnamn och lösenord som i steg 6 och 7.</span><span class="sxs-lookup"><span data-stu-id="2965c-145">In the **Windows Security** dialog box, enter your username and password that you used in steps 6 and 7.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2965c-146">Om du använder en Windows-klient för att ansluta till den virtuella datorn ställs standardinställningen in på kända identiteter på datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-146">If you are using a Windows client to connect to the VM, it will default to known identities on your machine.</span></span> <span data-ttu-id="2965c-147">Du kan klicka på alternativet **Fler alternativ** och välja ”Använd ett annat konto” om du vill ange en annan kombination av användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="2965c-147">You can click the **More choices** option and select "Use a different account" to let you enter a different username/password combination.</span></span>

1. <span data-ttu-id="2965c-148">I den andra dialogrutan för **Anslutning till fjärrskrivbord** noterar du certifikatfelen och klickar sedan på **Ja**.</span><span class="sxs-lookup"><span data-stu-id="2965c-148">In the second **Remote Desktop Connection** dialog box, note the certificate errors, then click **Yes**.</span></span>

### <a name="install-worker-roles"></a><span data-ttu-id="2965c-149">Installera arbetsroller</span><span class="sxs-lookup"><span data-stu-id="2965c-149">Install worker roles</span></span>

<span data-ttu-id="2965c-150">Första gången du ansluter till en virtuell Windows-server startas Serverhanteraren.</span><span class="sxs-lookup"><span data-stu-id="2965c-150">The first time you connect to a Windows server VM, it will launch Server Manager.</span></span> <span data-ttu-id="2965c-151">Det gör att du kan tilldela en arbetsroll för vanliga webb- eller datauppgifter.</span><span class="sxs-lookup"><span data-stu-id="2965c-151">This allows you to assign a worker role for common web or data tasks.</span></span> <span data-ttu-id="2965c-152">Du kan också starta Serverhanteraren via Start-menyn.</span><span class="sxs-lookup"><span data-stu-id="2965c-152">You can also launch the Server Manager through the Start Menu.</span></span>

<span data-ttu-id="2965c-153">Det är här vi normalt skulle lägga till webbserverrollen till servern.</span><span class="sxs-lookup"><span data-stu-id="2965c-153">This is where we would add the Web Server role to the server.</span></span> <span data-ttu-id="2965c-154">Detta gör att IIS installeras, och som en del av konfigurationen skulle du inaktivera HTTP-begäranden och aktivera FTP-servern.</span><span class="sxs-lookup"><span data-stu-id="2965c-154">This will install IIS and as part of the configuration you would turn off HTTP requests and enable the FTP server.</span></span> <span data-ttu-id="2965c-155">Vi skulle också kunna ignorera IIS och installera en FTP-server från en tredje part.</span><span class="sxs-lookup"><span data-stu-id="2965c-155">Or, we could ignore IIS and install a third-party FTP server.</span></span> <span data-ttu-id="2965c-156">Därefter skulle vi konfigurera FTP-servern att tillåta åtkomst till en mapp på den Big Data-enhet som vi lade till på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-156">We'd then configure the FTP server to allow access to a folder on our big data drive we added to the VM.</span></span>

<span data-ttu-id="2965c-157">Eftersom vi inte ska konfigurera detta här kan du stänga Serverhanteraren.</span><span class="sxs-lookup"><span data-stu-id="2965c-157">Since we aren't going to actually configure that here, just close Server Manager.</span></span>

## <a name="install-custom-software"></a><span data-ttu-id="2965c-158">Installera anpassad programvara</span><span class="sxs-lookup"><span data-stu-id="2965c-158">Install custom software</span></span>

<span data-ttu-id="2965c-159">Vi kan använda någon av två metoder för att installera programvara.</span><span class="sxs-lookup"><span data-stu-id="2965c-159">We have two approaches we can use to install software.</span></span> <span data-ttu-id="2965c-160">Den här virtuella datorn är ansluten till Internet.</span><span class="sxs-lookup"><span data-stu-id="2965c-160">First, this VM is connected to the Internet.</span></span> <span data-ttu-id="2965c-161">Om programvaran som du behöver har ett nedladdningsbart installationsprogram kan du öppna en webbläsare i RDP-sessionen, ladda ned programvaran och installera den.</span><span class="sxs-lookup"><span data-stu-id="2965c-161">If the software you need has a downloadable installer, you can open a web browser in the RDP session, download the software, and install it.</span></span> <span data-ttu-id="2965c-162">Om programvaran är anpassad, som vår anpassade tjänst, kan du kopiera den från din lokala dator till den virtuella datorn för att installera den.</span><span class="sxs-lookup"><span data-stu-id="2965c-162">Second, if your software is custom - like our custom service, you can copy it from your local machine over to the VM to install it.</span></span> <span data-ttu-id="2965c-163">Låt oss titta närmare på den sista metoden.</span><span class="sxs-lookup"><span data-stu-id="2965c-163">Let's look at this latter approach.</span></span>

1. <span data-ttu-id="2965c-164">Öppna Utforskaren.</span><span class="sxs-lookup"><span data-stu-id="2965c-164">Open File Explorer.</span></span> <span data-ttu-id="2965c-165">Klicka på **Den här datorn** på sidopanelen.</span><span class="sxs-lookup"><span data-stu-id="2965c-165">Click on **This PC** in the sidebar.</span></span> <span data-ttu-id="2965c-166">Du bör se flera enheter:</span><span class="sxs-lookup"><span data-stu-id="2965c-166">You should see several drives:</span></span>

    - <span data-ttu-id="2965c-167">En Windows-enhet (C:) som representerar operativsystemet.</span><span class="sxs-lookup"><span data-stu-id="2965c-167">Windows (C:) drive representing the OS.</span></span>
    - <span data-ttu-id="2965c-168">En enhet för tillfällig lagring (D:).</span><span class="sxs-lookup"><span data-stu-id="2965c-168">Temporary Storage (D:) drive.</span></span>
    - <span data-ttu-id="2965c-169">Din lokala C:-enhet (den får ett annat namn än det som visas nedan).</span><span class="sxs-lookup"><span data-stu-id="2965c-169">Your local C: drive (it will have a different name than shown below).</span></span>

    ![Skärmbild som visar den lokala enhet som delas med den virtuella Azure-datorn.](../media/6-drive-list.png)

<span data-ttu-id="2965c-171">Om du har åtkomst till din lokala enhet kan du kopiera dessa filer för den anpassade programvaran till den virtuella datorn och installera programvaran.</span><span class="sxs-lookup"><span data-stu-id="2965c-171">With access to your local drive, you can copy the files for the custom software onto the VM and install the software.</span></span> <span data-ttu-id="2965c-172">Vi ska inte gör det här eftersom detta bara är ett simulerat scenario, men du kan föreställa dig hur det skulle fungera.</span><span class="sxs-lookup"><span data-stu-id="2965c-172">We won't actually do that since it's just a simulated scenario, but you can imagine how it would work.</span></span>

<span data-ttu-id="2965c-173">Mer intressant att observera i listan över enheter är vad som _saknas_.</span><span class="sxs-lookup"><span data-stu-id="2965c-173">The more interesting thing to observe in the list of drives is what is _missing_.</span></span> <span data-ttu-id="2965c-174">Observera att enheten **Data** inte visas.</span><span class="sxs-lookup"><span data-stu-id="2965c-174">Notice that our **Data** drive is not present.</span></span> <span data-ttu-id="2965c-175">Azure lade till en virtuell hårddisk (VHD) men initierade den inte.</span><span class="sxs-lookup"><span data-stu-id="2965c-175">Azure added a VHD but didn't initialize it.</span></span>

## <a name="initialize-data-disks"></a><span data-ttu-id="2965c-176">Initiera datadiskar</span><span class="sxs-lookup"><span data-stu-id="2965c-176">Initialize data disks</span></span>

<span data-ttu-id="2965c-177">Alla ytterligare enheter som du skapar från början måste initieras och formateras.</span><span class="sxs-lookup"><span data-stu-id="2965c-177">Any additional drives you create from scratch will need to be initialized and formatted.</span></span> <span data-ttu-id="2965c-178">Processen för att gör detta är identisk med en fysisk enhet.</span><span class="sxs-lookup"><span data-stu-id="2965c-178">The process for doing this is identical to a physical drive.</span></span>

1. <span data-ttu-id="2965c-179">Starta verktyget **Diskhantering** från Start-menyn.</span><span class="sxs-lookup"><span data-stu-id="2965c-179">Launch the **Disk Management** tool from the Start Menu.</span></span> <span data-ttu-id="2965c-180">Du kan behöva gå till verktyget Datorhantering först och sedan Diskhantering, eller prova att söka efter ”Diskhantering” på Start-menyn.</span><span class="sxs-lookup"><span data-stu-id="2965c-180">You may have to go to the Computer Management tool first, then Disk Management, or try searching for "Disk Management" in the Start Menu.</span></span>

1. <span data-ttu-id="2965c-181">En varning visas som anger att en oinitierad disk har identifierats.</span><span class="sxs-lookup"><span data-stu-id="2965c-181">It will display a warning that it has detected an uninitialized disk.</span></span>

    ![Skärmbild som visar en varning från verktyget Diskhantering om en oinitierad datadisk i den virtuella datorn.](../media/6-disk-management.png)

1. <span data-ttu-id="2965c-183">Klicka på **OK** för att initiera disken.</span><span class="sxs-lookup"><span data-stu-id="2965c-183">Click **OK** to initialize the disk.</span></span> <span data-ttu-id="2965c-184">Nu visas disken i listan med volymer där du kan formatera den och tilldela en enhetsbeteckning.</span><span class="sxs-lookup"><span data-stu-id="2965c-184">It will then show up in the list of volumes where you can format it and assign a drive letter.</span></span>

1. <span data-ttu-id="2965c-185">Öppna Utforskaren så bör du se dataenheten.</span><span class="sxs-lookup"><span data-stu-id="2965c-185">Open File Explorer and you should now see your data drive.</span></span>

1. <span data-ttu-id="2965c-186">Gå vidare och stäng RDP-klienten för att logga ut från den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="2965c-186">Go ahead and close the RDP client to sign out of the VM.</span></span> <span data-ttu-id="2965c-187">Servern fortsätter att köras.</span><span class="sxs-lookup"><span data-stu-id="2965c-187">The server will continue to run.</span></span>

<span data-ttu-id="2965c-188">Med RDP kan du arbeta med den virtuella Azure-datorn på samma sätt som en lokal dator.</span><span class="sxs-lookup"><span data-stu-id="2965c-188">RDP allows you to work with the Azure VM just like a local computer.</span></span> <span data-ttu-id="2965c-189">Med åtkomst till skrivbordsgränssnittet kan du administrera den här virtuella datorn på samma sätt som en vanlig Windows-dator och till exempel installera programvara, konfigurera roller, justera funktioner och utföra andra vanliga aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="2965c-189">With Desktop UI access, you can administer this VM as you would any Windows computer: installing software, configuring roles, adjusting features and other common tasks.</span></span> <span data-ttu-id="2965c-190">Men det är en manuell process. Om vissa program alltid behöver installeras kan du automatisera processen med hjälp av skript.</span><span class="sxs-lookup"><span data-stu-id="2965c-190">However, it's a manual process - if we always need to install some software, you might consider automating the process using scripting.</span></span>