<span data-ttu-id="2bcb0-101">Hög tillgänglighet (HA) garanterar att din arkitektur kan hantera fel.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-101">High availability (HA) ensures your architecture can handle failures.</span></span> <span data-ttu-id="2bcb0-102">Anta att du är ansvarig för ett system som måste alltid vara helt fungerande.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-102">Imagine you're responsible for a system that must be always fully operational.</span></span> <span data-ttu-id="2bcb0-103">Fel kan och kommer att inträffa, så hur garanterar du att systemet kan vara kvar online när något går fel?</span><span class="sxs-lookup"><span data-stu-id="2bcb0-103">Failures can and will happen, so how do you ensure that your system can remain online when something goes wrong?</span></span> <span data-ttu-id="2bcb0-104">Hur använder jag underhåll utan tjänstavbrott?</span><span class="sxs-lookup"><span data-stu-id="2bcb0-104">How do you perform maintenance without service interruption?</span></span> 

<span data-ttu-id="2bcb0-105">Här får du lära dig behovet av hög tillgänglighet, utvärdera krav på hög tillgänglighet för program och hur Azure-plattformen hanterar dina tillgänglighetsmål.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-105">Here, you'll learn the need for high availability, evaluate application high-availability requirements, and see how the Azure platform helps you meet your availability goals.</span></span>

## <a name="what-is-high-availability"></a><span data-ttu-id="2bcb0-106">Vad är hög tillgänglighet?</span><span class="sxs-lookup"><span data-stu-id="2bcb0-106">What is high availability?</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yEvc]

<span data-ttu-id="2bcb0-107">En tjänst med hög tillgänglighet är en tjänst som absorberar variationer i tillgänglighet, belastning och tillfälliga fel i beroende tjänster och maskinvara.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-107">A highly-available service is a service that absorbs fluctuations in availability, load, and temporary failures in dependent services and hardware.</span></span> <span data-ttu-id="2bcb0-108">Programmet är online och tillgängligt hela tiden (eller ser till att det ser ut som det) samtidigt som det fungerar acceptabelt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-108">The application remains online and available (or maintains the appearance of it) while performing acceptably.</span></span> <span data-ttu-id="2bcb0-109">Tillgängligheten definieras ofta av affärskrav, servicenivåmål eller servicenivåavtal.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-109">This availability is often defined by business requirements, service-level objectives, or service-level agreements.</span></span>

<span data-ttu-id="2bcb0-110">Hög tillgänglighet handlar främst om förmågan att hantera förlust eller allvarlig försämring av en komponent i ett system.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-110">High availability is ultimately about the ability to handle the loss or severe degradation of a component of a system.</span></span> <span data-ttu-id="2bcb0-111">Det kan bero på att en virtuell dator som är värd för ett program försätts i offlineläge eftersom värden misslyckades.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-111">This might be due to a virtual machine that's hosting an application going offline because the host failed.</span></span> <span data-ttu-id="2bcb0-112">Det kan vara på grund av planerat underhåll av en systemuppgradering.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-112">It could be due to planned maintenance for a system upgrade.</span></span> <span data-ttu-id="2bcb0-113">Det kan även bero på fel i en tjänst i molnet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-113">It could even be caused by the failure of a service in the cloud.</span></span> <span data-ttu-id="2bcb0-114">Om du identifierar de platser där ditt system kan misslyckas och skapar funktioner för att hantera sådana fel kan tjänsterna du erbjuder dina kunder förbli online.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-114">Identifying the places where your system can fail, and building in the capabilities to handle those failures, will ensure that the services you offer to your customers can stay online.</span></span>

<span data-ttu-id="2bcb0-115">Hög tillgänglighet för en tjänst kräver normalt hög tillgänglighet för de komponenter som utgör tjänsten.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-115">High availability of a service typically requires high availability of the components that make up the service.</span></span> <span data-ttu-id="2bcb0-116">Tänk på en webbplats som erbjuder en onlinemarknadsplats för inköp av objekt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-116">Think of a website that offers an online marketplace to purchase items.</span></span> <span data-ttu-id="2bcb0-117">Tjänsten som erbjuds till dina kunder är möjligheten att lista, köpa och sälja saker online.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-117">The service that's offered to your customers is the ability to list, buy, and sell items online.</span></span> <span data-ttu-id="2bcb0-118">För att tillhandahålla den här tjänsten har du flera komponenter: en databas, webbservrar, programservrar och så vidare.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-118">To provide this service, you'll have multiple components: a database, web servers, application servers, and so on.</span></span> <span data-ttu-id="2bcb0-119">Var och en av dessa komponenter kan misslyckas, så du behöver identifiera hur och var dina felpunkter är och bestämma hur du ska åtgärda dessa felpunkter i arkitekturen.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-119">Each of these components could fail, so you have to identify how and where  your failure points are, and determine how to address these failure points in your architecture.</span></span>

## <a name="evaluate-high-availability-for-your-architecture"></a><span data-ttu-id="2bcb0-120">Utvärdera hög tillgänglighet för din arkitektur</span><span class="sxs-lookup"><span data-stu-id="2bcb0-120">Evaluate high availability for your architecture</span></span>

<span data-ttu-id="2bcb0-121">Utvärderingen av ett program för hög tillgänglighet sker i tre steg:</span><span class="sxs-lookup"><span data-stu-id="2bcb0-121">There are three steps to evaluate an application for high availability:</span></span>

1. <span data-ttu-id="2bcb0-122">Fastställa serviceavtalet för ditt program</span><span class="sxs-lookup"><span data-stu-id="2bcb0-122">Determine the service-level agreement of your application</span></span>
1. <span data-ttu-id="2bcb0-123">Utvärdera programmets HA-funktion</span><span class="sxs-lookup"><span data-stu-id="2bcb0-123">Evaluate the HA capabilities of the application</span></span>
1. <span data-ttu-id="2bcb0-124">Utvärdera beroende programs HA-funktion</span><span class="sxs-lookup"><span data-stu-id="2bcb0-124">Evaluate the HA capabilities of dependent applications</span></span>

<span data-ttu-id="2bcb0-125">Vi ska titta lite närmare på stegen.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-125">Let's explore these steps in detail.</span></span>

### <a name="determine-the-service-level-agreement-of-your-application"></a><span data-ttu-id="2bcb0-126">Fastställa serviceavtalet för ditt program</span><span class="sxs-lookup"><span data-stu-id="2bcb0-126">Determine the service-level agreement of your application</span></span>

<span data-ttu-id="2bcb0-127">Ett serviceavtal (SLA) är ett avtal mellan en tjänsteleverantör och en tjänstanvändare där tjänstleverantören förbinder sig till en tjänststandard baserat på mätbara mått och angivna ansvarsområden.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-127">A service-level agreement (SLA) is an agreement between a service provider and a service consumer in which the service provider commits to a standard of service based on measurable metrics and defined responsibilities.</span></span> <span data-ttu-id="2bcb0-128">Serviceavtal kan vara strikta, juridiskt bundna, avtalsenliga avtal eller förutsatta förväntningar på tillgänglighet av kunder.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-128">SLAs can be strict, legally bound, contractual agreements, or assumed expectations of availability by customers.</span></span> <span data-ttu-id="2bcb0-129">Tjänstmått fokuserar vanligen på tjänstens dataflöde, kapacitet och tillgänglighet, vilket alltihop kan mätas på olika sätt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-129">Service metrics typically focus on service throughput, capacity, and availability, all of which can be measured in various ways.</span></span> <span data-ttu-id="2bcb0-130">Oavsett de specifika mätvärdena som utgör serviceavtalet kan underlåtenhet att uppfylla serviceavtalet få allvarliga ekonomiska påföljder för tjänstleverantören.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-130">Regardless of the specific metrics that make up the SLA, failure to meet the SLA can have serious financial ramifications for the service provider.</span></span> <span data-ttu-id="2bcb0-131">En vanlig komponent i serviceavtal är garanterad ekonomisk kompensation om serviceavtalet inte uppfylls.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-131">A common component of service agreements is guaranteed financial reimbursement for missed SLAs.</span></span>

<span data-ttu-id="2bcb0-132">Servicenivåmål är värdena för de målmått som används för att mäta prestanda, tillförlitlighet och tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-132">Service-level objectives (SLO) are the values of target metrics that are used to measure performance, reliability, or availability.</span></span> <span data-ttu-id="2bcb0-133">Detta kan vara mått som definierar prestanda för behandling av begäranden i millisekunder, tillgängligheten för tjänster på bara några minuter per månad eller antalet begäranden som bearbetas per timme.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-133">These could be metrics defining the performance of request processing in milliseconds, the availability of services in minutes per month, or the number of requests processed per hour.</span></span> <span data-ttu-id="2bcb0-134">Du kan definiera de godkända och oacceptabla intervall för dessa enkla utloggningar genom att utvärdera de mått som exponeras av ditt program och förstå vilka kunderna använder som ett mått på kvalitet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-134">By evaluating the metrics exposed by your application and understanding what customers use as a measure of quality, you can define the acceptable and unacceptable ranges for these SLOs.</span></span> <span data-ttu-id="2bcb0-135">Genom att definiera dessa mål kan ange du tydliga mål och förväntningar för båda teamen så att de kan stödja de tjänster och kunder som förbrukar dessa tjänster.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-135">By defining these objectives, you clearly set goals and expectations with both the teams supporting the services and customers who are consuming these services.</span></span> <span data-ttu-id="2bcb0-136">Dessa enkla utloggningar används för att fastställa om ditt övergripande serviceavtal är uppfyllt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-136">These SLOs will be used to determine if your overall SLA is being met.</span></span>

<span data-ttu-id="2bcb0-137">I följande tabell visas den potentiella totala avbrottstiden för olika nivåer i serviceavtalet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-137">The following table shows the potential cumulative downtime for various SLA levels.</span></span> 

| <span data-ttu-id="2bcb0-138">SLA</span><span class="sxs-lookup"><span data-stu-id="2bcb0-138">SLA</span></span> | <span data-ttu-id="2bcb0-139">Nedtid per vecka</span><span class="sxs-lookup"><span data-stu-id="2bcb0-139">Downtime per week</span></span> | <span data-ttu-id="2bcb0-140">Nedtid per månad</span><span class="sxs-lookup"><span data-stu-id="2bcb0-140">Downtime per month</span></span> | <span data-ttu-id="2bcb0-141">Nedtid per år</span><span class="sxs-lookup"><span data-stu-id="2bcb0-141">Downtime per year</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2bcb0-142">99 %</span><span class="sxs-lookup"><span data-stu-id="2bcb0-142">99%</span></span> |<span data-ttu-id="2bcb0-143">1,68 timmar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-143">1.68 hours</span></span> |<span data-ttu-id="2bcb0-144">7,2 timmar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-144">7.2 hours</span></span> |<span data-ttu-id="2bcb0-145">3,65 dagar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-145">3.65 days</span></span> |
| <span data-ttu-id="2bcb0-146">99,9 %</span><span class="sxs-lookup"><span data-stu-id="2bcb0-146">99.9%</span></span> |<span data-ttu-id="2bcb0-147">10,1 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-147">10.1 minutes</span></span> |<span data-ttu-id="2bcb0-148">43,2 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-148">43.2 minutes</span></span> |<span data-ttu-id="2bcb0-149">8,76 timmar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-149">8.76 hours</span></span> |
| <span data-ttu-id="2bcb0-150">99,95 %</span><span class="sxs-lookup"><span data-stu-id="2bcb0-150">99.95%</span></span> |<span data-ttu-id="2bcb0-151">5 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-151">5 minutes</span></span> |<span data-ttu-id="2bcb0-152">21,6 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-152">21.6 minutes</span></span> |<span data-ttu-id="2bcb0-153">4,38 timmar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-153">4.38 hours</span></span> |
| <span data-ttu-id="2bcb0-154">99,99 %</span><span class="sxs-lookup"><span data-stu-id="2bcb0-154">99.99%</span></span> |<span data-ttu-id="2bcb0-155">1,01 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-155">1.01 minutes</span></span> |<span data-ttu-id="2bcb0-156">4,32 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-156">4.32 minutes</span></span> |<span data-ttu-id="2bcb0-157">52,56 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-157">52.56 minutes</span></span> |
| <span data-ttu-id="2bcb0-158">99,999 %</span><span class="sxs-lookup"><span data-stu-id="2bcb0-158">99.999%</span></span> |<span data-ttu-id="2bcb0-159">6 sekunder</span><span class="sxs-lookup"><span data-stu-id="2bcb0-159">6 seconds</span></span> |<span data-ttu-id="2bcb0-160">25,9 sekunder</span><span class="sxs-lookup"><span data-stu-id="2bcb0-160">25.9 seconds</span></span> |<span data-ttu-id="2bcb0-161">5,26 minuter</span><span class="sxs-lookup"><span data-stu-id="2bcb0-161">5.26 minutes</span></span> |

<span data-ttu-id="2bcb0-162">Naturligtvis är en högre tillgänglighet bättre om allt annat är lika.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-162">Of course, higher availability is better, everything else being equal.</span></span> <span data-ttu-id="2bcb0-163">Men i jakten på fler 9:or så ökar kostnaden och komplexiteten med att uppnå den höga tillgängligheten.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-163">But as you strive for more 9s, the cost and complexity to achieve that level of availability grows.</span></span> <span data-ttu-id="2bcb0-164">En drifttid på 99,99 % innebär cirka 5 minuter total nedtid per månad.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-164">An uptime of 99.99% translates to about 5 minutes of total downtime per month.</span></span> <span data-ttu-id="2bcb0-165">Är det värt den extra komplexiteten och kostnaden för att nå fem 9:or?</span><span class="sxs-lookup"><span data-stu-id="2bcb0-165">Is it worth the additional complexity and cost to reach five 9s?</span></span> <span data-ttu-id="2bcb0-166">Svaret beror på affärskraven.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-166">The answer depends on the business requirements.</span></span> 

<span data-ttu-id="2bcb0-167">Här följer några andra saker att tänka på när du definierar ett SLA:</span><span class="sxs-lookup"><span data-stu-id="2bcb0-167">Here are some other considerations when defining an SLA:</span></span>

* <span data-ttu-id="2bcb0-168">För att uppnå fyra 9:or (99,99 %) kan du förmodligen inte förlita dig på manuella åtgärder efter fel.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-168">To achieve four 9's (99.99%), you probably can't rely on manual intervention to recover from failures.</span></span> <span data-ttu-id="2bcb0-169">Programmet måste själv kunna diagnosticera och återställa interna fel.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-169">The application must be self-diagnosing and self-healing.</span></span> 
* <span data-ttu-id="2bcb0-170">Bortom fyra 9:or är det svårt att identifiera avbrott tillräckligt snabbt för att uppfylla serviceavtalet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-170">Beyond four 9's, it is challenging to detect outages quickly enough to meet the SLA.</span></span>
* <span data-ttu-id="2bcb0-171">Tänk på vilket tidsfönster som serviceavtalet mäts mot.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-171">Think about the time window that your SLA is measured against.</span></span> <span data-ttu-id="2bcb0-172">Ju mindre fönster desto snävare tolerans.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-172">The smaller the window, the tighter the tolerances.</span></span> <span data-ttu-id="2bcb0-173">Det är förmodligen inte så bra att definiera serviceavtalet i termer av drifttid per timme eller dag.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-173">It probably doesn't make sense to define your SLA in terms of hourly or daily uptime.</span></span> 

<span data-ttu-id="2bcb0-174">Att identifiera serviceavtal är ett viktigt första steg vid beslut om vilka funktioner med hög tillgänglighet som din arkitektur kräver.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-174">Identifying SLAs is an important first step when determining the high availability capabilities that your architecture will require.</span></span> <span data-ttu-id="2bcb0-175">De hjälper till att utforma metoderna du ska använda för att göra programmet mer tillgängligt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-175">These will help shape the methods you'll use to make your application highly available.</span></span>

### <a name="evaluate-the-ha-capabilities-of-the-application"></a><span data-ttu-id="2bcb0-176">Utvärdera programmets HA-funktion</span><span class="sxs-lookup"><span data-stu-id="2bcb0-176">Evaluate the HA capabilities of the application</span></span>

<span data-ttu-id="2bcb0-177">Om du vill utvärdera funktionerna för hög tillgänglighet i ditt program utför du en felanalys.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-177">To evaluate the HA capabilities of your application, perform a failure analysis.</span></span> <span data-ttu-id="2bcb0-178">Fokusera på felkritiska systemdelar och kritiska komponenter som kan ha en stor inverkan på programmet om de inte nås, är felkonfigurerade eller börjar bete sig oväntat.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-178">Focus on single points of failure and critical components that would have a large impact on the application if they were unreachable, misconfigured, or started behaving unexpectedly.</span></span> <span data-ttu-id="2bcb0-179">För områden som har redundans ska du fastställa om programmet kan identifiera feltillstånd och självåterställning.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-179">For areas that do have redundancy, determine whether the application is capable of detecting error conditions and self-healing.</span></span>

<span data-ttu-id="2bcb0-180">Du måste noggrant utvärdera alla komponenter i programmet, däribland delarna som är utformade för att tillhandahålla funktioner för hög tillgänglighet, som lastbalanserare.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-180">You'll need to carefully evaluate all components of your application, including the pieces designed to provide HA functionality, such as load balancers.</span></span> <span data-ttu-id="2bcb0-181">Felkritiska systemdelar måste antingen ändras för att få inbyggda funktioner för hög tillgänglighet eller ersättas med tjänster som kan erbjuda detta.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-181">Single points of failure will either need to be modified to have HA capabilities integrated, or will need to be replaced with services that can provide HA capabilities.</span></span>

### <a name="evaluate-the-ha-capabilities-of-dependent-applications"></a><span data-ttu-id="2bcb0-182">Utvärdera beroende programs HA-funktion</span><span class="sxs-lookup"><span data-stu-id="2bcb0-182">Evaluate the HA capabilities of dependent applications</span></span>

<span data-ttu-id="2bcb0-183">Du måste inte enbart förstå ditt programs serviceavtalskrav på konsumenten, utan även serviceavtalen som tillhandahålls av en resurs som ditt program kan bygga på.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-183">You'll need to understand not only your application's SLA requirements to your consumer, but also the provided SLAs of any resource that your application may depend on.</span></span> <span data-ttu-id="2bcb0-184">Om du lovar kunderna en drifttid på 99,9 procent, men en tjänst som ditt program är beroende av endast har en upptidsöverenskommelse på 99 procent, kan det innebära att du riskerar att inte uppfylla ditt servicenivåavtal till kunderna.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-184">If you are committing an uptime to your customers of 99.9%, but a service your application depends on only has an uptime commitment of 99%, this could put you at risk of not meeting your SLA to your customers.</span></span> <span data-ttu-id="2bcb0-185">Om en beroende tjänst inte har ett tillräckligt serviceavtal kan du behöva ändra dina egna serviceavtal, ersätta beroendet med ett alternativ eller hitta sätt att uppfylla serviceavtalet medan beroendet är otillgängligt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-185">If a dependent service is unable to provide a sufficient SLA, you may need to modify your own SLA, replace the dependency with an alternative, or find ways to meet your SLA while the dependency is unavailable.</span></span> <span data-ttu-id="2bcb0-186">Beroende på scenariot och typ av beroende kan beroenden som misslyckas lösas tillfälligt med lösningar som cacheminnen och arbetsköer.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-186">Depending on the scenario and the nature of the dependency, failing dependencies can be temporarily worked around with solutions like caches and work queues.</span></span>

## <a name="azures-highly-available-platform"></a><span data-ttu-id="2bcb0-187">Azures plattform med hög tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="2bcb0-187">Azure's highly available platform</span></span>

<span data-ttu-id="2bcb0-188">Azure-molnplattformen har utformats för att tillhandahålla hög tillgänglighet i alla tjänster.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-188">The Azure cloud platform has been designed to provide high availability throughout all its services.</span></span> <span data-ttu-id="2bcb0-189">Programmen kan påverkas av händelser för både maskinvaru- och programvaruplattformar precis som i alla andra system.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-189">Like any system, applications may be affected by both hardware and software platform events.</span></span> <span data-ttu-id="2bcb0-190">Behovet av att utforma din programarkitektur för att hantera fel är viktigt, och Azure-molnplattformen ger dig verktyg och funktioner som ger ditt program hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-190">The need to design your application architecture to handle failures is critical, and the Azure cloud platform provides you with the tools and capabilities to make your application highly available.</span></span> <span data-ttu-id="2bcb0-191">Det finns flera grundläggande begrepp när du överväger hög tillgänglighet för din arkitektur på Azure:</span><span class="sxs-lookup"><span data-stu-id="2bcb0-191">There are several core concepts when considering HA for your architecture on Azure:</span></span>

* <span data-ttu-id="2bcb0-192">Tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-192">Availability sets</span></span>
* <span data-ttu-id="2bcb0-193">Tillgänglighetszoner</span><span class="sxs-lookup"><span data-stu-id="2bcb0-193">Availability zones</span></span>
* <span data-ttu-id="2bcb0-194">Belastningsutjämning</span><span class="sxs-lookup"><span data-stu-id="2bcb0-194">Load balancing</span></span>
* <span data-ttu-id="2bcb0-195">PaaS HA-funktioner (Platform as a Service)</span><span class="sxs-lookup"><span data-stu-id="2bcb0-195">Platform as a service (PaaS) HA capabilities</span></span>

### <a name="availability-sets"></a><span data-ttu-id="2bcb0-196">Tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="2bcb0-196">Availability sets</span></span>

<span data-ttu-id="2bcb0-197">Tillgänglighetsuppsättningar är ett sätt för dig att informera virtuella Azure-datorer om att virtuella datorer som tillhör samma programbelastning ska distribueras för att förhindra samtidig påverkan från maskinvarufel och schemalagt underhåll.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-197">Availability sets are a way for you to inform Azure that VMs that belong to the same application workload should be distributed to prevent simultaneous impact from hardware failure and scheduled maintenance.</span></span> <span data-ttu-id="2bcb0-198">Tillgänglighetsuppsättningar består av *uppdateringsdomäner* och *feldomäner*.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-198">Availability sets are made up of *update domains* and *fault domains*.</span></span>

![En bild som visar tre tillgänglighetsuppsättningar.](../media/AzAvailSets.png)

<span data-ttu-id="2bcb0-201">Uppdateringsdomäner ser till att en delmängd av programmets servrar alltid körs när den virtuella datorn finns i ett Azure-datacenter som kräver driftstopp vid underhåll.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-201">Update domains ensure that a subset of your application's servers always remain running when the virtual machine hosts in an Azure datacenter require downtime for maintenance.</span></span> <span data-ttu-id="2bcb0-202">De flesta uppdateringarna kan utföras utan att påverka till de virtuella datorerna som körs på dem, men det finns tillfällen när det inte är möjligt.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-202">Most updates can be performed with no impact to the VMs running on them, but there are times when this isn't possible.</span></span> <span data-ttu-id="2bcb0-203">För att se till att uppdateringar inte sker för ett helt datacenter i taget delas Azure-datacentret upp logiskt i uppdateringsdomäner (UD).</span><span class="sxs-lookup"><span data-stu-id="2bcb0-203">To ensure that updates don't happen to a whole datacenter at once, the Azure datacenter is logically sectioned into update domains (UD).</span></span> <span data-ttu-id="2bcb0-204">När en underhållshändelse som en prestandauppdatering sker och en viktig säkerhetskorrigering krävs som ska tillämpas på värden sekventeras uppdateringen via uppdateringsdomäner.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-204">When a maintenance event, such as a performance update and critical security patch that needs to be applied to the host, the update is sequenced through update domains.</span></span> <span data-ttu-id="2bcb0-205">Användningen av sekvensering av uppdateringar med uppdateringsdomäner ser till att hela datacentrat inte blir otillgängligt under plattformsuppdateringar och -korrigeringar.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-205">The use of sequencing updates using update domains ensures that the whole datacenter isn't unavailable during platform updates and patching.</span></span>

<span data-ttu-id="2bcb0-206">Medan uppdateringsdomäner representerar en logisk del av datacentret representerar feldomäner (FD) fysiska avsnitt av datacentret och garanterar en mångfald av rack för servrar i en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-206">While update domains represent a logical section of the datacenter, fault domains (FD) represent physical sections of the datacenter and ensure rack diversity of servers in an availability set.</span></span> <span data-ttu-id="2bcb0-207">Feldomäner justeras till den fysiska separationen av delad maskinvara i datacentret.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-207">Fault domains align to the physical separation of shared hardware in the datacenter.</span></span> <span data-ttu-id="2bcb0-208">Det inkluderar kraft, kylning och nätverksmaskinvara som stöder fysiska servrar som finns i serverrack.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-208">This includes power, cooling, and network hardware that supports the physical servers located in server racks.</span></span> <span data-ttu-id="2bcb0-209">Om maskinvara som stöder ett serverrack har blivit otillgänglig påverkas endast det här serverracket av felet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-209">In the event the hardware that supports a server rack has become unavailable, only that rack of servers would be affected by the outage.</span></span> <span data-ttu-id="2bcb0-210">Genom att placera dina virtuella datorer i en tillgänglighetsuppsättning, sprids dina virtuella datorer automatiskt över flera feldomäner så att endast en del av de virtuella datorerna påverkas om ett maskinvarufel skulle uppstå, något som dock sällan inträffar.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-210">By placing your VMs in an availability set, your VMs will be automatically spread across multiple FDs so that in the event of a hardware failure only part of your VMs will be impacted.</span></span>

<span data-ttu-id="2bcb0-211">Med tillgänglighetsuppsättningar kan du se till att programmet fortsätter att vara online om en händelse med stor inverkan krävs eller om ett maskinvarufel uppstår.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-211">With availability sets, you can ensure your application remains online if a high-impact maintenance event is required or hardware failures occur.</span></span>

### <a name="availability-zones"></a><span data-ttu-id="2bcb0-212">Tillgänglighetszoner</span><span class="sxs-lookup"><span data-stu-id="2bcb0-212">Availability zones</span></span>

<span data-ttu-id="2bcb0-213">Tillgänglighetszoner är oberoende fysiska datacenterplatser inom en region som har egen kraft, kylning och nätverkstjänster.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-213">Availability zones are independent physical datacenter locations within a region that include their own power, cooling, and networking.</span></span> <span data-ttu-id="2bcb0-214">Om du tar hänsyn till tillgänglighetszoner när du distribuerar resurser kan du skydda arbetsbelastningar mot datacenteravbrott och behålla närvaron i en viss region.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-214">By taking availability zones into account when deploying resources, you can protect workloads from datacenter outages while retaining presence in a particular region.</span></span> <span data-ttu-id="2bcb0-215">Tjänster som virtuella datorer är *zonindelade*, vilket gör att du kan distribuera dem till to specifika zoner inom en region.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-215">Services like virtual machines are *zonal services* and allow you to deploy them to specific zones within a region.</span></span> <span data-ttu-id="2bcb0-216">Andra tjänster är *zonredundanta* och replikeras mellan tillgänglighetszoner i den specifika Azure-regionen.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-216">Other services are *zone-redundant services* and will replicate across the availability zones in the specific Azure region.</span></span> <span data-ttu-id="2bcb0-217">Båda typerna ser till att det inte finns några felkritiska systemdelar inom en Azure-region.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-217">Both types ensure that within an Azure region there are no single points of failure.</span></span>

![En bild som visar tre tillgänglighetszoner inom en Azure-region.](../media/AzAvailZones.png)

<span data-ttu-id="2bcb0-220">Regioner som stöds innehåller minst tre tillgänglighetszoner.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-220">Supported regions contain a minimum of three availability zones.</span></span> <span data-ttu-id="2bcb0-221">När du skapar zonindelade resurser i de här regionerna har du möjlighet att välja zonen där resursen ska skapas.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-221">When creating zonal service resources in those regions, you'll have the ability to select the zone in which the resource should be created.</span></span> <span data-ttu-id="2bcb0-222">På så sätt kan du utforma ditt program så att det kan hantera ett zonindelat avbrott och fortsätta att fungera i en Azure-region innan du måste evakuera programmet till en annan Azure-region.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-222">This will allow you to design your application to withstand a zonal outage and continue to operate in an Azure region before having to evacuate your application to another Azure region.</span></span>

<span data-ttu-id="2bcb0-223">Tillgänglighetszoner är en nyare konfigurationstjänst för hög tillgänglighet för Azure-regioner och är tillgängliga för vissa regioner.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-223">Availability zones are a newer high availability configuration service for Azure regions and are currently available for certain regions.</span></span> <span data-ttu-id="2bcb0-224">Det är viktigt att kontrollera tillgängligheten för den här tjänsten i regionen där du tänker distribuera ditt program om du vill överväga den här funktionen.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-224">It's important to check the availability of this service in the region that you're planning to deploy your application if you want to consider this functionality.</span></span> <span data-ttu-id="2bcb0-225">Tillgänglighetszoner stöds när man använder virtuella datorer och flera PaaS-tjänster.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-225">Availability zones are supported when using virtual machines, as well as several PaaS services.</span></span> <span data-ttu-id="2bcb0-226">Tillgänglighetszoner är ömsesidigt uteslutande med tillgänglighetsuppsättningar.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-226">Availability zones are mutually exclusive with availability sets.</span></span> <span data-ttu-id="2bcb0-227">När du använder tillgänglighetszoner behöver du inte längre definiera någon tillgänglighetsuppsättning för dina system.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-227">When using availability zones you no longer need to define an availability set for your systems.</span></span> <span data-ttu-id="2bcb0-228">Du kommer att ha mångfald på datacenternivå och uppdateringarna kommer aldrig att föras ut till flera tillgänglighetszoner på samma gång.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-228">You'll have diversity at the data center level, and updates will never be performed to multiple availability zones at the same time.</span></span>

### <a name="load-balancing"></a><span data-ttu-id="2bcb0-229">Belastningsutjämning</span><span class="sxs-lookup"><span data-stu-id="2bcb0-229">Load balancing</span></span>

<span data-ttu-id="2bcb0-230">Belastningsutjämnare hanterar hur nätverkstrafiken distribueras i ett program.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-230">Load balancers manage how network traffic is distributed across an application.</span></span> <span data-ttu-id="2bcb0-231">Lastbalanserare är viktiga för att hålla programmet motståndskraftigt mot enskilda komponentfel och se till att programmet är tillgängligt för att bearbeta begäranden.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-231">Load balancers are essential in keeping your application resilient to individual component failures and to ensure your application is available to process requests.</span></span> <span data-ttu-id="2bcb0-232">För program som inte har inbyggd tjänstidentifiering krävs belastningsutjämning för både tillgänglighetsuppsättningar och tillgänglighetszoner.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-232">For applications that don't have service discovery built in, load balancing is required for both availability sets and availability zones.</span></span>

<span data-ttu-id="2bcb0-233">Azure har tre tjänster för belastningsutjämning som skiljer sig åt i hur de dirigerar nätverkstrafik:</span><span class="sxs-lookup"><span data-stu-id="2bcb0-233">Azure possesses three load balancing technology services that are distinct in their abilities to route network traffic:</span></span>

* <span data-ttu-id="2bcb0-234">**Azure Traffic Manager** erbjuder global DNS-belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-234">**Azure Traffic Manager** provides global DNS load balancing.</span></span> <span data-ttu-id="2bcb0-235">Du bör överväga att använda Traffic Manager för att erbjuda belastningsutjämning av DNS-slutpunkter i eller mellan Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-235">You would consider using Traffic Manager to provide load balancing of DNS endpoints within or across Azure regions.</span></span> <span data-ttu-id="2bcb0-236">Trafikhanteraren kommer att distribuera begäranden till tillgängliga slutpunkter och använda slutpunktsövervakning för att identifiera och ta bort misslyckade slutpunkter från arbetsbelastningen.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-236">Traffic manager will distribute requests to available endpoints, and use endpoint monitoring to detect and remove failed endpoints from load.</span></span>
* <span data-ttu-id="2bcb0-237">**Azure Application Gateway** tillhandahåller Layer 7-belastningsutjämningsfunktioner, till exempel resursallokeringsdistribution av inkommande trafik, cookiebaserad sessionstillhörighet, URL-sökvägsbaserad routning och möjligheten att vara värd för flera webbplatser bakom en enda Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-237">**Azure Application Gateway** provides Layer 7 load-balancing capabilities, such as round-robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single application gateway.</span></span> <span data-ttu-id="2bcb0-238">Som standard övervakar Application Gateway hälsotillståndet för alla resurser i dess serverdelpool och tar automatiskt bort alla resurser som anses felaktiga från poolen.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-238">Application Gateway by default monitors the health of all resources in its back-end pool and automatically removes any resource considered unhealthy from the pool.</span></span> <span data-ttu-id="2bcb0-239">Application Gateway fortsätter att övervaka de felaktiga instanserna och lägger till dem i den felfria serverdelpoolen när de är tillgängliga och svarar på hälsokontroller.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-239">Application Gateway continues to monitor the unhealthy instances and adds them back to the healthy back-end pool once they become available and respond to health probes.</span></span>
* <span data-ttu-id="2bcb0-240">**Azure Load Balancer** är en Layer 4-lastbalanserare.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-240">**Azure Load Balancer** is a layer 4 load balancer.</span></span> <span data-ttu-id="2bcb0-241">Du kan konfigurera offentliga och interna belastningsutjämnade slutpunkter och definiera regler för att mappa inkommande anslutningar till serverdelspooldestinationer med TCP- och HTTP-avsökningsalternativ för att hantera tjänstens tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-241">You can configure public and internal load-balanced endpoints and define rules to map inbound connections to back-end pool destinations by using TCP and HTTP health-probing options to manage service availability.</span></span>

<span data-ttu-id="2bcb0-242">Med en eller en kombination av alla tre teknikerna för Azure-belastningsutjämning får du de tillgängliga alternativ som krävs för att skapa en lösning med hög tillgänglighet för att dirigera nätverkstrafik i programmet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-242">One or a combination of all three Azure load-balancing technologies can ensure you have the necessary options available to architect a highly available solution to route network traffic through your application.</span></span>

![Alternativ för belastningsutjämning i Azure. En illustration som visar de olika belastningsutjämningsteknikerna i Azure.](../media/AzLBOptions.png)

### <a name="paas-ha-capabilities"></a><span data-ttu-id="2bcb0-248">PaaS HA-funktioner</span><span class="sxs-lookup"><span data-stu-id="2bcb0-248">PaaS HA capabilities</span></span>

<span data-ttu-id="2bcb0-249">PaaS-tjänster levereras med inbyggd hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-249">PaaS services come with high availability built in.</span></span> <span data-ttu-id="2bcb0-250">Tjänster som Azure SQL Database, Azure App Service och Azure Service Bus innefattar funktioner för hög tillgänglighet och garanterar att fel på en enskild komponent av tjänsten inte blir märkbara i programmet.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-250">Services such as Azure SQL Database, Azure App Service, and Azure Service Bus include high availability features and ensure that failures of an individual component of the service will be seamless to your application.</span></span> <span data-ttu-id="2bcb0-251">Ett av de bästa sätten att se till att din arkitektur har hög tillgänglighet är att använda PaaS-tjänster.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-251">Using PaaS services is one of the best ways to ensure that your architecture is highly available.</span></span>

<span data-ttu-id="2bcb0-252">När du bygger för hög tillgänglighet behöver du förstå serviceavtalet du upprättar med dina kunder.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-252">When architecting for high availability, you'll want to understand the SLA that you're committing to your customers.</span></span> <span data-ttu-id="2bcb0-253">Utvärdera sedan både HA-funktionerna som programmet har och HA-funktionerna och serviceavtalen för beroende system.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-253">Then evaluate both the HA capabilities that your application has, and the HA capabilities and SLAs of dependent systems.</span></span> <span data-ttu-id="2bcb0-254">När de har upprättats kan du använda Azure-funktioner som tillgänglighetsuppsättningar, tillgänglighetszoner och olika tekniker för belastningsutjämning för att lägga till HA-funktioner i ditt program.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-254">After those have been established, use Azure features, such as availability sets, availability zones, and various load-balancing technologies, to add HA capabilities to your application.</span></span> <span data-ttu-id="2bcb0-255">Oavsett vilka PaaS-tjänster du väljer att använda har de inbyggda HA-funktioner.</span><span class="sxs-lookup"><span data-stu-id="2bcb0-255">Any PaaS services you should choose to use will have HA capabilities built in.</span></span>
