<span data-ttu-id="cda9e-101">Lamna Healthcare hade nyligen ett allvarligt avbrott i en kundinriktad webbapp.</span><span class="sxs-lookup"><span data-stu-id="cda9e-101">Lamna Healthcare recently experienced a significant outage to a customer-facing web application.</span></span> <span data-ttu-id="cda9e-102">En tekniker hade beviljats fullständig åtkomst till en resursgrupp som innehöll själva produktionswebbprogrammet.</span><span class="sxs-lookup"><span data-stu-id="cda9e-102">An engineer was granted full access to a resource group containing the production web application.</span></span> <span data-ttu-id="cda9e-103">Teknikern råkade av misstag ta bort hela resursgruppen och alla underordnade resurser, inklusive databasen med alla kunddata.</span><span class="sxs-lookup"><span data-stu-id="cda9e-103">This person accidentally deleted the resource group and all child resources, including the database hosting live customer data.</span></span> 

<span data-ttu-id="cda9e-104">Lyckligtvis var programmets källkod och resurser tillgängliga i källkontrollen och regelbundna säkerhetskopieringar kördes automatiskt enligt ett schema.</span><span class="sxs-lookup"><span data-stu-id="cda9e-104">Fortunately, the application source code and resources were available in source control and regular database backups were running automatically on a schedule.</span></span> <span data-ttu-id="cda9e-105">Tjänsten kunde därför återställas relativt enkelt.</span><span class="sxs-lookup"><span data-stu-id="cda9e-105">Therefore the service was reinstated relatively easily.</span></span> <span data-ttu-id="cda9e-106">Här ska vi utforska hur det här avbrottet hade kunnat undvikas med hjälp av funktioner i Azure som skyddar åtkomsten till infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="cda9e-106">Here, we will explore how this outage could have been avoided by utilizing capabilities on Azure to protect the access to infrastructure.</span></span>

## <a name="criticality-of-infrastructure"></a><span data-ttu-id="cda9e-107">Den viktiga infrastrukturen</span><span class="sxs-lookup"><span data-stu-id="cda9e-107">Criticality of infrastructure</span></span>

<span data-ttu-id="cda9e-108">Molninfrastrukturen blir en allt viktigare komponent på många företag.</span><span class="sxs-lookup"><span data-stu-id="cda9e-108">Cloud infrastructure is becoming a critical piece of many businesses.</span></span> <span data-ttu-id="cda9e-109">Det är viktigt att användare och processer endast beviljas de behörigheter som de behöver för att utföra sina jobb.</span><span class="sxs-lookup"><span data-stu-id="cda9e-109">It is critical to ensure people and processes have only the rights they need to get their job done.</span></span> <span data-ttu-id="cda9e-110">Om fel åtkomst beviljas kan det resultera i dataförlust, dataläckage eller att tjänster blir otillgängliga.</span><span class="sxs-lookup"><span data-stu-id="cda9e-110">Assigning incorrect access can result in data loss, data leakage, or cause services to become unavailable.</span></span> 

<span data-ttu-id="cda9e-111">Systemadministratörer kan ansvara för ett stort antal användare, system och behörighetsuppsättningar.</span><span class="sxs-lookup"><span data-stu-id="cda9e-111">System administrators can be responsible for a large number of users, systems, and permission sets.</span></span> <span data-ttu-id="cda9e-112">Därför kan det snabbt bli svårt att bevilja åtkomst på ett optimalt sätt, vilket ofta resulterar i en alltför generell standardtillämpning.</span><span class="sxs-lookup"><span data-stu-id="cda9e-112">So correctly granting access can quickly become unmanageable and can lead to a 'one size fits all' approach.</span></span> <span data-ttu-id="cda9e-113">Den här metoden kan visserligen förenkla administrationen, men gör det betydligt lättare att oavsiktligt bevilja mer omfattande behörigheter än vad som egentligen krävs.</span><span class="sxs-lookup"><span data-stu-id="cda9e-113">This approach can reduce the complexity of administration, but makes it far easier to inadvertently grant more permissive access than required.</span></span>

## <a name="role-based-access-control"></a><span data-ttu-id="cda9e-114">Rollbaserad åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="cda9e-114">Role-based access control</span></span>

<span data-ttu-id="cda9e-115">Rollbaserad åtkomstkontroll (RBAC) fungerar på ett lite annorlunda sätt.</span><span class="sxs-lookup"><span data-stu-id="cda9e-115">Role-based access control (RBAC) offers a slightly different approach.</span></span> <span data-ttu-id="cda9e-116">Roller definieras som samlingar med åtkomstbehörigheter.</span><span class="sxs-lookup"><span data-stu-id="cda9e-116">Roles are defined as collections of access permissions.</span></span> <span data-ttu-id="cda9e-117">Säkerhetsobjekt mappas till roller direkt eller via gruppmedlemskap.</span><span class="sxs-lookup"><span data-stu-id="cda9e-117">Security principals are mapped to roles directly or through group membership.</span></span> <span data-ttu-id="cda9e-118">Genom att säkerhetsobjekt, åtkomstbehörigheter och resurser hålls åtskilda blir det enklare att hantera och kontrollera åtkomsten.</span><span class="sxs-lookup"><span data-stu-id="cda9e-118">Separating security principals, access permissions, and resources provides simplified access management and more fine-grained control.</span></span>

<span data-ttu-id="cda9e-119">I Azure lagras användare, grupper och roller i Azure Active Directory (AD Azure).</span><span class="sxs-lookup"><span data-stu-id="cda9e-119">On Azure, users, groups, and roles are all stored in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="cda9e-120">Azure Resource Manager-API:et använder rollbaserad åtkomstkontroll för att skydda all åtkomsthantering för resurser i Azure.</span><span class="sxs-lookup"><span data-stu-id="cda9e-120">The Azure Resource Manager API uses role-based access control to secure all resource access management within Azure.</span></span>

![En bild som visar implementeringen av en rollbaserad åtkomstkontroll.](../media/ACL_Based_Access.png)

<!-- ![Role-based access control](../media/Role_Based_Access.png)
 -->

### <a name="roles-and-management-groups"></a><span data-ttu-id="cda9e-122">Roller och hanteringsgrupper</span><span class="sxs-lookup"><span data-stu-id="cda9e-122">Roles and management groups</span></span>

<span data-ttu-id="cda9e-123">Roller är uppsättningar med behörigheter, t.ex. ”Skrivskyddad” eller ”Deltagare”, som användare kan beviljas för att få åtkomst till en Azure-tjänstinstans.</span><span class="sxs-lookup"><span data-stu-id="cda9e-123">Roles are sets of permissions, like "Read-only" or "Contributor", that users can be granted to access an Azure service instance.</span></span> <span data-ttu-id="cda9e-124">Roller kan tilldelas på nivån för en enskild tjänstinstans eller spridas nedåt i Azure Resource Manager-hierarkin.</span><span class="sxs-lookup"><span data-stu-id="cda9e-124">Roles can be granted at the individual service instance level, but they also flow down the Azure Resource Manager hierarchy.</span></span> <span data-ttu-id="cda9e-125">Roller som har tilldelats i en högre omfattning, t.ex. en hel prenumeration, ärvs av underordnade områden, t.ex. tjänstinstanser.</span><span class="sxs-lookup"><span data-stu-id="cda9e-125">Roles assigned at a higher scope, like an entire subscription, are inherited by child scopes, like service instances.</span></span> 

<span data-ttu-id="cda9e-126">Hanteringsgrupper är en ytterligare hierarkisk nivå som nyligen introducerades i RBAC-modellen.</span><span class="sxs-lookup"><span data-stu-id="cda9e-126">Management groups are an additional hierarchical level recently introduced into the RBAC model.</span></span> <span data-ttu-id="cda9e-127">Hanteringsgrupper gör det möjligt att gruppera prenumerationer och att tillämpa principen på en ännu högre nivå.</span><span class="sxs-lookup"><span data-stu-id="cda9e-127">Management groups add the ability to group subscriptions together and apply policy at an even higher level.</span></span>

<span data-ttu-id="cda9e-128">Möjligheten att sprida roller via en godtyckligt definierad prenumerationshierarki gör dessutom att administratörer kan bevilja tillfällig åtkomst till en hel miljö för autentiserade användare.</span><span class="sxs-lookup"><span data-stu-id="cda9e-128">The ability to flow roles through an arbitrarily defined subscription hierarchy also allows administrators to grant temporary access to an entire environment for authenticated users.</span></span> <span data-ttu-id="cda9e-129">En granskare kan exempelvis behöva tillfällig skrivskyddad åtkomst till alla prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="cda9e-129">For example, an auditor may require temporary read-only access to all subscriptions.</span></span>

![En illustration som visar den hierarkiska representationen av rollbaserad åtkomst i en hanteringsgrupp.](../media/management_groups.png)

### <a name="privileged-identity-management"></a><span data-ttu-id="cda9e-131">Privileged Identity Management</span><span class="sxs-lookup"><span data-stu-id="cda9e-131">Privileged Identity Management</span></span>

<span data-ttu-id="cda9e-132">Förutom att hantera åtkomsten till Azure-resurser med RBAC, bör en heltäckande säkerhetsstrategi för infrastrukturen omfatta regelbunden granskning av rollmedlemmar allt eftersom organisationen förändras och utvecklas.</span><span class="sxs-lookup"><span data-stu-id="cda9e-132">In addition to managing Azure resource access with RBAC, a comprehensive approach to infrastructure protection should consider including the ongoing auditing of role members as their organization changes and evolves.</span></span> <span data-ttu-id="cda9e-133">Betaltjänsten Azure AD Privileged Identity Management (PIM) hjälper dig att övervaka rolltilldelningar, självbetjäning och JIT-rollaktivering (Just-In-Time) och innehåller även funktioner för att granska åtkomsten till Azure AD-resurser.</span><span class="sxs-lookup"><span data-stu-id="cda9e-133">Azure AD Privileged Identity Management (PIM) is an additional paid-for offering that provides oversight of role assignments, self-service, and just-in-time role activation and Azure AD & Azure resource access reviews.</span></span>

![Skärmbild av Privileged Identity Management-instrumentpanelen](../media/PIM_Dashboard.png)

## <a name="providing-identities-to-services"></a><span data-ttu-id="cda9e-135">Tilldela tjänster identiteter</span><span class="sxs-lookup"><span data-stu-id="cda9e-135">Providing identities to services</span></span>

<span data-ttu-id="cda9e-136">Det är ofta bra att tilldela identiteter till tjänster.</span><span class="sxs-lookup"><span data-stu-id="cda9e-136">It's often valuable for services to have identities.</span></span> <span data-ttu-id="cda9e-137">Ofta, och i strid med bästa praxis, bäddas autentiseringsuppgifter in i konfigurationsfiler.</span><span class="sxs-lookup"><span data-stu-id="cda9e-137">Often times, and against best practices, credential information is embedded in configuration files.</span></span> <span data-ttu-id="cda9e-138">Om dessa konfigurationsfiler inte skyddas kan vem som helst med åtkomst till systemen eller lagringsplatserna komma åt dessa uppgifter eller öka risken för att de exponeras.</span><span class="sxs-lookup"><span data-stu-id="cda9e-138">With no security around these configuration files, anyone with access to the systems or repositories can access these credentials and risk exposure.</span></span>

<span data-ttu-id="cda9e-139">Azure AD löser det här problemet med hjälp av två metoder: tjänstens huvudnamn och hanterade identiteter för Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="cda9e-139">Azure AD addresses this problem through two methods: service principals and managed identities for Azure services.</span></span>

### <a name="service-principals"></a><span data-ttu-id="cda9e-140">Tjänstens huvudnamn</span><span class="sxs-lookup"><span data-stu-id="cda9e-140">Service principals</span></span>

<span data-ttu-id="cda9e-141">För att förstå vad tjänstens huvudnamn är, måste du först förstå vad orden **identitet** och **huvudnamn** betyder när de används inom identitetshantering.</span><span class="sxs-lookup"><span data-stu-id="cda9e-141">To understand service principals, it's useful to first understand the words **identity** and **principal** as they are used in Identity management world.</span></span>

<span data-ttu-id="cda9e-142">En **identitet** är helt enkelt något som kan autentiseras.</span><span class="sxs-lookup"><span data-stu-id="cda9e-142">An **identity** is just a thing that can be authenticated.</span></span> <span data-ttu-id="cda9e-143">Exempel på detta är användare med användarnamn och lösenord, men det kan även vara program eller andra servrar, som kan autentiseras med hemliga nycklar eller certifikat.</span><span class="sxs-lookup"><span data-stu-id="cda9e-143">Obviously this includes users with username and password, but it can also include applications or other servers, which might authenticate with secret keys or certificates.</span></span> <span data-ttu-id="cda9e-144">Det kan även vara bra att veta att ett **konto** är data som är associerade med en identitet.</span><span class="sxs-lookup"><span data-stu-id="cda9e-144">As a bonus definition, an **account** is data associated with an identity.</span></span>

<span data-ttu-id="cda9e-145">Ett **huvudnamn** är en identitet som fungerar med vissa roller eller anspråk.</span><span class="sxs-lookup"><span data-stu-id="cda9e-145">A **principal** is an identity acting with certain roles or claims.</span></span> <span data-ttu-id="cda9e-146">Överväg att använda sudo i en bash-kommandotolk eller Windows med hjälp av kör som administratör.</span><span class="sxs-lookup"><span data-stu-id="cda9e-146">Consider the use 'sudo' on a bash prompt or on Windows using "run as Administrator".</span></span> <span data-ttu-id="cda9e-147">I båda dessa fall är du fortfarande inloggad som samma identitet som innan, men du har ändrat rollen som du kör under.</span><span class="sxs-lookup"><span data-stu-id="cda9e-147">In both of those cases, you are still logged in as the same identity as before, but you've changed the role under which you are executing.</span></span>

<span data-ttu-id="cda9e-148">**Tjänstens huvudnamn** namnges alltså rent bokstavligen.</span><span class="sxs-lookup"><span data-stu-id="cda9e-148">So a **Service Principal** is literally named.</span></span> <span data-ttu-id="cda9e-149">Det här är en identitet som används av en tjänst eller ett program.</span><span class="sxs-lookup"><span data-stu-id="cda9e-149">It is an identity that is used by a service or application.</span></span> <span data-ttu-id="cda9e-150">Precis som andra identiteter kan den tilldelas roller.</span><span class="sxs-lookup"><span data-stu-id="cda9e-150">Like other identities, it can be assigned roles.</span></span> 

<span data-ttu-id="cda9e-151">Lamna Healthcare kan till exempel tilldela sina distributionsskript så att de körs autentiserade som ett huvudnamn för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="cda9e-151">For example, Lamna Healthcare can assign its deployment scripts to run authenticated as a service principal.</span></span> <span data-ttu-id="cda9e-152">Om det här är den enda identiteten som har behörighet att utföra skadliga åtgärder, är Lamna en bra bit på väg att förhindra att företagets data raderas av misstag igen.</span><span class="sxs-lookup"><span data-stu-id="cda9e-152">If that is the only identity that has permission to perform destructive actions, Lamna will have gone a long way toward making sure they don't have a repeat of the accidental resource deletion.</span></span>

### <a name="managed-identities-for-azure-resources"></a><span data-ttu-id="cda9e-153">Hanterade identiteter för Azure-resurser</span><span class="sxs-lookup"><span data-stu-id="cda9e-153">Managed identities for Azure resources</span></span>

<span data-ttu-id="cda9e-154">Det kan vara tidskrävande att skapa tjänstens huvudnamn och det finns många kontaktpunkter, vilket ofta gör det svårt att underhålla dem.</span><span class="sxs-lookup"><span data-stu-id="cda9e-154">The creation of service principals can be a tedious process, and there are a lot of touch points that can make maintaining them difficult.</span></span> <span data-ttu-id="cda9e-155">Hanterade identiteter för Azure-resurser är enklare och tar hand om merparten av arbetet åt dig.</span><span class="sxs-lookup"><span data-stu-id="cda9e-155">Manage identities for Azure resources are much easier and will do most of the work for you.</span></span>

<span data-ttu-id="cda9e-156">En hanterad identitet kan skapas direkt för valfri Azure-tjänst som stöder det (listan växer hela tiden).</span><span class="sxs-lookup"><span data-stu-id="cda9e-156">A managed identity can be instantly created for any Azure service that supports it (the list is constantly growing).</span></span> <span data-ttu-id="cda9e-157">När du skapar en hanterad identitet för en tjänst, skapar du ett konto i Azure AD-klientorganisationen.</span><span class="sxs-lookup"><span data-stu-id="cda9e-157">When you create a managed identity for a service, you are creating an account on the Azure AD tenant.</span></span> <span data-ttu-id="cda9e-158">Azure-infrastrukturen tar automatiskt hand om autentiseringen av tjänsten och hanteringen av kontot.</span><span class="sxs-lookup"><span data-stu-id="cda9e-158">Azure infrastructure will automatically take care of authenticating the service and managing the account.</span></span> <span data-ttu-id="cda9e-159">Du kan sedan använda det kontot på samma sätt som andra AD-konton, och på ett säkert sätt ge den autentiserade tjänsten åtkomst till andra Azure-resurser.</span><span class="sxs-lookup"><span data-stu-id="cda9e-159">You can then use that account like any other AD account including securely letting the authenticated service access other Azure resources.</span></span>

<span data-ttu-id="cda9e-160">Lamna Healthcare tar identitetshanteringen ett steg längre och använder hanterade identiteter för alla kompatibla tjänster som måste kunna hantera och distribuera infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="cda9e-160">Lamna Healthcare takes their identity management a step further and uses managed identities for all supported services that need the ability to perform infrastructure management and deployments.</span></span>

## <a name="infrastructure-protection-at-lamna-healthcare"></a><span data-ttu-id="cda9e-161">Skyddad infrastruktur på Lamna Healthcare</span><span class="sxs-lookup"><span data-stu-id="cda9e-161">Infrastructure protection at Lamna Healthcare</span></span>

<span data-ttu-id="cda9e-162">Vi har sett hur Lamna Healthcare har åtgärdat det tidigare misstaget då företagets infrastruktur oavsiktligt raderades.</span><span class="sxs-lookup"><span data-stu-id="cda9e-162">We've seen how Lamna Healthcare has addressed issues from their incident where infrastructure was inadvertently deleted.</span></span> <span data-ttu-id="cda9e-163">De använder rollbaserad åtkomstkontroll för att bättre hantera säkerheten i infrastrukturen och använder hanterade identiteter för att hålla autentiseringsuppgifterna åtskilda från koden och för att förenkla administrationen av de identiteter som behövs för deras tjänster.</span><span class="sxs-lookup"><span data-stu-id="cda9e-163">They've used role-based access control to better manage the security of their infrastructure, and are using managed identities to keep their credentials out of code and ease administration of the identities needed for their services.</span></span>

## <a name="summary"></a><span data-ttu-id="cda9e-164">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="cda9e-164">Summary</span></span>

<span data-ttu-id="cda9e-165">För att säkerställa infrastrukturens tillgänglighet och integritet är det viktigt att den skyddas på rätt sätt.</span><span class="sxs-lookup"><span data-stu-id="cda9e-165">To ensure the availability and integrity of infrastructure, it's important to properly secure your infrastructure.</span></span> <span data-ttu-id="cda9e-166">Funktioner som RBAC och hanterade identiteter hjälper dig att skydda din Azure-miljö mot obehörig eller oavsiktlig åtkomst, samtidigt som de förbättrar säkerhetsfunktionerna relaterade till identiteter i din arkitektur.</span><span class="sxs-lookup"><span data-stu-id="cda9e-166">Properly using features such as RBAC and managed  identities will help protect your Azure environment from unauthorized or unintended access, and will enhance the identity security capabilities in your architecture.</span></span>