<span data-ttu-id="6f492-101">Att ge kunderna snabb tillgång till produkterna i din klädbutik på webben är avgörande för dina kunder och för att ditt företag ska bli framgångsrikt.</span><span class="sxs-lookup"><span data-stu-id="6f492-101">Providing your customers the fastest access to the products on your online clothing site is paramount to your customers, and your businesses success.</span></span> <span data-ttu-id="6f492-102">Genom att minska avståndet som data måste färdas till dina användare kan du leverera mer innehåll snabbare.</span><span class="sxs-lookup"><span data-stu-id="6f492-102">By decreasing the distance data has to travel to your users, you can deliver more content faster.</span></span> <span data-ttu-id="6f492-103">Om dina data lagras i Azure Cosmos DB handlar replikering av webbplatsens data till flera regioner över hela världen bara om att peka och klicka.</span><span class="sxs-lookup"><span data-stu-id="6f492-103">If your data is stored in Azure Cosmos DB, replicating your site's data to multiple regions around the world is a point and click operation.</span></span>

<!-- Activate the sandbox -->
[!include[](../../../includes/azure-sandbox-activate.md)]

<span data-ttu-id="6f492-104">I den här kursdelen lär du dig fördelarna med global distribution och en databastjänst med flera original inbyggt, och sedan att replikera ditt konto i ytterligare tre regioner.</span><span class="sxs-lookup"><span data-stu-id="6f492-104">In this unit you'll learn the benefits of global distribution and a natively multi-mastered database service, and then replicate your account into three additional regions.</span></span>

## <a name="global-distribution-basics"></a><span data-ttu-id="6f492-105">Grunderna för global distribution</span><span class="sxs-lookup"><span data-stu-id="6f492-105">Global distribution basics</span></span>

<span data-ttu-id="6f492-106">Med global distribution kan du replikera data från en region i flera Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="6f492-106">Global distribution enables you to replicate data from one region into multiple Azure regions.</span></span> <span data-ttu-id="6f492-107">Du kan lägga till eller ta bort regioner där databasen replikeras när som helst och Azure Cosmos DB ser till att när du lägger till en ytterligare region är dina data tillgängliga för åtgärder inom 30 minuter, förutsatt att dina data är högst 100 TB.</span><span class="sxs-lookup"><span data-stu-id="6f492-107">You can add or remove regions in which your database is replicated at any time, and Azure Cosmos DB ensures that when you add an additional region, your data is available for operations within 30 minutes, assuming your data is 100 TBs or less.</span></span>

<span data-ttu-id="6f492-108">Det finns två vanliga scenarier för att replikera data i två eller flera regioner:</span><span class="sxs-lookup"><span data-stu-id="6f492-108">There are two common scenarios for replicating data in two or more regions:</span></span>

1. <span data-ttu-id="6f492-109">Leverera dataåtkomst med låg latens för slutanvändare oavsett var i världen de befinner sig</span><span class="sxs-lookup"><span data-stu-id="6f492-109">Delivering low-latency data access to end users no matter where they are located around the globe</span></span>
2. <span data-ttu-id="6f492-110">Lägga till regional återhämtning till affärskontinuitet och haveriberedskap (BCDR)</span><span class="sxs-lookup"><span data-stu-id="6f492-110">Adding regional resiliency for business continuity and disaster recovery (BCDR)</span></span>

<span data-ttu-id="6f492-111">Om du vill leverera åtkomst med låg latens till kunder bör du replikerar data till regioner som är närmast den plats där dina användare finns.</span><span class="sxs-lookup"><span data-stu-id="6f492-111">To deliver low-latency access to customers, it is recommended that you replicate the data to regions closest to where your users are.</span></span> <span data-ttu-id="6f492-112">För ditt företag med klädbutik online har du kunder i Los Angeles, New York och Tokyo.</span><span class="sxs-lookup"><span data-stu-id="6f492-112">For your online clothing company, you have customers in Los Angeles, New York, and Tokyo.</span></span> <span data-ttu-id="6f492-113">Ta en titt på sidan med [Azure-regioner](https://azure.microsoft.com/global-infrastructure/regions/) och fastställ de närmaste regionerna för dessa kunder, eftersom de är de platser som du ska replikera användare till.</span><span class="sxs-lookup"><span data-stu-id="6f492-113">Take a look at the [Azure regions](https://azure.microsoft.com/global-infrastructure/regions/) page, and determine the closest regions to those sets of customers, as those are the locations you'll replicate users to.</span></span>

<span data-ttu-id="6f492-114">Om du vill tillhandahålla en BCDR-lösning bör du lägga till regioner utifrån de regionpar som beskrivs i artikeln [Affärskontinuitet och haveriberedskap (BCDR): parade Azure-regioner](https://azure.microsoft.com/documentation/articles/best-practices-availability-paired-regions/).</span><span class="sxs-lookup"><span data-stu-id="6f492-114">To provide a BCDR solution, it is recommended to add regions based on the region pairs described in the [Business continuity and disaster recovery (BCDR): Azure Paired Regions](https://azure.microsoft.com/documentation/articles/best-practices-availability-paired-regions/) article.</span></span>

<span data-ttu-id="6f492-115">När en databas replikeras så replikeras även dataflöde och lagring.</span><span class="sxs-lookup"><span data-stu-id="6f492-115">When a database is replicated, the throughput and storage are replicated equally as well.</span></span> <span data-ttu-id="6f492-116">Så om den ursprungliga databasen hade 10 GB lagringsutrymme och ett dataflöde på 1 000 RU/s, och om du har replikerat det till ytterligare tre regioner, skulle varje region ha 10 GB data och 1 000 RU/s dataflöde.</span><span class="sxs-lookup"><span data-stu-id="6f492-116">So if your original database had 10GB of storage, and throughput of 1,000 RU/s, and if you replicated that to three additional regions, each region would have 10GB of data and 1,000 RU/s of throughput.</span></span> <span data-ttu-id="6f492-117">Eftersom lagringsutrymmet och dataflödet replikeras i varje region är kostnaden för replikering till en region densamma som för den ursprungliga regionen, så att replikera till tre ytterligare regioner skulle kosta ungefär fyra gånger så mycket som den ursprungliga ej replikerade originaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="6f492-117">Because the storage and throughput is replicated in each region, the cost of replicating to a region is the same as the original region, so replicating to 3 additional regions, would cost approximately four times the original non-replicated database.</span></span>

## <a name="creating-an-azure-cosmos-db-account-in-the-portal"></a><span data-ttu-id="6f492-118">Skapa ett Azure Cosmos DB-konto på portalen</span><span class="sxs-lookup"><span data-stu-id="6f492-118">Creating an Azure Cosmos DB account in the portal</span></span>

1. <span data-ttu-id="6f492-119">Logga in på [Azure Portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) med samma konto som du använde för att aktivera sandbox-miljön.</span><span class="sxs-lookup"><span data-stu-id="6f492-119">Sign in to the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) using the same account you used to activate the sandbox.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="6f492-120">Logga in på Azure Portal och sandbox-miljön med samma konto.</span><span class="sxs-lookup"><span data-stu-id="6f492-120">Login to the Azure portal and the sandbox with the same account.</span></span>
    >
    > <span data-ttu-id="6f492-121">Logga in på Azure Portal med länken ovan för att se till att du är ansluten till sandbox-miljön som ger åtkomst till en Concierge-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="6f492-121">Login to the Azure portal using the link above to ensure you are connected to the sandbox, which provides access to a Concierge Subscription.</span></span>

1. <span data-ttu-id="6f492-122">Klicka på **Skapa en resurs** > **Databaser** > **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="6f492-122">Click **Create a resource** > **Databases** > **Azure Cosmos DB**.</span></span>

   ![Fönstret Databaser på Azure Portal](../media/2-global-distribution/2-create-nosql-db-databases-json-tutorial.png)

1. <span data-ttu-id="6f492-124">På sidan **Skapa Azure Cosmos DB-konto** anger du inställningarna för det nya Azure Cosmos DB-kontot, inklusive platsen.</span><span class="sxs-lookup"><span data-stu-id="6f492-124">On the **Create Azure Cosmos DB Account** page, enter the settings for the new Azure Cosmos DB account, including the location.</span></span>

    <span data-ttu-id="6f492-125"><!-- Resource selection --> [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]</span><span class="sxs-lookup"><span data-stu-id="6f492-125"><!-- Resource selection --> [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]</span></span>

    <span data-ttu-id="6f492-126">Inställning</span><span class="sxs-lookup"><span data-stu-id="6f492-126">Setting</span></span>|<span data-ttu-id="6f492-127">Värde</span><span class="sxs-lookup"><span data-stu-id="6f492-127">Value</span></span>|<span data-ttu-id="6f492-128">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="6f492-128">Description</span></span>
    ---|---|---
    <span data-ttu-id="6f492-129">Prenumeration</span><span class="sxs-lookup"><span data-stu-id="6f492-129">Subscription</span></span>|<span data-ttu-id="6f492-130">*Concierge-prenumeration*</span><span class="sxs-lookup"><span data-stu-id="6f492-130">*Concierge Subscription*</span></span>|<span data-ttu-id="6f492-131">Välj din Concierge-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="6f492-131">Select your Concierge Subscription.</span></span> <span data-ttu-id="6f492-132">Om du inte ser Concierge-prenumerationen har du flera klienter aktiverade på din prenumeration och du måste ändra klienter.</span><span class="sxs-lookup"><span data-stu-id="6f492-132">If you do not see the Concierge Subscription listed, you have multiple tenants enabled on your subscription, and you need to change tenants.</span></span> <span data-ttu-id="6f492-133">Logga in igen med följande portallänk: [Azure-portalen för sandbox-miljö](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) för att göra detta.</span><span class="sxs-lookup"><span data-stu-id="6f492-133">To do so, login again using the following portal link: [Azure portal for sandbox](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true).</span></span>
    <span data-ttu-id="6f492-134">Resursgrupp</span><span class="sxs-lookup"><span data-stu-id="6f492-134">Resource Group</span></span>|<span data-ttu-id="6f492-135">Använd befintlig</span><span class="sxs-lookup"><span data-stu-id="6f492-135">Use existing</span></span><br><br><span data-ttu-id="6f492-136"><rgn>[Resursgruppsnamn för sandbox-miljö]</rgn></span><span class="sxs-lookup"><span data-stu-id="6f492-136"><rgn>[sandbox resource group name]</rgn></span></span>|<span data-ttu-id="6f492-137">Välj **Använd befintlig** och ange därefter <rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>.</span><span class="sxs-lookup"><span data-stu-id="6f492-137">Select **Use existing**, and then enter <rgn>[sandbox resource group name]</rgn>.</span></span>
    <span data-ttu-id="6f492-138">Kontonamn</span><span class="sxs-lookup"><span data-stu-id="6f492-138">Account Name</span></span>|<span data-ttu-id="6f492-139">*Ange ett unikt namn*</span><span class="sxs-lookup"><span data-stu-id="6f492-139">*Enter a unique name*</span></span>|<span data-ttu-id="6f492-140">Ange ett unikt namn som identifierar Azure Cosmos DB-kontot.</span><span class="sxs-lookup"><span data-stu-id="6f492-140">Enter a unique name to identify this Azure Cosmos DB account.</span></span> <span data-ttu-id="6f492-141">Eftersom *documents.azure.com* läggs till det ID du anger för att skapa din URI ska du använda ett unikt men identifierbart ID.</span><span class="sxs-lookup"><span data-stu-id="6f492-141">Because *documents.azure.com* is appended to the ID that you provide to create your URI, use a unique but identifiable ID.</span></span><br><br><span data-ttu-id="6f492-142">Ditt ID får bara innehålla gemener, siffror och bindestreck (-) och det måste innehålla mellan 3 och 31 tecken.</span><span class="sxs-lookup"><span data-stu-id="6f492-142">The ID can contain only lowercase letters, numbers, and the hyphen (-) character, and it must contain 3 to 31 characters.</span></span>
    <span data-ttu-id="6f492-143">API</span><span class="sxs-lookup"><span data-stu-id="6f492-143">API</span></span>|<span data-ttu-id="6f492-144">SQL</span><span class="sxs-lookup"><span data-stu-id="6f492-144">SQL</span></span>|<span data-ttu-id="6f492-145">API:n avgör vilken typ av konto som skapas.</span><span class="sxs-lookup"><span data-stu-id="6f492-145">The API determines the type of account to create.</span></span> <span data-ttu-id="6f492-146">Azure Cosmos DB innehåller fem API:er för ditt program: SQL (dokumentdatabas), Gremlin (grafdatabas), MongoDB (dokumentdatabas), Azure-tabell och Cassandra, där var och en för närvarande kräver ett separat konto.</span><span class="sxs-lookup"><span data-stu-id="6f492-146">Azure Cosmos DB provides five APIs to suit the needs of your application: SQL (document database), Gremlin (graph database), MongoDB (document database), Azure Table, and Cassandra, each of which currently requires a separate account.</span></span> <br><br><span data-ttu-id="6f492-147">Välj **SQL** eftersom du i den här modulen ska skapa en dokumentdatabas som stöder frågekörning med SDL-syntax och som kan nås med SQL-API:et.</span><span class="sxs-lookup"><span data-stu-id="6f492-147">Select **SQL** because in this module you are creating a document database that is queryable using SQL syntax and accessible with the SQL API.</span></span>|
    <span data-ttu-id="6f492-148">Plats</span><span class="sxs-lookup"><span data-stu-id="6f492-148">Location</span></span>|<span data-ttu-id="6f492-149">*Välj den region som är närmast dig*</span><span class="sxs-lookup"><span data-stu-id="6f492-149">*Select the region closest to you*</span></span>|<span data-ttu-id="6f492-150">Välj den region som är närmast dig i listan över regioner ovan.</span><span class="sxs-lookup"><span data-stu-id="6f492-150">Select the region closest to you from the list of regions above.</span></span>
    <span data-ttu-id="6f492-151">Geo-redundans</span><span class="sxs-lookup"><span data-stu-id="6f492-151">Geo-Redundancy</span></span>| <span data-ttu-id="6f492-152">Inaktivera</span><span class="sxs-lookup"><span data-stu-id="6f492-152">Disable</span></span> | <span data-ttu-id="6f492-153">Den här inställningen skapar en replikerad version av databasen i en andra (parad) region.</span><span class="sxs-lookup"><span data-stu-id="6f492-153">This setting creates a replicated version of your database in a second (paired) region.</span></span> <span data-ttu-id="6f492-154">Låt det här vara inaktiverat just nu eftersom du ska replikera databasen senare.</span><span class="sxs-lookup"><span data-stu-id="6f492-154">Leave this set to disabled for now, as you will replicate the database later.</span></span>
    <span data-ttu-id="6f492-155">Skrivåtgärder för flera regioner</span><span class="sxs-lookup"><span data-stu-id="6f492-155">Multi-region Writes</span></span> | <span data-ttu-id="6f492-156">Aktivera</span><span class="sxs-lookup"><span data-stu-id="6f492-156">Enable</span></span> | <span data-ttu-id="6f492-157">Den här inställningen låter dig skriva till flera regioner samtidigt.</span><span class="sxs-lookup"><span data-stu-id="6f492-157">This setting enables you to write to multiple regions at the same time.</span></span> <span data-ttu-id="6f492-158">Inställningen kan bara konfigureras när kontot skapas.</span><span class="sxs-lookup"><span data-stu-id="6f492-158">This setting can only be configured during account creation.</span></span>

1. <span data-ttu-id="6f492-159">Klicka på **Granska + Skapa**.</span><span class="sxs-lookup"><span data-stu-id="6f492-159">Click **Review + Create**.</span></span>

    ![Den nya kontosidan för Azure Cosmos DB](../media/2-global-distribution/2-azure-cosmos-db-create-new-account.png)

1. <span data-ttu-id="6f492-161">När inställningarna har verifierats klickar du på **Skapa** för att skapa kontot.</span><span class="sxs-lookup"><span data-stu-id="6f492-161">After the settings are validated, click **Create** to create the account.</span></span>

1. <span data-ttu-id="6f492-162">Det tar några minuter att skapa kontot.</span><span class="sxs-lookup"><span data-stu-id="6f492-162">The account creation takes a few minutes.</span></span> <span data-ttu-id="6f492-163">Vänta tills portalen visar meddelandet om att distributionen är klar och klicka på meddelandet.</span><span class="sxs-lookup"><span data-stu-id="6f492-163">Wait for the portal to display the notification that the deployment succeeded and click the notification.</span></span>

    ![Avisering](../media/2-global-distribution/2-azure-cosmos-db-notification.png)

1. <span data-ttu-id="6f492-165">Klicka på **Gå till resurs** i meddelandefönstret.</span><span class="sxs-lookup"><span data-stu-id="6f492-165">In the notification window, click **Go to resource**.</span></span>

    ![Gå till resurs](../media/2-global-distribution/2-azure-cosmos-db-go-to-resource.png)

    <span data-ttu-id="6f492-167">Portalen visar sidan **Grattis! Azure Cosmos DB-kontot har skapats**.</span><span class="sxs-lookup"><span data-stu-id="6f492-167">The portal displays the **Congratulations! Your Azure Cosmos DB account was created** page.</span></span>

    ![Meddelandefönstret i Azure Portal](../media/2-global-distribution/2-azure-cosmos-db-account-created.png)

## <a name="replicate-data-in-multiple-regions"></a><span data-ttu-id="6f492-169">Replikera data i flera regioner</span><span class="sxs-lookup"><span data-stu-id="6f492-169">Replicate data in multiple regions</span></span>

<span data-ttu-id="6f492-170">Nu ska vi replikera din databas närmast dina globala användare i Los Angeles, New York och Tokyo.</span><span class="sxs-lookup"><span data-stu-id="6f492-170">Let's now replicate your database closest to your global users in Los Angeles, New York, and Tokyo.</span></span>

1. <span data-ttu-id="6f492-171">Klicka på **Replikera data globalt** på menyn på kontosidan.</span><span class="sxs-lookup"><span data-stu-id="6f492-171">In the account page, click **Replicate data globally** from the menu.</span></span>
1. <span data-ttu-id="6f492-172">På sidan **Replikera data globalt** väljer du regionerna USA, västra 2, USA, östra och Japan, östra och klickar sedan på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="6f492-172">In the **Replicate data globally** page, select the West US 2, East US, and Japan East regions, and then click **Save**.</span></span>

    <span data-ttu-id="6f492-173">Om du inte ser kartan i Azure Portal kan du minimera menyerna till vänster på skärmen för att visa den.</span><span class="sxs-lookup"><span data-stu-id="6f492-173">If you don't see the map in the Azure portal, minimize the menus of the left side of the screen to display it.</span></span>

    <span data-ttu-id="6f492-174">Sidan visar meddelandet **Uppdaterar** när data skrivs till de nya regionerna.</span><span class="sxs-lookup"><span data-stu-id="6f492-174">The page will display an **Updating** message while the data is written to the new regions.</span></span> <span data-ttu-id="6f492-175">Data i de nya regionerna blir tillgängliga inom 30 minuter.</span><span class="sxs-lookup"><span data-stu-id="6f492-175">Data in the new regions will be available within 30 minutes.</span></span>

    ![Klicka på regionerna på kartan för att lägga till dem](../media/2-global-distribution/2-global-replication.gif)

## <a name="summary"></a><span data-ttu-id="6f492-177">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="6f492-177">Summary</span></span>

<span data-ttu-id="6f492-178">I den här kursdelen har du replikerat din databas till olika regioner i världen där du har flest användare, vilket ger dem åtkomst med låg latens till data på din webbplats.</span><span class="sxs-lookup"><span data-stu-id="6f492-178">In this unit, you replicated your database to the regions of the world in which your users are most concentrated, providing them lower-latency access to the data on your site.</span></span>
