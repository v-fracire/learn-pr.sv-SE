<span data-ttu-id="34f48-101">Att garantera en bra användarupplevelse i ett sådant e-handelsscenario som ditt kräver hög tillgänglighet och låg latens.</span><span class="sxs-lookup"><span data-stu-id="34f48-101">Assuring a great user experience in an e-commerce scenario such as yours requires high availability and low latency.</span></span>

<span data-ttu-id="34f48-102">Genom att möjliggöra stöd för flera original på det Azure Cosmos DB-konto du precis har skapat får du flera fördelar för båda dessa prestandaaspekter, och alla fördelar garanteras av de ekonomiskt uppbackade serviceavtalen som tillhandahålls av Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="34f48-102">By enabling multi-master support on the Azure Cosmos DB account you just created, there are multiple benefits to both of these performance aspects, and all of the benefits are guaranteed by the financially backed service level agreements (SLAs) provided by Azure Cosmos DB.</span></span>

## <a name="what-is-multi-master-support"></a><span data-ttu-id="34f48-103">Vad är stöd för flera original?</span><span class="sxs-lookup"><span data-stu-id="34f48-103">What is multi-master support?</span></span>

<span data-ttu-id="34f48-104">Stöd för flera original är ett alternativ som kan aktiveras på nya Azure Cosmos DB-konton.</span><span class="sxs-lookup"><span data-stu-id="34f48-104">Multi-master support is an option that can be enabled on new Azure Cosmos DB accounts.</span></span> <span data-ttu-id="34f48-105">När kontot har replikerats i flera regioner är varje region en originalregion som deltar på lika villkor i en write-anywhere-modell (skriv var som helst), som också kallas för aktiv/aktiv-mönster.</span><span class="sxs-lookup"><span data-stu-id="34f48-105">Once the account is replicated in multiple regions, each region is a master region that equally participates in a write-anywhere model, also known as an active-active pattern.</span></span>

<span data-ttu-id="34f48-106">Azure Cosmos DB-regioner som fungerar som originalregioner i en konfiguration med flera original arbetar automatiskt för att konvergera data skrivna till alla repliker och säkerställa global konsekvens och dataintegritet.</span><span class="sxs-lookup"><span data-stu-id="34f48-106">Azure Cosmos DB regions operating as master regions in a multi-master configuration automatically work to converge data written to all replicas and ensure global consistency and data integrity.</span></span>

<span data-ttu-id="34f48-107">Med stöd för flera original i Azure Cosmos kan du utföra skrivningar på vilken container som helst i en skrivningsaktiverad region globalt.</span><span class="sxs-lookup"><span data-stu-id="34f48-107">With Azure Cosmos DB multi-master support, you can perform writes on any container in a write-enabled region world-wide.</span></span> <span data-ttu-id="34f48-108">Skrivna data sprids till alla andra regioner direkt.</span><span class="sxs-lookup"><span data-stu-id="34f48-108">Written data is propagated to all other regions immediately.</span></span>  

## <a name="what-are-the-benefits-of-multi-master-support"></a><span data-ttu-id="34f48-109">Vilka är fördelarna med stöd för flera original?</span><span class="sxs-lookup"><span data-stu-id="34f48-109">What are the benefits of multi-master support?</span></span>

<span data-ttu-id="34f48-110">Fördelarna med stöd för flera original är:</span><span class="sxs-lookup"><span data-stu-id="34f48-110">The benefits of multi-master support are:</span></span>

* <span data-ttu-id="34f48-111">Ensiffrig skrivfördröjning – Konton med flera original har en förbättrad skrivfördröjning på <10 ms för 99 % av skrivningarna, upp från <15 ms för konton som inte har flera original.</span><span class="sxs-lookup"><span data-stu-id="34f48-111">Single-digit write latency – Multi-master accounts have an improved write latency of <10 ms for 99% of writes, up from <15 ms for non-multi-master accounts.</span></span>
* <span data-ttu-id="34f48-112">99,999 % tillgänglighet för läsning/skrivning – Ökad tillgänglighet för skrivning till 99,999 %, upp från 99,99 % för konton som inte har flera original.</span><span class="sxs-lookup"><span data-stu-id="34f48-112">99.999% read-write availability - The write availability multi-master accounts increases to 99.999%, up from the 99.99% for non-multi-master accounts.</span></span>
* <span data-ttu-id="34f48-113">Obegränsad skalbarhet för skrivning och dataflöde – Med konton med flera original kan du skriva till alla regioner, vilket ger obegränsad skalbarhet för skrivning och dataflöde för att stödja flera miljarder enheter.</span><span class="sxs-lookup"><span data-stu-id="34f48-113">Unlimited write scalability and throughput – With multi-master accounts, you can write to every region, providing unlimited write scalability and throughput to support billions of devices.</span></span>
* <span data-ttu-id="34f48-114">Inbyggd konfliktlösning – Konton med flera original har tre metoder för at lösa konflikter för att säkerställa global dataintegritet och konsekvens.</span><span class="sxs-lookup"><span data-stu-id="34f48-114">Built-in conflict resolution – Multi-master accounts have three methods for resolving conflicts to ensure global data integrity and consistency.</span></span> 

## <a name="conflict-resolution"></a><span data-ttu-id="34f48-115">Konfliktlösning</span><span class="sxs-lookup"><span data-stu-id="34f48-115">Conflict resolution</span></span>

<span data-ttu-id="34f48-116">Med stödet för flera original följer risken att stöta på konflikter för skrivningar till olika regioner.</span><span class="sxs-lookup"><span data-stu-id="34f48-116">With the addition of multi-master support comes the possibility of encountering conflicts for writes to different regions.</span></span> <span data-ttu-id="34f48-117">Konflikter är mycket sällsynta i Azure Cosmos DB och kan bara förekomma när ett objekt ändras samtidigt i flera regioner, innan en spridning har skett mellan regionerna.</span><span class="sxs-lookup"><span data-stu-id="34f48-117">Conflicts are extremely rare in Azure Cosmos DB and can only occur when an item is simultaneously changed in multiple regions, before propagation between the regions has happened.</span></span> <span data-ttu-id="34f48-118">Med tanke på den hastighet som replikering sker globalt borde du inte uppleva detta ofta, om alls.</span><span class="sxs-lookup"><span data-stu-id="34f48-118">Given the speed with which replication happens globally, you should not experience this often, if at all.</span></span> <span data-ttu-id="34f48-119">Men Azure Cosmos DB har inte konfliktlösningslägen där användarna kan bestämma hur de ska hantera scenarier där samma post uppdateras samtidigt av olika skrivare i två eller flera regioner.</span><span class="sxs-lookup"><span data-stu-id="34f48-119">However, Azure Cosmos DB does provide conflict resolution modes that allows users to decide how to handle scenarios where the same record is updated simultaneously by different writers in two or more regions.</span></span>  

<span data-ttu-id="34f48-120">Det finns tre konfliktlösningslägen i Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="34f48-120">There are three conflict resolution modes offered by Azure Cosmos DB.</span></span> 
* <span data-ttu-id="34f48-121">**Last-Writer-Wins (LWW)** (senaste skrivning vinner), där konflikter löses utifrån värdet för en användardefinierad heltalsegenskap i dokumentet.</span><span class="sxs-lookup"><span data-stu-id="34f48-121">**Last-Writer-Wins (LWW)**, in which conflicts are resolved based on the value of a user-defined integer property in the document.</span></span> <span data-ttu-id="34f48-122">Som standard används _ts för att fastställa det senast skrivna dokumentet.</span><span class="sxs-lookup"><span data-stu-id="34f48-122">By default _ts is used to determine the last written document.</span></span> <span data-ttu-id="34f48-123">Last-Writer-Wins är standardmekanismen för konflikthantering.</span><span class="sxs-lookup"><span data-stu-id="34f48-123">Last-Writer-Wins is the default conflict handling mechanism.</span></span>
* <span data-ttu-id="34f48-124">**Custom - User Defined Procedure** (Anpassad – användardefinierad procedur), där du helt kan styra konfliktlösningen genom att registrera en användardefinierad procedur för samlingen.</span><span class="sxs-lookup"><span data-stu-id="34f48-124">**Custom - User Defined Procedure**, in which you can fully control conflict resolution by registering a User Defined Procedure to the collection.</span></span> <span data-ttu-id="34f48-125">En användardefinierad procedur är en särskild typ av lagrad procedur med den mycket specifik signatur.</span><span class="sxs-lookup"><span data-stu-id="34f48-125">A User Defined Procedure is a special type of stored procedure with a very specific signature.</span></span> <span data-ttu-id="34f48-126">Om den användardefinierade proceduren misslyckas eller inte finns lägger Azure Cosmos DB till alla konflikter i feeden för skrivskyddade konflikter så att de kan bearbetas asynkront.</span><span class="sxs-lookup"><span data-stu-id="34f48-126">If the User Defined Procedure fails or does not exist, Azure Cosmos DB will add all conflicts into the read-only conflicts feed they can be processed asynchronously.</span></span>  
* <span data-ttu-id="34f48-127">**Custom - Async** (Anpassad – Asynkron), där Azure Cosmos DB exkluderar alla konflikter från att checkas in och registrerar dem i feeden för skrivskyddade konflikter för uppskjuten lösning av användarens program.</span><span class="sxs-lookup"><span data-stu-id="34f48-127">**Custom - Async**, in which Azure Cosmos DB excludes all conflicts from being committed and registers them in the read-only conflicts feed for deferred resolution by the user’s application.</span></span> <span data-ttu-id="34f48-128">Programmet kan utföra konfliktlösning asynkront och använda logik eller referera till en extern källa, ett externt program eller en extern tjänst för att lösa konflikten.</span><span class="sxs-lookup"><span data-stu-id="34f48-128">The application can perform conflict resolution asynchronously and use any logic or refer to any external source, application or service to resolve the conflict.</span></span>

## <a name="summary"></a><span data-ttu-id="34f48-129">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="34f48-129">Summary</span></span>

<span data-ttu-id="34f48-130">I den här kursdelen har du fått lära dig om konton med flera original, där du kan skriva data till flera regioner och därmed få bättre tillgänglighet och prestanda.</span><span class="sxs-lookup"><span data-stu-id="34f48-130">In this unit, learned about multi-master accounts, which enable you to write data to multiple regions for improved availability and performance.</span></span>