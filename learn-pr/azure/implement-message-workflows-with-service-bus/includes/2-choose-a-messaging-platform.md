<span data-ttu-id="d11f1-101">Det finns många kommunikationsplattformar som kan hjälpa till att förbättra tillförlitligheten i ett distribuerat program, däribland flera i Azure.</span><span class="sxs-lookup"><span data-stu-id="d11f1-101">There are many communications platforms that can help improve the reliability of a distributed application, including several within Azure.</span></span> <span data-ttu-id="d11f1-102">Varje verktyg har ett eget syfte. Vi tar en titt på varje verktyg i Azure för att välja rätt.</span><span class="sxs-lookup"><span data-stu-id="d11f1-102">Each of these tools serves a different purpose; let's review each tool in Azure to help choose the right one.</span></span>

<span data-ttu-id="d11f1-103">Arkitekturen i vårt program för pizzabeställning och beställningsspårning kräver flera komponenter: en webbplats, datalagring, serverdelstjänst osv. Vi kan binda ihop programmets komponenter på många olika sätt, och ett enda program kan dra nytta av flera tekniker.</span><span class="sxs-lookup"><span data-stu-id="d11f1-103">The architecture of our pizza ordering and tracking application requires several components: a website, data storage, back-end service, etc. We can bind the components of our application together in many different ways, and a single application can take advantage of multiple techniques.</span></span> 

<span data-ttu-id="d11f1-104">Vi behöver bestämma vilka tekniker som ska användas i programmet Contoso Slices.</span><span class="sxs-lookup"><span data-stu-id="d11f1-104">We need to decide which techniques to use in the Contoso Slices application.</span></span> <span data-ttu-id="d11f1-105">Det första steget är att utvärdera varje plats där det finns kommunikation mellan flera delar.</span><span class="sxs-lookup"><span data-stu-id="d11f1-105">The first step is to evaluate each place where there is communication between multiple parts.</span></span> <span data-ttu-id="d11f1-106">Vissa komponenter _måste_ köras i rätt tid för att programmet ska göra jobbet alls.</span><span class="sxs-lookup"><span data-stu-id="d11f1-106">Some components _must_ run in a timely manner for our application to be doing its job at all.</span></span> <span data-ttu-id="d11f1-107">Vissa kan vara viktiga men inte tidskritiska.</span><span class="sxs-lookup"><span data-stu-id="d11f1-107">Some may be important, but not time-critical.</span></span> <span data-ttu-id="d11f1-108">Slutligen är övriga komponenter, som mobilappens meddelanden, lite mer valfria.</span><span class="sxs-lookup"><span data-stu-id="d11f1-108">Finally, other components, like our mobile app notifications, are a bit more optional.</span></span>

<span data-ttu-id="d11f1-109">Här får du lära dig om kommunikationsplattformarna som är tillgängliga i Azure, så att du kan välja rätt för varje krav i programmet.</span><span class="sxs-lookup"><span data-stu-id="d11f1-109">Here, you will learn about the communications platforms available in Azure, so that you can choose the right one for each requirement in your application.</span></span>

## <a name="decide-between-messages-and-events"></a><span data-ttu-id="d11f1-110">Välja mellan meddelanden och händelser</span><span class="sxs-lookup"><span data-stu-id="d11f1-110">Decide between messages and events</span></span>

<span data-ttu-id="d11f1-111">Meddelanden och händelser är båda **datagram**: datapaket som skickas från en komponent till en annan.</span><span class="sxs-lookup"><span data-stu-id="d11f1-111">Messages and events are both **datagrams**: packages of data sent from one component to another.</span></span> <span data-ttu-id="d11f1-112">De är olika på sätt som först verkar subtila men som kan innebära stora skillnader i hur du skapar programmet.</span><span class="sxs-lookup"><span data-stu-id="d11f1-112">They are different in ways that at first seem subtle, but can make significant differences in how you architect your application.</span></span>

### <a name="messages"></a><span data-ttu-id="d11f1-113">Meddelanden</span><span class="sxs-lookup"><span data-stu-id="d11f1-113">Messages</span></span>

<span data-ttu-id="d11f1-114">I termer av distribuerade program är ett meddelandes definierande egenskaper att programmets övergripande integritet kan förlita sig på meddelanden som tas emot.</span><span class="sxs-lookup"><span data-stu-id="d11f1-114">In the terminology of distributed applications, the defining characteristic of a message is that the overall integrity of the application may rely on messages being received.</span></span> <span data-ttu-id="d11f1-115">Du kan föreställa dig att när du skickar ett meddelande till en komponent skickas stafettpinnen från ett arbetsflöde vidare till en annan komponent.</span><span class="sxs-lookup"><span data-stu-id="d11f1-115">You can think of sending a message as one component passing the baton of a workflow to a different component.</span></span> <span data-ttu-id="d11f1-116">Hela arbetsflödet kan vara en viktig affärsprocess, och meddelandet är murbruket som håller ihop komponenterna.</span><span class="sxs-lookup"><span data-stu-id="d11f1-116">The entire workflow may be a vital business process, and the message is the mortar that holds the components together.</span></span>

<span data-ttu-id="d11f1-117">Ett meddelande innehåller vanligtvis själva informationen, inte bara en referens (som ett ID eller en webbadress) till data.</span><span class="sxs-lookup"><span data-stu-id="d11f1-117">A message generally contains the data itself, not just a reference (like an ID or URL) to data.</span></span> <span data-ttu-id="d11f1-118">Det är mindre känsligt att skicka data som en del av datagrammet jämfört med att skicka en referens.</span><span class="sxs-lookup"><span data-stu-id="d11f1-118">Sending the data as part of the datagram is less brittle than sending a reference.</span></span> <span data-ttu-id="d11f1-119">Meddelandearkitekturen garanterar leverans av meddelandet, och eftersom inga ytterligare sökningar krävs hanteras meddelandet på ett tillförlitligt sätt.</span><span class="sxs-lookup"><span data-stu-id="d11f1-119">The messaging architecture guarantees delivery of the message, and because no additional lookups are required, the message is reliably handled.</span></span> <span data-ttu-id="d11f1-120">Men sändningsprogrammet måste veta exakt vilka data som ska ingå för att undvika att skicka för mycket data (för mycket data innebär onödigt arbete för den mottagande komponenten).</span><span class="sxs-lookup"><span data-stu-id="d11f1-120">However, the sending application needs to know exactly what data to include, to avoid sending too much data, which requires the receiving component to do unnecessary work.</span></span> <span data-ttu-id="d11f1-121">I det här avseendet är sändaren och mottagaren av ett meddelande ofta kopplade av ett strikt datakontrakt.</span><span class="sxs-lookup"><span data-stu-id="d11f1-121">In this sense, the sender and receiver of a message are often coupled by a strict data contract.</span></span>

<span data-ttu-id="d11f1-122">I Contoso Slices nya arkitektur är det sannolikt att de skulle använda meddelanden när en pizzabeställning kommer.</span><span class="sxs-lookup"><span data-stu-id="d11f1-122">In Contoso Slices new architecture, when a pizza order is entered, they would likely use messages.</span></span> <span data-ttu-id="d11f1-123">Webbklienten eller mobilappen skulle skicka ett meddelande till serverdelens aktiva komponenter.</span><span class="sxs-lookup"><span data-stu-id="d11f1-123">The web front end or mobile app would send a message to the back-end processing components.</span></span> <span data-ttu-id="d11f1-124">I serverdelen utförs steg som dirigering till butiken närmast kunden och debitering av kreditkortet.</span><span class="sxs-lookup"><span data-stu-id="d11f1-124">In the back end, steps like routing to the store near the customer and charging the credit card would take place.</span></span>

### <a name="events"></a><span data-ttu-id="d11f1-125">Händelser</span><span class="sxs-lookup"><span data-stu-id="d11f1-125">Events</span></span>

<span data-ttu-id="d11f1-126">En händelse utlöser ett meddelande om att något har skett.</span><span class="sxs-lookup"><span data-stu-id="d11f1-126">An event triggers notification that something has occurred.</span></span> <span data-ttu-id="d11f1-127">Händelser är ”enklare” än meddelanden och används oftast för sändningskommunikation.</span><span class="sxs-lookup"><span data-stu-id="d11f1-127">Events are "lighter" than messages and are most often used for broadcast communications.</span></span>

<span data-ttu-id="d11f1-128">Händelser har följande egenskaper:</span><span class="sxs-lookup"><span data-stu-id="d11f1-128">Events have the following characteristics:</span></span>

* <span data-ttu-id="d11f1-129">Händelsen kan skickas till flera mottagare eller inte till någon alls</span><span class="sxs-lookup"><span data-stu-id="d11f1-129">The event may be sent to multiple receivers, or to none at all</span></span>
* <span data-ttu-id="d11f1-130">Händelser är ofta avsedda att ”förgrenas” eller har ett stort antal prenumeranter för varje utgivare</span><span class="sxs-lookup"><span data-stu-id="d11f1-130">Events are often intended to "fan out," or have a large number of subscribers for each publisher</span></span>
* <span data-ttu-id="d11f1-131">Utgivaren av händelsen har ingen förväntan på åtgärder från den mottagande komponenten</span><span class="sxs-lookup"><span data-stu-id="d11f1-131">The publisher of the event has no expectation about the action a receiving component takes</span></span>

<span data-ttu-id="d11f1-132">Vår pizzakedja skulle sannolikt använda händelser för meddelanden till användare om statusändringar.</span><span class="sxs-lookup"><span data-stu-id="d11f1-132">Our pizza chain would likely use events for notifications to users about status changes.</span></span> <span data-ttu-id="d11f1-133">Statusändringshändelser skulle kunna skickas till Azure Event Grid, och därefter till Azure Notification Hub för en helt _serverlös_ lösning.</span><span class="sxs-lookup"><span data-stu-id="d11f1-133">Status change events could be sent to Azure Event Grid, then on to Azure Functions, and to Azure Notification Hubs for a completely _serverless_ solution.</span></span>

<span data-ttu-id="d11f1-134">Den här skillnaden mellan händelser och meddelanden är grundläggande eftersom kommunikationsplattformar vanligen är utformade för att hantera det ena eller det andra.</span><span class="sxs-lookup"><span data-stu-id="d11f1-134">This difference between events and messages is fundamental because communications platforms are generally designed to handle one or the other.</span></span> <span data-ttu-id="d11f1-135">Service Bus är utformat för att hantera meddelanden.</span><span class="sxs-lookup"><span data-stu-id="d11f1-135">Service Bus is designed to handle messages.</span></span> <span data-ttu-id="d11f1-136">Om du vill skicka händelser ska du troligen välja Event Grid.</span><span class="sxs-lookup"><span data-stu-id="d11f1-136">If you want to send events, you would likely choose Event Grid.</span></span>

<span data-ttu-id="d11f1-137">Azure har även Azure Event Hubs, men det används oftast för en särskild typ av ström med högt kommunikationsflöde som används för analys.</span><span class="sxs-lookup"><span data-stu-id="d11f1-137">Azure also has Azure Event Hubs, but it is most often used for a specific type of high-flow stream of communications used for analytics.</span></span> <span data-ttu-id="d11f1-138">Om vi till exempel hade nätverksanslutna sensorer på våra pizzaugnar skulle vi kunna skicka Event Hub kopplat till Azure Stream Analytics för att hålla koll på mönster i temperaturändringarna som kan vara ett tecken på brand eller komponentslitage.</span><span class="sxs-lookup"><span data-stu-id="d11f1-138">For example, if we had networked sensors on our pizza ovens, we could use Event Hubs coupled with Azure Stream Analytics to watch for patterns in the temperature changes that might indicate an unwanted fire or component wear.</span></span>

## <a name="service-bus-topics-queues-and-relays"></a><span data-ttu-id="d11f1-139">Service Bus-ämnen, -köer och -reläer</span><span class="sxs-lookup"><span data-stu-id="d11f1-139">Service Bus topics, queues, and relays</span></span>

<span data-ttu-id="d11f1-140">Azure Service Bus kan utbyta meddelanden på tre olika sätt: via köer, ämnen och reläer.</span><span class="sxs-lookup"><span data-stu-id="d11f1-140">Azure Service Bus can exchange messages in three different ways: queues, topics, and relays.</span></span>

### <a name="what-is-a-queue"></a><span data-ttu-id="d11f1-141">Vad är en kö?</span><span class="sxs-lookup"><span data-stu-id="d11f1-141">What is a queue?</span></span>

<span data-ttu-id="d11f1-142">En **kö** är en enkel temporär lagringsplats för meddelanden.</span><span class="sxs-lookup"><span data-stu-id="d11f1-142">A **queue** is a simple temporary storage location for messages.</span></span> <span data-ttu-id="d11f1-143">En sändande komponent lägger till ett meddelande till kön.</span><span class="sxs-lookup"><span data-stu-id="d11f1-143">A sending component adds a message to the queue.</span></span> <span data-ttu-id="d11f1-144">En målkomponent hämtar det meddelande som ligger först i kön.</span><span class="sxs-lookup"><span data-stu-id="d11f1-144">A destination component picks up the message at the front of the queue.</span></span> <span data-ttu-id="d11f1-145">Under normala förhållanden tas varje meddelande emot av endast en mottagare.</span><span class="sxs-lookup"><span data-stu-id="d11f1-145">Under ordinary circumstances, each message is received by only one receiver.</span></span>

![En bild som visar ett exempel på meddelandekö med en avsändare som skickar meddelanden till kön och en mottagare som hämtar dem en i taget från kön.](../media/2-service-bus-queue.png)

<span data-ttu-id="d11f1-147">Köer frikopplar käll- och målkomponenterna för att isolera målkomponenter från hög efterfrågan.</span><span class="sxs-lookup"><span data-stu-id="d11f1-147">Queues decouple the source and destination components to insulate destination components from high demand.</span></span> 

<span data-ttu-id="d11f1-148">Under perioder med hög belastning kan meddelanden komma in snabbare än vad målkomponenterna kan hantera.</span><span class="sxs-lookup"><span data-stu-id="d11f1-148">During peak times, messages may come in faster than destination components can handle them.</span></span> <span data-ttu-id="d11f1-149">Eftersom källkomponenter inte har någon direkt anslutning till målet påverkas inte källan, och kön växer.</span><span class="sxs-lookup"><span data-stu-id="d11f1-149">Because source components have no direct connection to the destination, the source is unaffected and the queue will grow.</span></span> <span data-ttu-id="d11f1-150">Målkomponenter tar bort meddelanden från kön eftersom de kan hantera dem.</span><span class="sxs-lookup"><span data-stu-id="d11f1-150">Destination components will remove messages from the queue as they are able to handle them.</span></span> <span data-ttu-id="d11f1-151">När efterfrågan sjunker kan målkomponenter komma ikapp så att kön förkortas.</span><span class="sxs-lookup"><span data-stu-id="d11f1-151">When demand drops, destination components can catch up and the queue shortens.</span></span>

<span data-ttu-id="d11f1-152">En kö motsvarar hög efterfrågan som här utan att lägga till resurser i systemet.</span><span class="sxs-lookup"><span data-stu-id="d11f1-152">A queue responds to high demand like this without needing to add resources to the system.</span></span> <span data-ttu-id="d11f1-153">Men för meddelanden som behöver hanteras relativt snabbt kan de dela belastningen om du lägger till ytterligare instanser av din målkomponent.</span><span class="sxs-lookup"><span data-stu-id="d11f1-153">However, for messages that need to be handled relatively quickly, adding additional instances of your destination component can allow them to share the load.</span></span> <span data-ttu-id="d11f1-154">Varje meddelande hanteras av endast en instans.</span><span class="sxs-lookup"><span data-stu-id="d11f1-154">Each message would be handled by only one instance.</span></span> <span data-ttu-id="d11f1-155">Det är ett effektivt sätt att skala hela programmet, samtidigt som du bara lägger till resurser till komponenterna som verkligen behöver dem.</span><span class="sxs-lookup"><span data-stu-id="d11f1-155">This is an effective way to scale your entire application while only adding resources to the components that actually need it.</span></span>

### <a name="what-is-a-topic"></a><span data-ttu-id="d11f1-156">Vad är ett ämne?</span><span class="sxs-lookup"><span data-stu-id="d11f1-156">What is a topic?</span></span>

<span data-ttu-id="d11f1-157">Ett **ämne** liknar en kö men kan ha flera prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="d11f1-157">A **topic** is similar to a queue but can have multiple subscriptions.</span></span> <span data-ttu-id="d11f1-158">Det innebär att flera målkomponenter kan prenumerera på ett ämne, så att varje meddelande levereras till flera mottagare.</span><span class="sxs-lookup"><span data-stu-id="d11f1-158">This means that multiple destination components can subscribe to a single topic, so each message is delivered to multiple receivers.</span></span> <span data-ttu-id="d11f1-159">Prenumerationer kan även filtrera meddelandena i ämnet för att bara ta emot relevanta meddelanden.</span><span class="sxs-lookup"><span data-stu-id="d11f1-159">Subscriptions can also filter the messages in the topic to receive only messages that are relevant.</span></span> <span data-ttu-id="d11f1-160">Prenumerationer erbjuder samma frikopplade kommunikation som köer och svarar på hög efterfrågan på samma sätt.</span><span class="sxs-lookup"><span data-stu-id="d11f1-160">Subscriptions provide the same decoupled communications as queues and respond to high demand in the same way.</span></span> <span data-ttu-id="d11f1-161">Använd ett ämne om du vill att varje meddelande ska levereras till mer än en målkomponent.</span><span class="sxs-lookup"><span data-stu-id="d11f1-161">Use a topic if you want each message to be delivered to more than one destination component.</span></span>

<span data-ttu-id="d11f1-162">Ämne kan inte användas på Basic-prisnivån.</span><span class="sxs-lookup"><span data-stu-id="d11f1-162">Topics are not supported in the Basic pricing tier.</span></span>

![En bild som visar en avsändare som skickar meddelanden till flera mottagare via ett ämne som innehåller tre prenumerationer.](../media/2-service-bus-topic.png)

### <a name="what-is-a-relay"></a><span data-ttu-id="d11f1-165">Vad är ett relä?</span><span class="sxs-lookup"><span data-stu-id="d11f1-165">What is a relay?</span></span>

<span data-ttu-id="d11f1-166">Ett **relä** är ett objekt som erbjuder synkron, dubbelriktad kommunikation mellan program.</span><span class="sxs-lookup"><span data-stu-id="d11f1-166">A **relay** is an object that performs synchronous, two-way communication between applications.</span></span> <span data-ttu-id="d11f1-167">Det är ingen temporär lagringsplats för meddelanden som köer och ämnen.</span><span class="sxs-lookup"><span data-stu-id="d11f1-167">It is not a temporary storage location for messages like queues and topics.</span></span> <span data-ttu-id="d11f1-168">Istället erbjuder det dubbelriktade, obuffrade anslutningar över nätverksgränser som brandväggar.</span><span class="sxs-lookup"><span data-stu-id="d11f1-168">Instead, it provides bidirectional, unbuffered connections across network boundaries such as firewalls.</span></span> <span data-ttu-id="d11f1-169">Använd ett relä om du vill dirigera kommunikation mellan komponenter som om de fanns i samma nätverkssegment men åtskiljs av nätverkssäkerhetsenheter.</span><span class="sxs-lookup"><span data-stu-id="d11f1-169">Use a relay when you want direct communications between components as if they were located on the same network segment but separated by network security devices.</span></span>

> [!NOTE]
> <span data-ttu-id="d11f1-170">Trots att reläer ingår i Azure Service Bus implementerar de inte löst kopplade arbetsflöden för meddelanden och tas inte upp mer i den här modulen.</span><span class="sxs-lookup"><span data-stu-id="d11f1-170">Although relays are part of Azure Service Bus, they do not implement loosely coupled messaging workflows and are not considered further in this module.</span></span>

## <a name="service-bus-queues-and-storage-queues"></a><span data-ttu-id="d11f1-171">Service Bus-köer och Storage-köer</span><span class="sxs-lookup"><span data-stu-id="d11f1-171">Service Bus queues and storage queues</span></span>

<span data-ttu-id="d11f1-172">Det finns två funktioner i Azure som innehåller meddelandeköer: Service Bus- och Azure Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="d11f1-172">There are two Azure features that include message queues: Service Bus and Azure Storage accounts.</span></span> <span data-ttu-id="d11f1-173">En allmän riktlinje är att lagringsköer är lättare att använda med mindre avancerade och flexibla än Service Bus-köer.</span><span class="sxs-lookup"><span data-stu-id="d11f1-173">As a general guide, storage queues are simpler to use but are less sophisticated and flexible than Service Bus queues.</span></span>

<span data-ttu-id="d11f1-174">Viktiga fördelar med Service Bus-köer är:</span><span class="sxs-lookup"><span data-stu-id="d11f1-174">Key advantages of Service Bus queues include:</span></span>

* <span data-ttu-id="d11f1-175">Stöder större meddelandestorlek (256 KB per meddelande jämfört med 64 KB)</span><span class="sxs-lookup"><span data-stu-id="d11f1-175">Supports larger messages size (256 KB per message versus 64 KB)</span></span>
* <span data-ttu-id="d11f1-176">Stöder både leverans minst en gång och leverans högst en gång – välj mellan en mycket liten risk för att ett meddelande försvinner eller en mycket liten risk för att det hanteras två gånger</span><span class="sxs-lookup"><span data-stu-id="d11f1-176">Supports both at-least-once and at-most-once delivery - choose between a very small chance that a message is lost or a very small chance it is handled twice</span></span>
* <span data-ttu-id="d11f1-177">Garanterar **FIFO-beställning (först in först ut)**  – meddelanden hanteras i samma ordning som de läggs till (även om FIFO är den normala driften för en kö garanteras det inte för varje meddelande)</span><span class="sxs-lookup"><span data-stu-id="d11f1-177">Guarantees **first-in-first-out (FIFO)** order - messages are handled in the same order they are added (although FIFO is the normal operation of a queue, it is not guaranteed for every message)</span></span>
* <span data-ttu-id="d11f1-178">Kan gruppera flera meddelanden till en transaktion – om ett meddelande i transaktionen inte skickas levereras inga meddelanden i transaktionen</span><span class="sxs-lookup"><span data-stu-id="d11f1-178">Can group multiple messages into a transaction - if one message in the transaction fails to be delivered, all messages in the transaction will not be delivered</span></span>
* <span data-ttu-id="d11f1-179">Stöder rollbaserad säkerhet</span><span class="sxs-lookup"><span data-stu-id="d11f1-179">Supports role-based security</span></span>
* <span data-ttu-id="d11f1-180">Kräver inga målkomponenter för att kontinuerligt avsöka kön</span><span class="sxs-lookup"><span data-stu-id="d11f1-180">Does not require destination components to continuously poll the queue</span></span>

<span data-ttu-id="d11f1-181">Fördelar med Storage-köer:</span><span class="sxs-lookup"><span data-stu-id="d11f1-181">Advantages of storage queues:</span></span>

* <span data-ttu-id="d11f1-182">Stöder obegränsad köstorlek (jämfört med högst 80 GB för Service Bus-köer)</span><span class="sxs-lookup"><span data-stu-id="d11f1-182">Supports unlimited queue size (versus 80-GB limit for Service Bus queues)</span></span>
* <span data-ttu-id="d11f1-183">Innehåller en logg över alla meddelanden</span><span class="sxs-lookup"><span data-stu-id="d11f1-183">Maintains a log of all messages</span></span>

## <a name="how-to-choose-a-communications-technology"></a><span data-ttu-id="d11f1-184">Så här väljer du en kommunikationsteknik</span><span class="sxs-lookup"><span data-stu-id="d11f1-184">How to choose a communications technology</span></span>

<span data-ttu-id="d11f1-185">Vi har sett de olika begreppen och implementeringarna som Azure tillhandahåller.</span><span class="sxs-lookup"><span data-stu-id="d11f1-185">We've seen the different concepts and the implementations Azure provides.</span></span> <span data-ttu-id="d11f1-186">Vi ska diskutera hur vår beslutsprocess ska se ut för varje kommunikation.</span><span class="sxs-lookup"><span data-stu-id="d11f1-186">Let's discuss what our decision process should look like for each of our communications.</span></span>

#### <a name="consider-the-following-questions"></a><span data-ttu-id="d11f1-187">Överväg följande frågor:</span><span class="sxs-lookup"><span data-stu-id="d11f1-187">Consider the following questions:</span></span>

1. <span data-ttu-id="d11f1-188">Är kommunikationen en händelse?</span><span class="sxs-lookup"><span data-stu-id="d11f1-188">Is the communication an event?</span></span> <span data-ttu-id="d11f1-189">I så fall bör du överväga att använda Event Grid eller Event Hub.</span><span class="sxs-lookup"><span data-stu-id="d11f1-189">If so, consider using Event Grid or Event Hubs.</span></span>

1. <span data-ttu-id="d11f1-190">Ska ett enda meddelande levereras till mer en ett mål?</span><span class="sxs-lookup"><span data-stu-id="d11f1-190">Should a single message be delivered to more than one destination?</span></span> <span data-ttu-id="d11f1-191">Om det ska det använder du ett Service Bus-ämne.</span><span class="sxs-lookup"><span data-stu-id="d11f1-191">If so, use a Service Bus topic.</span></span> <span data-ttu-id="d11f1-192">Använd annars en kö.</span><span class="sxs-lookup"><span data-stu-id="d11f1-192">Otherwise, use a queue.</span></span>

<span data-ttu-id="d11f1-193">Om du bestämmer dig för att du behöver en kö:</span><span class="sxs-lookup"><span data-stu-id="d11f1-193">If you decide that you need a queue:</span></span>

#### <a name="choose-service-bus-queues-if"></a><span data-ttu-id="d11f1-194">Välj Service Bus-köer om:</span><span class="sxs-lookup"><span data-stu-id="d11f1-194">Choose Service Bus queues if:</span></span>

* <span data-ttu-id="d11f1-195">Du behöver en garanti om leverans högst en gång</span><span class="sxs-lookup"><span data-stu-id="d11f1-195">You need an at-most-once delivery guarantee</span></span>
* <span data-ttu-id="d11f1-196">Du behöver en FIFO-garanti</span><span class="sxs-lookup"><span data-stu-id="d11f1-196">You need a FIFO guarantee</span></span>
* <span data-ttu-id="d11f1-197">Du behöver gruppera meddelanden i transaktioner</span><span class="sxs-lookup"><span data-stu-id="d11f1-197">You need to group messages into transactions</span></span>
* <span data-ttu-id="d11f1-198">Du vill ta emot meddelanden utan att avsöka kön</span><span class="sxs-lookup"><span data-stu-id="d11f1-198">You want to receive messages without polling the queue</span></span>
* <span data-ttu-id="d11f1-199">Du behöver ange rollbaserad åtkomst till köerna</span><span class="sxs-lookup"><span data-stu-id="d11f1-199">You need to provide role-based access to the queues</span></span>
* <span data-ttu-id="d11f1-200">Du behöver hantera meddelanden som är större än 64 KB men mindre än 256 KB</span><span class="sxs-lookup"><span data-stu-id="d11f1-200">You need to handle messages larger than 64 KB but smaller than 256 KB</span></span>
* <span data-ttu-id="d11f1-201">Storleken på din kö inte kommer att bli större än 80 GB</span><span class="sxs-lookup"><span data-stu-id="d11f1-201">Your queue size will not grow larger than 80 GB</span></span>
* <span data-ttu-id="d11f1-202">Du vill kunna publicera och använda batchar av meddelanden</span><span class="sxs-lookup"><span data-stu-id="d11f1-202">You would like to be able to publish and consume batches of messages</span></span>

#### <a name="choose-queue-storage-if"></a><span data-ttu-id="d11f1-203">Välj kölagring om:</span><span class="sxs-lookup"><span data-stu-id="d11f1-203">Choose queue storage if:</span></span>

* <span data-ttu-id="d11f1-204">Du behöver en enkel kö utan några specifika ytterligare krav</span><span class="sxs-lookup"><span data-stu-id="d11f1-204">You need a simple queue with no particular additional requirements</span></span>
* <span data-ttu-id="d11f1-205">Du behöver en spårningslogg för alla meddelanden som skickas via kön</span><span class="sxs-lookup"><span data-stu-id="d11f1-205">You need an audit trail of all messages that pass through the queue</span></span>
* <span data-ttu-id="d11f1-206">Du förväntar dig att kön kommer att överskrida 80 GB i storlek</span><span class="sxs-lookup"><span data-stu-id="d11f1-206">You expect the queue to exceed 80 GB in size</span></span>
* <span data-ttu-id="d11f1-207">Du vill följa förloppet för bearbetning av ett meddelande i kön</span><span class="sxs-lookup"><span data-stu-id="d11f1-207">You want to track progress for processing a message inside of the queue</span></span>

<span data-ttu-id="d11f1-208">Även om komponenterna i ett distribuerat program kan kommunicera direkt kan du ofta öka kommunikationens tillförlitlighet genom att använda en mellanliggande kommunikationsplattform som Azure Service Bus eller Azure Event Grid.</span><span class="sxs-lookup"><span data-stu-id="d11f1-208">Although the components of a distributed application can communicate directly, you can often increase the reliability of that communication by using an intermediate communication platform such as Azure Service Bus or Azure Event Grid.</span></span>

<span data-ttu-id="d11f1-209">Event Grid är utformat för händelser och meddelar endast mottagarna om en händelse. Det innehåller inte rådata som är associerade med den händelsen.</span><span class="sxs-lookup"><span data-stu-id="d11f1-209">Event Grid is designed for events, which notify recipients only of an event and do not contain the raw data associated with that event.</span></span> <span data-ttu-id="d11f1-210">Azure Event Hubs är utformat för ett högt flöde av händelser av analystyp.</span><span class="sxs-lookup"><span data-stu-id="d11f1-210">Azure Event Hubs is designed for high-flow analytics types of events.</span></span> <span data-ttu-id="d11f1-211">Azure Service Bus- och Storage-köer är för meddelanden, vilka kan användas för att binda ihop grunddelarna i ett programs arbetsflöde.</span><span class="sxs-lookup"><span data-stu-id="d11f1-211">Azure Service Bus and storage queues are for messages, which can be used for binding the core pieces of any application workflow.</span></span>

<span data-ttu-id="d11f1-212">Om dina krav är enkla, om du endast vill skicka varje meddelande till ett mål eller om du vill skriva kod så snabbt som möjligt, kan en Storage-kö vara det bästa alternativet.</span><span class="sxs-lookup"><span data-stu-id="d11f1-212">If your requirements are simple, if you want to send each message to only one destination, or if you want to write code as quickly as possible, a storage queue may be the best option.</span></span> <span data-ttu-id="d11f1-213">I annat fall erbjuder Service Bus-köer många fler alternativ och större flexibilitet.</span><span class="sxs-lookup"><span data-stu-id="d11f1-213">Otherwise, Service Bus queues provide many more options and flexibility.</span></span>

<span data-ttu-id="d11f1-214">Om du vill skicka meddelanden till flera prenumeranter kan du använda ett Service Bus-ämne.</span><span class="sxs-lookup"><span data-stu-id="d11f1-214">If you want to send messages to multiple subscribers, use a Service Bus topic.</span></span>
