<span data-ttu-id="5a6dc-101">Första steget är sannolikt att återskapa din lokala konfiguration i molnet.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-101">Your first step will likely be to re-create your on-premises configuration in the cloud.</span></span>

<span data-ttu-id="5a6dc-102">Den här grundläggande konfigurationen ger dig en uppfattning om hur nätverk konfigureras och hur nätverkstrafik färdas in i och ut från Azure.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-102">This basic configuration will give you a sense of how networks are configured, and how network traffic moves in and out of Azure.</span></span>

## <a name="your-e-commerce-site-at-a-glance"></a><span data-ttu-id="5a6dc-103">Kort om din e-handelswebbplats</span><span class="sxs-lookup"><span data-stu-id="5a6dc-103">Your e-commerce site at a glance</span></span>

<span data-ttu-id="5a6dc-104">Större företagssystem består ofta av flera sammankopplade program och tjänster som fungerar tillsammans.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-104">Larger enterprise systems are often composed of multiple inter-connected applications and services that work together.</span></span> <span data-ttu-id="5a6dc-105">Du kan ha ett klientdelswebbsystem som visar lager och låter kunder skapa en beställning.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-105">You might have a front-end web system that displays inventory and allows customers to create an order.</span></span> <span data-ttu-id="5a6dc-106">Den kanske pratar med olika webbtjänster för att tillhandahålla lagerdata, hantera användarprofiler, bearbeta kreditkort och fullfölja begäranden av bearbetade beställningar.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-106">That might talk to a variety of web services to provide the inventory data, manage user profiles, process credit cards, and request fulfillment of processed orders.</span></span>

<span data-ttu-id="5a6dc-107">Det finns flera strategier och mönster som används av programvaruarkitekter och utvecklare för att göra dessa komplexa system enklare att utforma, skapa, hantera och underhålla.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-107">There are several strategies and patterns employed by software architects and designers to make these complex systems easier to design, build, manage, and maintain.</span></span> <span data-ttu-id="5a6dc-108">Låt oss titta på några av dem och starta med _löst sammansatta arkitekturer_.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-108">Let's look at a few of them, starting with _loosely coupled architectures_.</span></span>

#### <a name="benefits-of-loosely-coupled-architectures"></a><span data-ttu-id="5a6dc-109">Fördelar med löst kopplade arkitekturer</span><span class="sxs-lookup"><span data-stu-id="5a6dc-109">Benefits of Loosely Coupled Architectures</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yHrc]

### <a name="using-an-n-tier-architecture"></a><span data-ttu-id="5a6dc-110">Använd en arkitektur på N-nivå</span><span class="sxs-lookup"><span data-stu-id="5a6dc-110">Using an N-tier architecture</span></span>

<span data-ttu-id="5a6dc-111">Ett arkitekturmönster som kan användas för att skapa löst kopplade system är _N-nivå_.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-111">An architectural pattern that can be used to build loosely coupled systems is _N-tier_.</span></span>

<span data-ttu-id="5a6dc-112">En [N-nivåarkitektur](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) delar in ett program i två eller fler logiska nivåer.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-112">An [N-tier architecture](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) divides an application into two or more logical tiers.</span></span> <span data-ttu-id="5a6dc-113">Arkitektoniskt sett kan en högre nivå komma åt tjänster från en lägre nivå, men en lägre nivå bör aldrig komma åt en högre nivå.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-113">Architecturally, a higher tier can access services from a lower tier, but a lower tier should never access a higher tier.</span></span>

<span data-ttu-id="5a6dc-114">Nivåer hjälper till att avgränsa problemområden och ska helst utformas för att vara återanvändbara.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-114">Tiers help separate concerns, and are ideally designed to be reusable.</span></span> <span data-ttu-id="5a6dc-115">En nivåindelad arkitektur förenklar även underhållet.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-115">Using a tiered architecture also simplifies maintenance.</span></span> <span data-ttu-id="5a6dc-116">Nivåer kan uppdateras eller ersättas oberoende av varandra och nya nivåer kan läggas till om det behövs.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-116">Tiers can be updated or replaced independently, and new tiers can be inserted if needed.</span></span>

<span data-ttu-id="5a6dc-117">_Med tre nivåer_ anger ett N-nivåprogram med tre nivåer.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-117">_Three-tier_ refers to an n-tier application that has three tiers.</span></span> <span data-ttu-id="5a6dc-118">Ditt e-handelswebbprogram följer den här arkitekturen med tre nivåer:</span><span class="sxs-lookup"><span data-stu-id="5a6dc-118">Your e-commerce web application follows this three-tier architecture:</span></span>

* <span data-ttu-id="5a6dc-119">**Webbnivån** levererar webbgränssnittet till dina användare via en webbläsare.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-119">The **web tier** provides the web interface to your users through a browser.</span></span>
* <span data-ttu-id="5a6dc-120">**Programnivån** kör affärslogik.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-120">The **application tier** runs business logic.</span></span>
* <span data-ttu-id="5a6dc-121">**Datanivån** inkluderar databaser och annan lagring som lagrar produktinformation och kundbeställningar.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-121">The **data tier** includes databases and other storage that hold product information and customer orders.</span></span>

<span data-ttu-id="5a6dc-122">Följande bild visar flödet av begäran från användaren till datanivån.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-122">The following illustration shows the flow of request from the user to the data tier.</span></span>

![En bild som visar en arkitektur med tre nivåer där varje nivå finns på en dedikerad virtuell dator.](../media/2-three-tier.png)

<span data-ttu-id="5a6dc-124">När användaren klickar på knappen för att lägga beställningen skickas begäran till webbnivån tillsammans med användarens adress och betalningsinformation.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-124">When the user clicks the button to place the order, the request is sent to the web tier, along with the user's address and payment information.</span></span> <span data-ttu-id="5a6dc-125">Webbnivån skickar denna information till programnivån, som verifierar betalningsinformation och kontrollerar lagret.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-125">The web tier passes this information to the application tier, which would validate payment information and check inventory.</span></span> <span data-ttu-id="5a6dc-126">Programnivån kan sedan lagra ordern på datanivån för senare hämtning och expediering.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-126">The application tier might then store the order in the data tier, to be picked up later for fulfillment.</span></span>

## <a name="your-e-commerce-site-running-on-azure"></a><span data-ttu-id="5a6dc-127">Din e-handelswebbplats som körs på Azure</span><span class="sxs-lookup"><span data-stu-id="5a6dc-127">Your e-commerce site running on Azure</span></span>

<span data-ttu-id="5a6dc-128">Azure tillhandahåller många olika sätt att hantera dina webbprogram, från fullständigt förkonfigurerade miljöer som lagrar din kod till virtuella datorer som du konfigurerar, anpassar och hanterar.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-128">Azure provides many different ways to host your web applications, from fully pre-configured environments that host your code, to virtual machines that you configure, customize, and manage.</span></span>

<span data-ttu-id="5a6dc-129">Vi antar att du väljer att köra din e-handelswebbplats på virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-129">Let's say you choose to run your e-commerce site on virtual machines.</span></span> <span data-ttu-id="5a6dc-130">Så här kan det se ut i din testmiljö som körs på Azure.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-130">Here's what that might look like in your test environment running on Azure.</span></span> <span data-ttu-id="5a6dc-131">Följande bild visar en arkitektur med tre nivåer som körs på virtuella datorer med säkerhetsfunktionerna aktiverade för att begränsa inkommande begäranden.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-131">The following illustration shows a three-tier architecture running on virtual machines with security features enabled to restrict inbound requests.</span></span> 

![En bild som visar en arkitektur med tre nivåer där varje nivå körs på en separat virtuell dator.](../media/2-test-deployment.png)

<span data-ttu-id="5a6dc-135">Vi går igenom hur det här fungerar.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-135">Let's break this down.</span></span>

:::row:::
  :::column:::
    <span data-ttu-id="5a6dc-136">![En fäst plats på jorden som representerar en Azure-region](../media/2-azure-region.png)</span><span class="sxs-lookup"><span data-stu-id="5a6dc-136">![A pinned location on the Earth representing an Azure region](../media/2-azure-region.png)</span></span>
  :::column-end:::
    <span data-ttu-id="5a6dc-137">:::column span="3"::: **Vad är en Azure-region?**</span><span class="sxs-lookup"><span data-stu-id="5a6dc-137">:::column span="3"::: **What's an Azure region?**</span></span>

<span data-ttu-id="5a6dc-138">En _region_ är ett Azure-datacenter inom en viss geografisk plats.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-138">A _region_ is an Azure data center within a specific geographic location.</span></span> <span data-ttu-id="5a6dc-139">USA, östra, USA, västra och Europa, norra är exempel på regioner.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-139">East US, West US, and North Europe are examples of regions.</span></span> <span data-ttu-id="5a6dc-140">I det här fallet ser du att programmet körs i regionen USA, östra.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-140">In this instance, you see that the application is running in the East US region.</span></span>

  :::column-end:::
:::row-end:::
:::row:::
  :::column:::
    <span data-ttu-id="5a6dc-141">![Två virtuella datorer som körs i ett virtuellt nätverk](../media/2-azure-vnet.png)</span><span class="sxs-lookup"><span data-stu-id="5a6dc-141">![Two virtual machines running on a virtual network](../media/2-azure-vnet.png)</span></span>
  :::column-end:::
    <span data-ttu-id="5a6dc-142">:::column span="3"::: **Vad är ett virtuellt nätverk?**</span><span class="sxs-lookup"><span data-stu-id="5a6dc-142">:::column span="3"::: **What's a virtual network?**</span></span>

<span data-ttu-id="5a6dc-143">Ett _virtuellt nätverk_ är ett logiskt isolerat nätverk på Azure.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-143">A _virtual network_ is a logically isolated network on Azure.</span></span> <span data-ttu-id="5a6dc-144">Virtuella Azure-nätverk är något du känner till om du har konfigurerat nätverk på Hyper-V, VMware eller till och med andra offentliga moln.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-144">Azure virtual networks will be familiar to you if you've set up networks on Hyper-V, VMware, or even on other public clouds.</span></span>

<span data-ttu-id="5a6dc-145">Webb-, program- och datanivåerna har en virtuell dator var.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-145">The web, application, and data tiers each have a single VM.</span></span> <span data-ttu-id="5a6dc-146">Varje virtuell dator tillhör ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-146">Each VM belongs to a virtual network.</span></span>

<span data-ttu-id="5a6dc-147">Användarna interagerar med webbnivån direkt, så den virtuella datorn har en offentlig IP-adress.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-147">Users interact with the web tier directly, so that VM has a public IP address.</span></span> <span data-ttu-id="5a6dc-148">Användarna interagerar inte med program- eller datanivåerna.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-148">Users don't interact with the application or data tiers.</span></span> <span data-ttu-id="5a6dc-149">Dessa datorer har därför en privat IP-adress.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-149">So these VMs each have a private IP address.</span></span>

<span data-ttu-id="5a6dc-150">Azure-datacenter hanterar den fysiska maskinvaran åt dig.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-150">Azure data centers manage the physical hardware for you.</span></span> <span data-ttu-id="5a6dc-151">Du konfigurerar virtuella nätverk via programvara, vilket gör att du kan hantera ett virtuellt nätverk precis som ditt eget nätverk.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-151">You configure virtual networks through software, which enables you to treat a virtual network just like your own network.</span></span> <span data-ttu-id="5a6dc-152">Du kan till exempel dela upp ett virtuellt nätverk i undernät för att få bättre kontroll över hur nätverket tilldelar IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-152">For example, you can divide a virtual network into subnets to better control how the network assigns IP addresses.</span></span> <span data-ttu-id="5a6dc-153">Du väljer även vilka andra nätverk det virtuella nätverket kan nå, oavsett om det är det offentliga Internet eller andra nätverk i det privata IP-adressutrymmet.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-153">You also choose which other networks your virtual network can reach, whether that's the public internet or other networks in the private IP address space.</span></span>

  :::column-end:::
:::row-end:::
:::row:::
  :::column:::
    <span data-ttu-id="5a6dc-154">![Två virtuella datorer med en delad nätverkssäkerhetsgrupp](../media/2-azure-nsg.png)</span><span class="sxs-lookup"><span data-stu-id="5a6dc-154">![Two virtual machines with a shared network security group](../media/2-azure-nsg.png)</span></span>
  :::column-end:::
    <span data-ttu-id="5a6dc-155">:::column span="3"::: **Vad är en nätverkssäkerhetsgrupp?**</span><span class="sxs-lookup"><span data-stu-id="5a6dc-155">:::column span="3"::: **What's a network security group?**</span></span>

<span data-ttu-id="5a6dc-156">En _nätverkssäkerhetsgrupp_ eller NSG tillåter eller avvisar inkommande nätverkstrafik till dina Azure-resurser.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-156">A _network security group_, or NSG, allows or denies inbound network traffic to your Azure resources.</span></span> <span data-ttu-id="5a6dc-157">Du kan betrakta en nätverkssäkerhetsgrupp som en brandvägg på molnnivå för nätverket.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-157">Think of a network security group as a cloud-level firewall for your network.</span></span>

<span data-ttu-id="5a6dc-158">Till exempel kan du se att den virtuella datorn på webbnivån tillåter inkommande trafik på portarna 22 (SSH) och 80 (HTTP).</span><span class="sxs-lookup"><span data-stu-id="5a6dc-158">For example, notice that the VM in the web tier allows inbound traffic on ports 22 (SSH) and 80 (HTTP).</span></span> <span data-ttu-id="5a6dc-159">Den här virtuella datorns nätverkssäkerhetsgrupp tillåter inkommande trafik över de här portarna från alla källor.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-159">This VM's network security group allows inbound traffic over these ports from all sources.</span></span> <span data-ttu-id="5a6dc-160">Du kan konfigurera en nätverkssäkerhetsgrupp att endast acceptera trafik från kända källor, till exempel IP-adresser som du litar på.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-160">You can configure a network security group to accept traffic only from known sources, such as IP addresses that you trust.</span></span>

> [!NOTE]
> <span data-ttu-id="5a6dc-161">Med port 22 kan du ansluta direkt till Linux-system via SSH.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-161">Port 22 enables you to connect directly to Linux systems over SSH.</span></span> <span data-ttu-id="5a6dc-162">Här visar vi port 22 som öppen i utbildningssyfte.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-162">Here we show port 22 open for learning purposes.</span></span> <span data-ttu-id="5a6dc-163">I praktiken kan du konfigurera VPN-åtkomst till ditt virtuella nätverk för att öka säkerheten.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-163">In practice, you might configure VPN access to your virtual network to increase security.</span></span>

  :::column-end:::
:::row-end:::

## <a name="summary"></a><span data-ttu-id="5a6dc-164">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="5a6dc-164">Summary</span></span>

<span data-ttu-id="5a6dc-165">Ditt program med tre nivåer körs nu på Azure i regionen USA, östra.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-165">Your three-tier application is now running on Azure in the East US region.</span></span> <span data-ttu-id="5a6dc-166">En _region_ är ett Azure-datacenter inom en viss geografisk plats.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-166">A _region_ is an Azure data center within a specific geographic location.</span></span>

<span data-ttu-id="5a6dc-167">Varje nivå kan bara komma åt tjänster från en lägre nivå.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-167">Each tier can access services only from a lower tier.</span></span> <span data-ttu-id="5a6dc-168">Den virtuella dator som kör på webbnivån har en offentlig IP-adress eftersom den tar emot trafik från Internet.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-168">The VM running in the web tier has a public IP address because it receives traffic from the internet.</span></span> <span data-ttu-id="5a6dc-169">De virtuella datorerna på de lägre nivåerna, program- och datanivåerna, har båda privata IP-adresser eftersom de inte kommunicerar direkt via Internet.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-169">The VMs in the lower tiers, the application and data tiers, each have private IP addresses because they don't communicate directly over the internet.</span></span>

<span data-ttu-id="5a6dc-170">Med _virtuella nätverk_ kan du gruppera och isolera relaterade system.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-170">_Virtual networks_ enable you to group and isolate related systems.</span></span> <span data-ttu-id="5a6dc-171">Du definierar _nätverkssäkerhetsgrupper_ för att styra vilken trafik som kan flöda via ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-171">You define _network security groups_ to control what traffic can flow through a virtual network.</span></span>

<span data-ttu-id="5a6dc-172">Den konfiguration som du såg här är en bra början.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-172">The configuration you saw here is a good start.</span></span> <span data-ttu-id="5a6dc-173">Men när du distribuerar din e-handelswebbplats till produktion i molnet kommer du troligen stöta på samma problem som i den lokala distributionen.</span><span class="sxs-lookup"><span data-stu-id="5a6dc-173">But when you deploy your e-commerce site to production in the cloud, you'll likely run into the same problems as you did in your on-premises deployment.</span></span>
