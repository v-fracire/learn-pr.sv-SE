Om det verkligen stämmer att ”du är vad du gör”, så har vi kommit till själva essensen i den här modulen. I den här kursdelen ska vi titta på två av de strategier som ofta anses vara fundamentala inom SRE. Båda härstammar från principen om vikten av att skapa ”positiva cykler”. Positiva cykler i det här sammanhanget är strategier som bygger vidare på feedbackslingor i en organisation som hjälper organisationen att hela tiden bli bättre. Längre fram kommer specifika moduler om dessa båda strategier, så vi kommer endast att gå igenom dem översiktligt här.

### <a name="virtuous-cycle-1-slis-and-slos"></a>Positiv cykel 1: Servicenivåindikatorer (SLI) och servicenivåmål (SLO)

Tidigare i den här modulen lade vi stor vikt vid att skapa ”lämplig tillförlitlighetsnivå”. Och det är här som detta begrepp sätts på prov.

Anta att du har en ny tjänst som du planerar att distribuera i en produktionsmiljö (antingen en som redan har skapats eller en som fortfarande befinner sig i planeringsprocessen). Som en del av den processen är det viktigt att fatta vissa beslut angående tjänstens tillförlitlighetsnivå. Om du inte skriver all kod själv fattas dessa beslut (och detta är avgörande) i samarbete med utvecklarna som tar fram produkten.

Det första beslutet är vad som ska användas som indikatorer på tjänstens hälsotillstånd, en så kallad servicenivåindikator eller SLI (Service Level Indicator). Ett annat sätt att fråga detta är: ”Hur vet du när tjänsten är igång och fungerar?”. Det finns många olika sätt att spåra det här som vi ska utforska i detalj lite senare, men det handlar vanligtvis om mått på framgång eller misslyckande (slutför tjänsten en åtgärd en viss andel procent av tiden), tidsspecifika mått (returnerade vi ett svar inom en viss tidsgräns), dataflödesmått (bearbetades en viss mängd data) eller en kombination av alla dessa. Som ett enkelt exempel kan vi anta att en SLI för vår tjänst är hur ofta en åtgärd lyckas, vilket anges via HTTP-kod 200 (i stället för t.ex. 500 eller en annan kod).

Nu när vi har en tydlig indikator som anger hur tjänsten fungerar måste vi bestämma vilken nivå av tillförlitlighet vi förväntar oss eller vill ha från den. Förväntar vi oss exempelvis en felfrekvens på 20 procent från tjänsten under loppet av en dag? Vi använder avrundade och stora tal här eftersom det är enklast i början. I senare moduler kommer vi att öka komplexiteten och precisionen för instruktioner som denna (”Vilka användare ser den felfrekvensen? Några av dem? De flesta?” och så vidare). Förväntningen, som definieras i samarbete med tjänstens utvecklare, är servicenivåmålet eller SLO (Service Level Objective).

Ett servicenivåmål måste vara något som kan beräknas och representeras på ett bra sätt i ditt övervakningssystem. Det är tänkt att vara ett tydligt mål för tjänstens tillförlitlighet – vilket värde är tillräckligt bra? Det finns inte utrymme för diffusa svar här, som till exempel ”Tja, jag tror att tjänsten har fungerat hyfsat den senaste veckan, men det är lite svårt att veta”. Antingen uppfyller tjänsten sitt servicenivåmål eller inte. Informationen måste vara tydlig. Om den inte uppfyller servicenivåmålet (särskilt upprepade gånger under en tidsperiod) betyder det att något är fel och måste åtgärdas.

### <a name="error-budgets"></a>Felbudgetar

Det är inte svårt att förstå att en organisation vidtar åtgärder om en tjänst inte uppfyller servicenivåmålet, men SRE tar hela konceptet ytterligare ett steg i de fall då servicenivåmålet uppnås eller överträffas. Vissa organisationer använder servicenivåmål för att skapa så kallade ”felbudgetar”.

För att demonstrera den här idén ska vi använda exempeltjänsten som vi har diskuterat och dess servicenivåmål på 80 % lyckade åtgärder (se det som att tjänsten ”ska vara igång 80 % av tiden”). Med servicenivåmålet om 80 % drifttid har vi deklarerat att vår tjänst måste vara igång 80 % av tiden. Men vad händer med de återstående 20 procenten? Om tjänsten ligger nere övriga 20 % av tiden så bryr vi oss egentligen inte om det eftersom vi har bestämt att de där ytterligare 20 % inte är viktiga som ett servicemål.

Så, om vi inte bryr oss om vad som händer under den tiden, vad kan vi då göra med tjänsten? En sak som vi kan göra är att arbeta med den aktiva tjänsten genom att uppgradera den, kanske med en ny version som lägger till vissa funktioner. Om den nya versionen fungerar och inte medför ökad avbrottstid, så är det bra. Om den nya versionen gör tjänsten mindre stabil och om den returnerar fel 10 % av tiden medan den felsöks, så är det fortfarande okej. Vi är fortfarande inom vår budget för tillåten otillförlitlighet.

En felbudget är skillnaden mellan tjänstens potentiella perfekta tillförlitlighet och dess önskade tillförlitlighet (100 % – 80 % = 20 %). I det här fallet ger felbudgeten oss en marginal på 20 % otillförlitlighet – 20 % tid då vi ”inte bryr oss om huruvida tjänsten är igång eller inte eftersom den fortfarande ligger inom specifikationerna”.  Vi kan fortsätta att utveckla tjänsten och lägga dessa 20 % av tiden på vad vi vill (kanske med fler versioner) tills kvoten är fylld, precis som vilken annan budget som helst.

Felbudgetar används också i vissa organisationer i situationer då man inte uppnår servicenivåmålet. I dessa fall kan du välja att göra något lite striktare än att bara ”vidta en åtgärd” som nämns ovan. Anta att vår tjänst har haft problem och att den bara har varit igång 60 % av tiden, enligt den servicenivåindikator som vi valde tidigare. Vi uppfyllde inte vårt mål (SLO). Vår tjänst har förbrukat dess felbudget. Organisationen kan välja att hålla tillbaka en planerad utgåva eftersom man vet att ytterligare störningar i systemet i detta läge troligen kommer att försämra tillförlitligheten ytterligare. Felbudgetar beräknas vanligtvis för en viss tidsperiod – en månad, ett kvartal och så vidare – eller löpande så att budgeten återställs när tjänstens tillförlitlighetskrav uppfylls.

Under den här perioden med begränsad versionsutgivning kan organisationen välja att styra om vissa tekniska resurser från funktionsutveckling till tillförlitlighetsarbete för att identifiera och förbättra källan till problemen som gjorde att tjänsten inte uppfyllde servicenivåmålet.

Varför vi säger ”vissa organisationer” när det gäller felbudgetar beror på att deras implementering, särskilt i de fall då den används för att begränsa versionsutgivningen, kräver ett särskilt institutionsbeslut. Organisationen måste vara villig att hålla tillbaka en ny version om tjänstens tillförlitlighetsnivå hittills inte har varit tillräckligt bra. Det är inte ett beslut som alla organisationer är villiga att fatta. Detta är inte heller det enda möjliga svaret på en tömd felbudget, men det är det som det oftast pratas om.

Vi kommer att gå in betydligt djupare på servicenivåindikatorer, servicenivåmål och felbudgetar i en separat modul, men det är värt att understryka aspekten av positiva cykler i dessa strategier. I teorin är det ett sätt för en organisation att beskriva, kommunicera och agera på en tjänsts tillförlitlighet på ett sätt som gör att alla arbetar mot bättre tillförlitlighet. Den här feedbackslingan kan vara otroligt viktig.

## <a name="virtuous-cycle-2-blameless-postmortems"></a>Positiv cykel 2: Retrospektiv analys utan syndabockar

Retrospektiv analys av viktiga och ofta oönskade händelser är inte något specifikt för tillförlitlighetsstrategier. Det är inte heller ovanligt i driftsammanhang. Något som däremot är utmärkande inom SRE är uppfattningen att ingen bär skulden. Man fokuserar på bristerna i processen eller tekniken som orsakar incidenten, inte åtgärderna som utförs av specifika individer. ”Vad var det med processen som gjorde att X kunde göra det som ledde till felet? Vilken information saknades eller var inte tillräckligt tydlig, och gjorde att man drog fel slutsats? Vilken typ av skyddsmekanismer borde ha funnits på plats så att man hade kunnat undvika den här typen av oåterkalleligt fel?” Det här är den typ av frågor som ställs vid retrospektiva analyser där man inte letar syndabockar.

Tonen och riktningen på dessa frågor är avgörande. De försöker hitta sätt att förbättra system, inte sätt att bestraffa enskilda individer vars användning, utan ont uppsåt, av systemen har bidragit till avbrottet. Det är viktigt att komma ihåg att ”tillförlitlighetsproblem inte åtgärdas med personaluppsägningar”. Organisationer som avskedar en anställd varje gång det uppstår ett produktionsproblem kommer (med mycket få undantag) inte att lära sig något från incidenten. Resultatet blir i stället en enda livrädd anställd som är kvar och som inte vågar göra något alls av rädsla för repressalier.

En välfungerande process för retrospektiv analys i en organisation skapar däremot en positiv cykel. Den gör att organisationen lär sig av avbrotten och kontinuerligt kan förbättra sina system (förutsatt att lämpliga analys och uppföljning görs).

Det här förhållningssättet till fel och problem – och som organisationen ser som möjligheter till att lära och förbättra sig – är en grundläggande princip inom SRE. En annan är upprättandet av positiva cykler som utnyttjar dessa möjligheter och som vägleder organisationen mot bättre tillförlitlighet.

I nästa kursdel ska vi utforska några andra principer och strategier, närmare bestämt de som är inriktade på den mänskliga sidan av SRE.
