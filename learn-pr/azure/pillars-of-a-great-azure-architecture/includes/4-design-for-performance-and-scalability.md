<span data-ttu-id="ba281-101">Tänk dig att nyheterna nyss har publicerat en artikel som handlar om din organisations banbrytande cancerbehandling.</span><span class="sxs-lookup"><span data-stu-id="ba281-101">Imagine a news story has just been published covering your organization's breakthrough cancer treatment.</span></span> <span data-ttu-id="ba281-102">Det här är en fantastisk milstolpe, och det kommer säkerligen att leda en stor mängd trafik till din webbplats.</span><span class="sxs-lookup"><span data-stu-id="ba281-102">This is a terrific milestone, and will undoubtedly bring a large influx of traffic to your website.</span></span> <span data-ttu-id="ba281-103">Kommer webbplatsen att kunna hantera den här trafikökningen, eller kommer belastningen att leda till att webbplatsen blir långsam eller slutar svara?</span><span class="sxs-lookup"><span data-stu-id="ba281-103">Will the website handle this traffic increase, or will the load cause the site to be slow or unresponsive?</span></span>

<span data-ttu-id="ba281-104">Här tittar vi på några grundläggande principer som säkerställer att programmens prestanda hålls på topp med hjälp av principer för skalning och optimering.</span><span class="sxs-lookup"><span data-stu-id="ba281-104">Here, we'll look at some of the basic principles of ensuring outstanding application performance using scaling and optimization principles.</span></span>

## <a name="what-is-scaling-and-performance-optimization"></a><span data-ttu-id="ba281-105">Vad är skalning och prestandaoptimering?</span><span class="sxs-lookup"><span data-stu-id="ba281-105">What is scaling and performance optimization?</span></span>

<span data-ttu-id="ba281-106">Skalning och prestandaoptimering handlar om att matcha de resurser som är tillgängliga för ett program med efterfrågan på programmet.</span><span class="sxs-lookup"><span data-stu-id="ba281-106">Scaling and performance optimization are about matching the resources available to an application with the demand it is receiving.</span></span> <span data-ttu-id="ba281-107">I prestandaoptimering ingår skalningsresurser, identifiering och optimering av eventuella flaskhalsar samt optimering av programkoden för topprestanda.</span><span class="sxs-lookup"><span data-stu-id="ba281-107">Performance optimization includes scaling resources, identifying and optimizing potential bottlenecks, and optimizing your application code for peak performance.</span></span>

### <a name="scaling"></a><span data-ttu-id="ba281-108">Skalning</span><span class="sxs-lookup"><span data-stu-id="ba281-108">Scaling</span></span>

<span data-ttu-id="ba281-109">Beräkningsresurserna kan skalas i två olika riktningar:</span><span class="sxs-lookup"><span data-stu-id="ba281-109">Compute resources can be scaled in two different directions:</span></span>

* <span data-ttu-id="ba281-110">När man skalar *upp* lägger man till fler resurser till en enda instans.</span><span class="sxs-lookup"><span data-stu-id="ba281-110">Scaling *up* is the action of adding more resources to a single instance.</span></span>
* <span data-ttu-id="ba281-111">När man skalar *ut* lägger man till fler instanser.</span><span class="sxs-lookup"><span data-stu-id="ba281-111">Scaling *out* is the addition of instances.</span></span>

![En bild som visar skala upp och skala ut för en virtuell dator för att ändra prestandan.](../media/scale-up-scale-out.png)

<span data-ttu-id="ba281-113">Man skalar upp när man vill lägga till fler resurser, till exempel CPU eller minne, till en enda instans.</span><span class="sxs-lookup"><span data-stu-id="ba281-113">Scaling up is concerned with adding more resources, such as CPU or memory, to a single instance.</span></span> <span data-ttu-id="ba281-114">Instansen kan vara en virtuell dator eller en PaaS-tjänst.</span><span class="sxs-lookup"><span data-stu-id="ba281-114">This instance could be a virtual machine or a PaaS service.</span></span> <span data-ttu-id="ba281-115">När mer kapacitet läggs till instansen ökas de resurser som finns tillgängliga för programmet, men det finns en begränsning.</span><span class="sxs-lookup"><span data-stu-id="ba281-115">The act of adding more capacity to the instance increases the resources available to your application, but it does come with a limit.</span></span> <span data-ttu-id="ba281-116">Virtuella datorer är begränsade till kapaciteten hos den värd de körs på, och de här värdarna har fysiska begränsningar.</span><span class="sxs-lookup"><span data-stu-id="ba281-116">Virtual machines are limited to the capacity of the host they run on, and hosts themselves have physical limitations.</span></span> <span data-ttu-id="ba281-117">När du skalar upp en instans kan du till slut stöta på de här begränsningarna, och därmed hindras du från att lägga till fler resurser till instansen.</span><span class="sxs-lookup"><span data-stu-id="ba281-117">Eventually, when you scale up an instance, you can run into these limits, restricting your ability to add further resources to the instance.</span></span>

<span data-ttu-id="ba281-118">Man skalar ut när man vill lägga till fler instanser till en tjänst.</span><span class="sxs-lookup"><span data-stu-id="ba281-118">Scaling out is concerned with adding additional instances to a service.</span></span> <span data-ttu-id="ba281-119">Dessa kan vara virtuella datorer eller PaaS-tjänster, men i stället för att lägga till mer kapacitet genom att göra en instans kraftfullare lägger vi till kapacitet genom att öka det totala antalet instanser.</span><span class="sxs-lookup"><span data-stu-id="ba281-119">These can be virtual machines or PaaS services, but instead of adding more capacity by making a single instance more powerful, we add capacity by increasing the overall total number of instances.</span></span> <span data-ttu-id="ba281-120">Fördelen med att skala ut är att det är möjligt för dig att skala ut i all oändlighet så länge som du har fler maskiner att lägga till arkitekturen.</span><span class="sxs-lookup"><span data-stu-id="ba281-120">The advantage of scaling out is that you can conceivably scale out forever if you have more machines to add to the architecture.</span></span> <span data-ttu-id="ba281-121">När man skalar ut krävs det någon form av belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="ba281-121">Scaling out requires some type of load distribution.</span></span> <span data-ttu-id="ba281-122">Det kan uppnås med en lastbalanserare som fördelar begäranden över alla servrar eller med en tjänsteidentifieringsmetod som identifierar aktiva servrar som begäranden kan skickas till.</span><span class="sxs-lookup"><span data-stu-id="ba281-122">This could be in the form of a load balancer distributing requests across available servers, or a service discovery mechanism for identifying active servers to send requests to.</span></span>

<span data-ttu-id="ba281-123">I båda fallen kan resurser minskas, och kostnadsoptimering kommer in i bilden.</span><span class="sxs-lookup"><span data-stu-id="ba281-123">In both cases, resources can be reduced, bringing cost optimization into the picture.</span></span>

### <a name="performance-optimization"></a><span data-ttu-id="ba281-124">Prestandaoptimering</span><span class="sxs-lookup"><span data-stu-id="ba281-124">Performance optimization</span></span>

<span data-ttu-id="ba281-125">Optimera prestandan genom att titta på nätverk och lagring och kontrollera att prestandan är godtagbar.</span><span class="sxs-lookup"><span data-stu-id="ba281-125">When optimizing for performance, you'll look at network and storage to ensure performance is acceptable.</span></span> <span data-ttu-id="ba281-126">Båda kan påverka svarstiden för ditt program.</span><span class="sxs-lookup"><span data-stu-id="ba281-126">Both can impact the response time of your application.</span></span> <span data-ttu-id="ba281-127">Genom att välja den rätta nätverks- och lagringstekniken för arkitekturen säkerställer du att dina kunder får en så bra användarupplevelse som möjligt.</span><span class="sxs-lookup"><span data-stu-id="ba281-127">Selecting the right networking and storage technologies for your architecture will help you ensure you're providing the best experience for your consumers.</span></span>

<span data-ttu-id="ba281-128">I prestandaoptimering ingår även att du får en förståelse för vilken prestanda själva programmen har.</span><span class="sxs-lookup"><span data-stu-id="ba281-128">Performance optimization will also include understanding how the applications themselves are performing.</span></span> <span data-ttu-id="ba281-129">Fel, dåligt fungerande kod och flaskhalsar i beroende system kan upptäckas med ett verktyg för hantering av programprestanda.</span><span class="sxs-lookup"><span data-stu-id="ba281-129">Errors, poorly performing code, and bottlenecks in dependent systems can all be uncovered through an application performance management tool.</span></span> <span data-ttu-id="ba281-130">De här problemen kan ofta vara dolda för slutanvändare, utvecklare och administratörer, men de kan ha en negativ inverkan på programmets totala prestanda.</span><span class="sxs-lookup"><span data-stu-id="ba281-130">Often, these issues may be hidden or obfuscated for end users, developers, and administrators, but can have adverse impact on the overall performance of your application.</span></span>

## <a name="scalability-and-performance-patterns-and-practices"></a><span data-ttu-id="ba281-131">Metodtips och mönster för skalbarhet och prestanda</span><span class="sxs-lookup"><span data-stu-id="ba281-131">Scalability and performance patterns and practices</span></span>

<span data-ttu-id="ba281-132">Låt oss ta en titt på några mönster och metodtips som kan utnyttjas för att förbättra skalbarheten och prestandan i ditt program.</span><span class="sxs-lookup"><span data-stu-id="ba281-132">Let's take a look at some patterns and practices that can be leveraged to enhance the scalability and performance of your application.</span></span>

### <a name="data-partitioning"></a><span data-ttu-id="ba281-133">Datapartitionering</span><span class="sxs-lookup"><span data-stu-id="ba281-133">Data partitioning</span></span>

<span data-ttu-id="ba281-134">I många storskaliga lösningar delas data in i partitioner som kan hanteras och kommas åt separat.</span><span class="sxs-lookup"><span data-stu-id="ba281-134">In many large-scale solutions, data is divided into separate partitions that can be managed and accessed separately.</span></span> <span data-ttu-id="ba281-135">Det är viktigt att välja partitioneringsstrategi noga för att maximera fördelarna och minimera de negativa effekterna.</span><span class="sxs-lookup"><span data-stu-id="ba281-135">The partitioning strategy must be chosen carefully to maximize the benefits while minimizing adverse effects.</span></span> <span data-ttu-id="ba281-136">Partitionering kan förbättra skalbarheten, minska konkurrensen och ge bästa möjliga prestanda.</span><span class="sxs-lookup"><span data-stu-id="ba281-136">Partitioning can help improve scalability, reduce contention, and optimize performance.</span></span>

### <a name="caching"></a><span data-ttu-id="ba281-137">Cachelagring</span><span class="sxs-lookup"><span data-stu-id="ba281-137">Caching</span></span>

<span data-ttu-id="ba281-138">Du kan förbättra prestandan genom att använda cachelagring i arkitekturen.</span><span class="sxs-lookup"><span data-stu-id="ba281-138">Use caching in your architecture can help improve performance.</span></span> <span data-ttu-id="ba281-139">Cachelagring är en metod som används för att lagra data eller tillgångar (webbsidor, bilder) som används ofta för snabbare åtkomst.</span><span class="sxs-lookup"><span data-stu-id="ba281-139">Caching is a mechanism to store frequently used data or assets (web pages, images) for faster retrieval.</span></span> <span data-ttu-id="ba281-140">Cachelagring kan användas i olika lager i ditt program.</span><span class="sxs-lookup"><span data-stu-id="ba281-140">Caching can be used at different layers of your application.</span></span> <span data-ttu-id="ba281-141">Du kan använda cachelagring mellan programservrarna och en databas om du vill minska tiderna för datahämtning.</span><span class="sxs-lookup"><span data-stu-id="ba281-141">You can use caching between your application servers and a database, to decrease data retrieval times.</span></span> <span data-ttu-id="ba281-142">Du kan också använda cachelagring mellan slutanvändarna och webbservrarna. Det statiska innehållet placeras då närmare användaren och minskar tiden det tar att returnera webbsidor till slutanvändaren.</span><span class="sxs-lookup"><span data-stu-id="ba281-142">You could also use caching between your end users and your web servers, placing static content closer to the user and decreasing the time it takes to return web pages to the end user.</span></span> <span data-ttu-id="ba281-143">Det här leder dessutom till att begäranden avlastas från databasen eller webbservrarna, vilket ökar prestandan för andra begäranden.</span><span class="sxs-lookup"><span data-stu-id="ba281-143">This also has a secondary effect of offloading requests from your database or web servers, increasing the performance for other requests.</span></span>

### <a name="autoscaling"></a><span data-ttu-id="ba281-144">Automatisk skalning</span><span class="sxs-lookup"><span data-stu-id="ba281-144">Autoscaling</span></span>

<span data-ttu-id="ba281-145">Automatisk skalning är processen för att dynamiskt tilldela resurser för att matcha prestandakrav.</span><span class="sxs-lookup"><span data-stu-id="ba281-145">Autoscaling is the process of dynamically allocating resources to match performance requirements.</span></span> <span data-ttu-id="ba281-146">När mängden arbete växer kan ett program behöver ytterligare resurser för att underhålla de önskade prestandanivåerna och uppfylla servicenivåavtal (SLA).</span><span class="sxs-lookup"><span data-stu-id="ba281-146">As the volume of work grows, an application may need additional resources to maintain the desired performance levels and satisfy service-level agreements (SLAs).</span></span> <span data-ttu-id="ba281-147">När behovet sjunker och de ytterligare resurserna inte längre behövs kan de frigöras för att minimera kostnader.</span><span class="sxs-lookup"><span data-stu-id="ba281-147">As demand slackens and the additional resources are no longer needed, they can be de-allocated to minimize costs.</span></span>

<span data-ttu-id="ba281-148">Automatisk skalning använder elasticiteten hos molndrivna miljöer och kräver lägre arbetsinsats för hantering.</span><span class="sxs-lookup"><span data-stu-id="ba281-148">Autoscaling takes advantage of the elasticity of cloud-hosted environments while easing management overhead.</span></span> <span data-ttu-id="ba281-149">Det minskar behovet av att en operatör regelbundet övervakar systemets prestanda och tar beslut om att lägga till eller ta bort resurser.</span><span class="sxs-lookup"><span data-stu-id="ba281-149">It reduces the need for an operator to continually monitor the performance of a system and make decisions about adding or removing resources.</span></span>

### <a name="decouple-resource-intensive-tasks-as-background-jobs"></a><span data-ttu-id="ba281-150">Frikoppla resurskrävande uppgifter som bakgrundsjobb</span><span class="sxs-lookup"><span data-stu-id="ba281-150">Decouple resource-intensive tasks as background jobs</span></span>

<span data-ttu-id="ba281-151">Många typer av program kräver bakgrundsaktiviteter som körs oberoende av användargränssnittet (UI).</span><span class="sxs-lookup"><span data-stu-id="ba281-151">Many types of applications require background tasks that run independently of the user interface (UI).</span></span> <span data-ttu-id="ba281-152">Det kan vara batchjobb, beräkningsintensiva bearbetningar och tidskrävande processer, till exempel arbetsflöden.</span><span class="sxs-lookup"><span data-stu-id="ba281-152">Examples include batch jobs, intensive processing tasks, and long-running processes such as workflows.</span></span> <span data-ttu-id="ba281-153">Bakgrundsjobb kan köras utan användaråtgärder – programmet kan starta jobbet och sedan fortsätta att bearbeta interaktiva begäranden från användarna.</span><span class="sxs-lookup"><span data-stu-id="ba281-153">Background jobs can be executed without requiring user interaction--the application can start the job and then continue to process interactive requests from users.</span></span> <span data-ttu-id="ba281-154">Det kan hjälpa dig för att minimera belastningen på programmets användargränssnitt, vilket kan förbättra tillgängligheten och minska interaktiva svarstider.</span><span class="sxs-lookup"><span data-stu-id="ba281-154">This can help to minimize the load on the application UI, which can improve availability and reduce interactive response times.</span></span>

### <a name="use-a-messaging-layer-between-services"></a><span data-ttu-id="ba281-155">Använda ett meddelandelager mellan tjänster</span><span class="sxs-lookup"><span data-stu-id="ba281-155">Use a messaging layer between services</span></span>

<span data-ttu-id="ba281-156">Att lägga till ett meddelandelager mellan tjänsterna kan ha en gynnsam inverkan på prestanda och skalbarhet.</span><span class="sxs-lookup"><span data-stu-id="ba281-156">Adding a messaging layer in between services can have a benefit to performance and scalability.</span></span> <span data-ttu-id="ba281-157">Genom att lägga till ett meddelandelager skapas en buffert för begäranden mellan tjänsterna. Då kan begäranden fortsätta rulla in utan fel fastän programmet inte hänger med.</span><span class="sxs-lookup"><span data-stu-id="ba281-157">Adding a messaging layer creates a buffer for requests between the services so that requests can continue to flow in without error if the application can’t keep up.</span></span> <span data-ttu-id="ba281-158">När programmet arbetar sig igenom begärandena svarar programmet på dem i den ordning de togs emot.</span><span class="sxs-lookup"><span data-stu-id="ba281-158">As the application works through the requests, they will be answered in the order in which they were received.</span></span>

### <a name="implement-scale-units"></a><span data-ttu-id="ba281-159">Implementera skalningsenheter</span><span class="sxs-lookup"><span data-stu-id="ba281-159">Implement scale units</span></span>

<span data-ttu-id="ba281-160">Skala som en enhet.</span><span class="sxs-lookup"><span data-stu-id="ba281-160">Scale as a unit.</span></span> <span data-ttu-id="ba281-161">För varje resurs ska du fastställa vilken effekt som en skalningsaktivitet kan ha på beroende system.</span><span class="sxs-lookup"><span data-stu-id="ba281-161">For each resource, determine the impact that a scaling activity may have on dependent systems.</span></span> <span data-ttu-id="ba281-162">Det gör det enklare att tillämpa skalningsåtgärder, med mindre negativ inverkan på programmet.</span><span class="sxs-lookup"><span data-stu-id="ba281-162">This makes applying scale-out operations easier, and less prone to negative impact on the application.</span></span> <span data-ttu-id="ba281-163">Att till exempel lägga till x antal webb- och arbetsroller kan kräva y antal ytterligare köer och z antal lagringskonton för att hantera den extra arbetsbelastning som genererats av rollerna.</span><span class="sxs-lookup"><span data-stu-id="ba281-163">For example, adding x number of web and worker roles might require y number of additional queues and z number of storage accounts to handle the additional workload generated by the roles.</span></span> <span data-ttu-id="ba281-164">En skalningsenhet kan därför bestå av x webb- och arbetsroller, y köer och z lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="ba281-164">A scale unit could consist of x web and worker roles, y queues, and z storage accounts.</span></span> <span data-ttu-id="ba281-165">Designa programmet så att det skalas enkelt genom att lägga till en eller flera skalningsenheter.</span><span class="sxs-lookup"><span data-stu-id="ba281-165">Design the application so that it's easily scaled by adding one or more scale units.</span></span>

### <a name="performance-monitoring"></a><span data-ttu-id="ba281-166">Prestandaövervakning</span><span class="sxs-lookup"><span data-stu-id="ba281-166">Performance monitoring</span></span>

<span data-ttu-id="ba281-167">Distribuerade program och tjänster som körs i molnet är till sin natur komplexa delar av programvara som utgör många rörliga delar.</span><span class="sxs-lookup"><span data-stu-id="ba281-167">Distributed applications and services running in the cloud are, by their nature, complex pieces of software that comprise many moving parts.</span></span> <span data-ttu-id="ba281-168">I en produktionsmiljö är det viktigt att kunna spåra hur användarna använder systemet, spåra resursutnyttjande och i allmänhet övervaka systemets hälsotillstånd och prestanda.</span><span class="sxs-lookup"><span data-stu-id="ba281-168">In a production environment, it's important to be able to track the way in which users utilize your system, trace resource utilization, and generally monitor the health and performance of your system.</span></span> <span data-ttu-id="ba281-169">Du kan använda den här informationen som diagnostiskt stöd och identifiera och åtgärda problem, och för att upptäcka potentiella problem och förebygga att de uppstår.</span><span class="sxs-lookup"><span data-stu-id="ba281-169">You can use this information as a diagnostic aid to detect and correct issues, and also to help spot potential problems and prevent them from occurring.</span></span>

<span data-ttu-id="ba281-170">Se över alla lager i programmet och identifiera och åtgärda flaskhalsar för programmets prestanda.</span><span class="sxs-lookup"><span data-stu-id="ba281-170">Look across all layers of your application and identify and remediate performance bottlenecks in your application.</span></span> <span data-ttu-id="ba281-171">De här flaskhalsarna kan till exempel vara dålig minneshantering i programmet eller till och med processen för att lägga till index i databasen.</span><span class="sxs-lookup"><span data-stu-id="ba281-171">These bottlenecks could be poor memory handling in your application, or even the process of adding indexes into your database.</span></span> <span data-ttu-id="ba281-172">Det kan vara en iterativ process då du åtgärdar en flaskhals och sedan upptäcker en annan som du inte vetat om.</span><span class="sxs-lookup"><span data-stu-id="ba281-172">It may be an iterative process as you relieve one bottleneck and then uncover another that you were unaware of.</span></span>

<span data-ttu-id="ba281-173">Med en omfattande metod för prestandaövervakning kommer du att kunna avgöra vilka typer av mönster och metodtips som din arkitektur kan dra nytta av.</span><span class="sxs-lookup"><span data-stu-id="ba281-173">With a thorough approach to performance monitoring, you'll be able to determine what types of patterns and practices your architecture will benefit from.</span></span>