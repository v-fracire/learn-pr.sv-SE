<span data-ttu-id="ed682-101">Du kan få de resurser du behöver med hjälp av antingen en stor virtuell dator eller flera små virtuella datorer med en lastbalanserare för att distribuera begäranden mellan de virtuella datorerna.</span><span class="sxs-lookup"><span data-stu-id="ed682-101">You can get the resources you need using either one large virtual machine or several small VMs with a load balancer to distribute requests among the VMs.</span></span>

<span data-ttu-id="ed682-102">VM-poolen har en bra fördel i att du kan lägga till eller ta bort virtuella datorer snabbt när behoven ändras.</span><span class="sxs-lookup"><span data-stu-id="ed682-102">The VM pool has the nice advantage that you can add or remove VMs quickly when demand changes.</span></span> <span data-ttu-id="ed682-103">För scenariot med leksaksföretaget vore den här strategin användbar för att hantera oväntade toppar i efterfrågan.</span><span class="sxs-lookup"><span data-stu-id="ed682-103">In the toy company scenario, this strategy would be useful to handle unexpected spikes in demand.</span></span> <span data-ttu-id="ed682-104">Du skulle kunna lägga till virtuella datorer till poolen när efterfrågan ökar och ta bort dem när begäran återgår till det normala.</span><span class="sxs-lookup"><span data-stu-id="ed682-104">You could add VMs to the pool when demand increased and remove them when demand returned to normal.</span></span> <span data-ttu-id="ed682-105">Poolen ger dig även redundans; om en virtuell dator slutar fungera kan de andra fortsätta att hantera begäranden utan avbrott i tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ed682-105">The pool also gives you redundancy; if one VM fails, the others can continue to handle requests with no interruption in service.</span></span>

<span data-ttu-id="ed682-106">I det här avsnittet får du se hur det går till att etablera flera virtuella datorer med hjälp av skalningsuppsättningar och automatiskt lägga till och ta bort instanser som svar på förändrade behov.</span><span class="sxs-lookup"><span data-stu-id="ed682-106">In this section, you will see how to provision multiple VMs using scale sets and how to automatically add and remove instances in response to changing demand.</span></span> 

## <a name="what-is-horizontal-scaling"></a><span data-ttu-id="ed682-107">Vad är horisontell skalning?</span><span class="sxs-lookup"><span data-stu-id="ed682-107">What is horizontal scaling?</span></span>

<span data-ttu-id="ed682-108">*Horisontell skalning* är en process för att lägga till eller ta bort virtuella datorer från en pool för att justera mängden tillgängliga resurser.</span><span class="sxs-lookup"><span data-stu-id="ed682-108">*Horizontal scaling* is the process of adding or removing virtual machines from a pool to adjust the amount of available resources.</span></span> <span data-ttu-id="ed682-109">Att lägga till datorer kallas att _skala ut_ och att ta bort datorer kallas att _skala in_.</span><span class="sxs-lookup"><span data-stu-id="ed682-109">Adding machines is called _scaling out_, and removing machines is called _scaling in_.</span></span> <span data-ttu-id="ed682-110">Lösningar som använder horisontell skalning omfattar en lastbalanserare eller en gateway för att distribuera begäranden mellan de virtuella datorerna i poolen.</span><span class="sxs-lookup"><span data-stu-id="ed682-110">Solutions that use horizontal scaling include a load balancer or gateway to distribute requests among the VMs in the pool.</span></span> <span data-ttu-id="ed682-111">Följande bild visar ett exempel på att ändra antalet instanser av virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="ed682-111">The following illustration shows an example of changing the number of virtual machine instances.</span></span>

![En bild som visar resurser som skalas ut för att hantera begäran och resurser som skalas in för att minska kostnaderna.](../media/4-ScaleInOut.png)

<span data-ttu-id="ed682-113">Den här tekniken fungerar bäst för program som kan köras på flera identiska servrar.</span><span class="sxs-lookup"><span data-stu-id="ed682-113">This technique works best for applications that can be run across multiple, identical servers.</span></span> <span data-ttu-id="ed682-114">Du kan till exempel duplicera webbservern och webbplatserna på flera virtuella datorer, så ger de alla samma svar oavsett vilken server som tar emot begäran.</span><span class="sxs-lookup"><span data-stu-id="ed682-114">For example, you can duplicate your web server and web pages on multiple VMs, and they will all give the same response no matter which server receives the request.</span></span> <span data-ttu-id="ed682-115">Å andra sidan är en virtuell dator som kör serverdelsdatabasen inte en den optimala lösningen eftersom körning av flera kopior av databasen kräver en del arbete för att hålla kopiorna synkroniserade.</span><span class="sxs-lookup"><span data-stu-id="ed682-115">On the other hand, a VM that runs your backend database is not an ideal candidate because running multiple copies of the database requires some effort to keep the copies in sync.</span></span>

## <a name="what-is-a-scale-set"></a><span data-ttu-id="ed682-116">Vad är en skalningsuppsättning?</span><span class="sxs-lookup"><span data-stu-id="ed682-116">What is a scale set?</span></span>

<span data-ttu-id="ed682-117">En *skalningsuppsättning* är en uppsättning identiska virtuella datorer, en lastbalanserare eller en gateway för att distribuera begäranden samt en valfri uppsättning regler som styr när virtuella datorer läggs till eller tas bort från poolen.</span><span class="sxs-lookup"><span data-stu-id="ed682-117">A *scale set* is a pool of identical virtual machines, a load balancer or gateway to distribute requests, and an optional set of rules that control when VMs are added or removed from the pool.</span></span> <span data-ttu-id="ed682-118">Här innebär ”identiska” att varje virtuell dator i uppsättningen skapas med hjälp av samma avbildning och har samma storlek.</span><span class="sxs-lookup"><span data-stu-id="ed682-118">Here, "identical" means that each VM in the set is created using the same image and has the same size.</span></span>

<span data-ttu-id="ed682-119">Det finns en viss flexibilitet vad gäller att konfigurera en ny virtuell dator med den programvara som du behöver.</span><span class="sxs-lookup"><span data-stu-id="ed682-119">You have some flexibility in how a new VM is configured with the software you need.</span></span> <span data-ttu-id="ed682-120">Du kan börja med en fördefinierad avbildning för det grundläggande operativsystemet och använda skript för att installera eller kopiera filer automatiskt när operativsystemet har konfigurerats.</span><span class="sxs-lookup"><span data-stu-id="ed682-120">You can start with a predefined image for the base OS and then use scripts to install or copy files automatically after the OS is set up.</span></span> <span data-ttu-id="ed682-121">Du kan även skapa en anpassad virtuell datoravbildning med operativsystemet där din programvara redan är installerad.</span><span class="sxs-lookup"><span data-stu-id="ed682-121">Alternately, you can create a custom virtual machine image with the operating system and your application software already installed.</span></span>

## <a name="how-to-distribute-requests"></a><span data-ttu-id="ed682-122">Så distribuerar du begäranden</span><span class="sxs-lookup"><span data-stu-id="ed682-122">How to distribute requests</span></span>

<span data-ttu-id="ed682-123">Du kan använda antingen en lastbalanserare eller en programgateway för att distribuera begäranden till VM-instanserna i en skalningsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="ed682-123">You can use either a load balancer or an application gateway to distribute requests to the VM instances in a scale set.</span></span>

<span data-ttu-id="ed682-124">En Azure-lastbalanserare fungerar med OSI-lager 4 (TCP och UDP) och dirigerar trafik baserat på källans IP-adress och port i kombination med målets IP-adress och port.</span><span class="sxs-lookup"><span data-stu-id="ed682-124">An Azure load balancer operates at OSI layer 4 (TCP and UDP) and routes traffic based on source IP address and port combined with the destination IP address and port.</span></span> <span data-ttu-id="ed682-125">Den kan ge tillhörighet där trafiken från samma IP-källadress dirigeras till samma målserver för att skapa konsekvens i en klientsession.</span><span class="sxs-lookup"><span data-stu-id="ed682-125">It can provide affinity, where traffic from the same source IP address is routed to the same destination server to provide consistency across a client session.</span></span> <span data-ttu-id="ed682-126">Lastbalanseraren har även en hälsoavsökningsmekanism som fastställer tillgängligheten för serverinstanser.</span><span class="sxs-lookup"><span data-stu-id="ed682-126">The load balancer also has a health probe mechanism that determines the availability of server instances.</span></span> <span data-ttu-id="ed682-127">Om en virtuell dator slutar svara på hälsoavsökningen undviker lastbalanseraren att dirigera nya anslutningar till den datorn.</span><span class="sxs-lookup"><span data-stu-id="ed682-127">If a virtual machine becomes unresponsive to the health probe, the load balancer will avoid routing any new connections to that machine.</span></span>

<span data-ttu-id="ed682-128">En programgateway fungerar på OSI-lager 7 (programlagret).</span><span class="sxs-lookup"><span data-stu-id="ed682-128">An application gateway operates at OSI layer 7 (the application layer).</span></span> <span data-ttu-id="ed682-129">Om dina virtuella datorer till exempel kör en webbserver kan gatewayen använda begärd URL för att utföra dirigering.</span><span class="sxs-lookup"><span data-stu-id="ed682-129">For example, if your VMs are running a web server, then the gateway can use the requested URL to perform routing.</span></span> <span data-ttu-id="ed682-130">Det innebär att du kan vidarebefordra begäranden med `*/customers*` i URL:en till en pool med servrar och begäranden med `*/partners*` i URL:en till en annan pool.</span><span class="sxs-lookup"><span data-stu-id="ed682-130">This means you could forward requests with `*/customers*` in the URL to one pool of servers and requests with `*/partners*` in the URL to a different pool.</span></span> <span data-ttu-id="ed682-131">Programgatewayen kan även tillhandahålla HTTP-till-HTTPS-omdirigering, Secure Sockets Layer-avslutning (SSL) för att minska bearbetningskravet på de virtuella datorerna för kryptering samt en brandvägg för webbaserade program (WAF) som använder regler för att identifiera kända webbkryphål och förhindra att dessa begäranden når webbservrarna.</span><span class="sxs-lookup"><span data-stu-id="ed682-131">The application gateway can also provide HTTP to HTTPS redirection, Secure Sockets Layer (SSL) termination to reduce the processing requirement on the virtual machines for encryption, and a web application firewall (WAF) that uses rules to detect known web exploits and prevent these requests from reaching the web servers.</span></span>

## <a name="what-is-autoscaling"></a><span data-ttu-id="ed682-132">Vad är autoskalning?</span><span class="sxs-lookup"><span data-stu-id="ed682-132">What is autoscaling?</span></span>

<span data-ttu-id="ed682-133">_Autoskalning_ är att automatiskt skala in eller ut baserat på en uppsättning regler.</span><span class="sxs-lookup"><span data-stu-id="ed682-133">_Autoscaling_ is the process of automatically scaling out or in based on a set of rules.</span></span> <span data-ttu-id="ed682-134">Reglerna kan utlösas av datorbelastning eller av ett schema.</span><span class="sxs-lookup"><span data-stu-id="ed682-134">The rules can be triggered by machine load or a schedule.</span></span> <span data-ttu-id="ed682-135">Följande bild visar hur funktionen för autoskalning hanterar instanser för att klara av belastningen.</span><span class="sxs-lookup"><span data-stu-id="ed682-135">The following illustration shows how the autoscale feature manages instances to handle the load.</span></span>

![En bild som visar hur autoskalning övervakar CPU-nivåer av en pool med virtuella datorer och lägger till instanser när CPU-användningen är över tröskelvärdet.](../media/4-autoscale.png)

<span data-ttu-id="ed682-137">Om du vill aktivera autoskalning för en skalningsuppsättning behöver du skapa en autoskalningsprofil.</span><span class="sxs-lookup"><span data-stu-id="ed682-137">To enable autoscaling for a scale set, you must create an autoscale profile.</span></span> <span data-ttu-id="ed682-138">Profilen definierar det lägsta och högsta antalet VM-instanser för uppsättningen och skalningsreglerna.</span><span class="sxs-lookup"><span data-stu-id="ed682-138">The profile defines the minimum and maximum number of VM instances for the set and the scaling rules.</span></span> <span data-ttu-id="ed682-139">Regler för autoskalning har följande element:</span><span class="sxs-lookup"><span data-stu-id="ed682-139">Autoscale rules have the following elements:</span></span>

* <span data-ttu-id="ed682-140">Måttkälla – källan för information eller data som utlöser regeln för autoskalning.</span><span class="sxs-lookup"><span data-stu-id="ed682-140">Metric source - The source of information or data that triggers the autoscale rule.</span></span> <span data-ttu-id="ed682-141">Det finns fyra alternativ:</span><span class="sxs-lookup"><span data-stu-id="ed682-141">There are four options:</span></span>
  * <span data-ttu-id="ed682-142">*Aktuell skalningsuppsättning* ger värdbaserade mått som inte kräver ytterligare agenter.</span><span class="sxs-lookup"><span data-stu-id="ed682-142">*Current scale set* provides host-based metrics that do not require any additional agents.</span></span>
  * <span data-ttu-id="ed682-143">*Lagringskonto*.</span><span class="sxs-lookup"><span data-stu-id="ed682-143">*Storage account*.</span></span> <span data-ttu-id="ed682-144">Azure-diagnostiktillägget skriver prestandamått till Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="ed682-144">The Azure diagnostic extension writes performance metrics to Azure Storage.</span></span> <span data-ttu-id="ed682-145">De här måtten används för att utlösa regler för automatisk skalning.</span><span class="sxs-lookup"><span data-stu-id="ed682-145">These metrics are used to trigger autoscale rules.</span></span>
  * <span data-ttu-id="ed682-146">*Azure Service Bus-kö* kan ange programbaserade eller andra Azure Service Bus-meddelanden för att utlösa autoskalning.</span><span class="sxs-lookup"><span data-stu-id="ed682-146">*Azure Service Bus queue* can specify application-based or other Azure Service Bus messages to trigger autoscaling.</span></span>
  * <span data-ttu-id="ed682-147">*Azure Application Insights* använder en instrumentationspaket som måste installeras i det program som körs på skalningsuppsättningen för att strömma måttdata direkt från programmet.</span><span class="sxs-lookup"><span data-stu-id="ed682-147">*Azure Application Insights* uses an instrumentation package that needs to be installed in the application running on the scale set to stream metric data directly from the application.</span></span>
* <span data-ttu-id="ed682-148">Regelkriterier – det här är det specifika mått som använder för att utlösa en regel för autoskalning.</span><span class="sxs-lookup"><span data-stu-id="ed682-148">Rule criteria - This is the specific metric you want to use to trigger an autoscale rule.</span></span> <span data-ttu-id="ed682-149">Om du använder värdbaserade mått kan detta omfatta aspekter såsom CPU-användning, mängden nätverkstrafik, diskåtgärder eller CPU-krediter.</span><span class="sxs-lookup"><span data-stu-id="ed682-149">If you are using host-based metrics, this can include aspects such as CPU usage, volume of network traffic, disk operations, or CPU credits.</span></span> <span data-ttu-id="ed682-150">Du kan till exempel konfigurera en regel för att skala ut om diskens skrivåtgärder per sekund överskrider ett tröskelvärde.</span><span class="sxs-lookup"><span data-stu-id="ed682-150">For example, you could configure a rule to scale out if disk write operations per second exceed a threshold.</span></span> <span data-ttu-id="ed682-151">Med hjälp av Azure-diagnostiktillägget eller Application Insights kan du använda alla tillgängliga mått för att utlösa regeln, men det kräver konfiguration av lämplig agent.</span><span class="sxs-lookup"><span data-stu-id="ed682-151">Using the Azure diagnostic extension or Application Insights enables you to use any available measure to trigger the rule but requires configuration of the appropriate agent.</span></span>
* <span data-ttu-id="ed682-152">Sammansättningstyp – detta anger hur du vill mäta måttdata och är något av följande alternativ:</span><span class="sxs-lookup"><span data-stu-id="ed682-152">Aggregation type - This specifies how you want to measure the metric data and will be one of the following options:</span></span>
  * <span data-ttu-id="ed682-153">Medel</span><span class="sxs-lookup"><span data-stu-id="ed682-153">Average</span></span>
  * <span data-ttu-id="ed682-154">Minimum</span><span class="sxs-lookup"><span data-stu-id="ed682-154">Minimum</span></span>
  * <span data-ttu-id="ed682-155">Maximal</span><span class="sxs-lookup"><span data-stu-id="ed682-155">Maximum</span></span>
  * <span data-ttu-id="ed682-156">Totalt</span><span class="sxs-lookup"><span data-stu-id="ed682-156">Total</span></span>
  * <span data-ttu-id="ed682-157">Senaste</span><span class="sxs-lookup"><span data-stu-id="ed682-157">Last</span></span>
  * <span data-ttu-id="ed682-158">Antal</span><span class="sxs-lookup"><span data-stu-id="ed682-158">Count</span></span>
* <span data-ttu-id="ed682-159">Operator – operatorn anger hur ett mått måste skilja sig från ett definierat tröskelvärde som utlöser regelåtgärden.</span><span class="sxs-lookup"><span data-stu-id="ed682-159">Operator - The operator denotes how a metric must be different to a defined threshold to trigger the rules action.</span></span> <span data-ttu-id="ed682-160">Detta är särskilt viktigt när du identifierar huruvida regeln ska skala ut eller in.</span><span class="sxs-lookup"><span data-stu-id="ed682-160">This is particularly important when identifying whether the rule will scale out or in.</span></span> <span data-ttu-id="ed682-161">Operatorer kan vara:</span><span class="sxs-lookup"><span data-stu-id="ed682-161">Operators can be:</span></span>
  * <span data-ttu-id="ed682-162">Större än</span><span class="sxs-lookup"><span data-stu-id="ed682-162">Greater than</span></span>
  * <span data-ttu-id="ed682-163">Större än eller lika med</span><span class="sxs-lookup"><span data-stu-id="ed682-163">Greater than or equal to</span></span>
  * <span data-ttu-id="ed682-164">Mindre än</span><span class="sxs-lookup"><span data-stu-id="ed682-164">Less than</span></span>
  * <span data-ttu-id="ed682-165">Mindre än eller lika med</span><span class="sxs-lookup"><span data-stu-id="ed682-165">Less than or equal to</span></span>
  * <span data-ttu-id="ed682-166">Lika med</span><span class="sxs-lookup"><span data-stu-id="ed682-166">Equal to</span></span>
  * <span data-ttu-id="ed682-167">Inte lika med</span><span class="sxs-lookup"><span data-stu-id="ed682-167">Not equal to</span></span>
* <span data-ttu-id="ed682-168">Åtgärd – detta avgör hur antalet instanser ändras när regeln utlöses.</span><span class="sxs-lookup"><span data-stu-id="ed682-168">Action - This determines how the number of instances will change when the rule is triggered.</span></span> <span data-ttu-id="ed682-169">Följande åtgärder är tillgängliga:</span><span class="sxs-lookup"><span data-stu-id="ed682-169">The following actions are available:</span></span>
  * <span data-ttu-id="ed682-170">*Öka antal med* ett fast antal virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="ed682-170">*Increase count by* a fixed number of virtual machines.</span></span>
  * <span data-ttu-id="ed682-171">*Öka procent med* en procentandel av befintliga instanser.</span><span class="sxs-lookup"><span data-stu-id="ed682-171">*Increase percent by* a percentage of existing instances.</span></span>
  * <span data-ttu-id="ed682-172">*Öka antal till* ett specifikt antal virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="ed682-172">*Increase count to* a specific number of virtual machines.</span></span>
  * <span data-ttu-id="ed682-173">*Minska antal med* ett fast antal virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="ed682-173">*Decrease count by* a fixed number of virtual machines.</span></span>
  * <span data-ttu-id="ed682-174">*Minska procent med* en procentandel av befintliga instanser.</span><span class="sxs-lookup"><span data-stu-id="ed682-174">*Decrease percent by* a percentage of existing instances.</span></span>
  * <span data-ttu-id="ed682-175">*Minska antal till* ett specifikt antal virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="ed682-175">*Decrease count to* a specific number of virtual machines.</span></span>

<span data-ttu-id="ed682-176">Du kan även skapa regler för autoskalning som utlöses enligt ett schema.</span><span class="sxs-lookup"><span data-stu-id="ed682-176">You can also create autoscale rules that trigger on a schedule.</span></span> <span data-ttu-id="ed682-177">Du kan till exempel definiera en regel som skalar ut på morgonen, när efterfrågan är hög, och sedan skalar in efter lunch när efterfrågan vanligtvis minskar.</span><span class="sxs-lookup"><span data-stu-id="ed682-177">For example, you might define a rule that scales out in the morning when you know demand is high and then scales in after lunch when demand typically decreases.</span></span>

## <a name="how-to-create-a-scale-set"></a><span data-ttu-id="ed682-178">Så skapar du en skalningsuppsättning</span><span class="sxs-lookup"><span data-stu-id="ed682-178">How to create a scale set</span></span>

<span data-ttu-id="ed682-179">Du kan skapa en skalningsuppsättning med hjälp av Azure-portalen, Azure PowerShell eller Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="ed682-179">You can create a scale set using the Azure portal, Azure PowerShell, or the Azure CLI.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="ed682-180">Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="ed682-180">Azure portal</span></span>

<span data-ttu-id="ed682-181">Om du använder Azure-portalen för att skapa skalningsuppsättningen anger du vilken operativsystemavbildning som ska användas för de virtuella datorerna och hur många VM-instanser som ska skapas vid start.</span><span class="sxs-lookup"><span data-stu-id="ed682-181">If you use the Azure portal to create the scale set, you will specify the operating system image to use for the virtual machines and how many VM instances to create at startup.</span></span> <span data-ttu-id="ed682-182">Du kan även ange storleken på den virtuella datorn för varje instans och huruvida du vill använda Azure Load Balancer eller Application Gateway för belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="ed682-182">You will also specify the size of virtual machine for each instance and whether to use the Azure load balancer or the application gateway for load balancing.</span></span> <span data-ttu-id="ed682-183">Om du väljer en lastbalanserare skapar portalen en standardhälsoavsökning på port 80 för den.</span><span class="sxs-lookup"><span data-stu-id="ed682-183">If you choose a load balancer, the portal will create a default health probe on port 80 for it.</span></span>

### <a name="azure-powershell"></a><span data-ttu-id="ed682-184">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="ed682-184">Azure PowerShell</span></span>

<span data-ttu-id="ed682-185">Du kan skapa en VM-skalningsuppsättning med `New-AzureRmVmss` PowerShell cmdlet.</span><span class="sxs-lookup"><span data-stu-id="ed682-185">You can create a virtual machine scale set with the `New-AzureRmVmss` PowerShell cmdlet.</span></span> <span data-ttu-id="ed682-186">Denna cmdlet kan skapa en ny skalningsuppsättning och en lastbalanserare samt kontrollera IP-adress och tilldelningar för virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="ed682-186">This cmdlet can create a new scale set, a load balancer, and control IP address and virtual network assignments.</span></span> <span data-ttu-id="ed682-187">Om inga inställningar anges i cmdleten använder `New-AzureRmVmss` följande standardinställningar:</span><span class="sxs-lookup"><span data-stu-id="ed682-187">Unless settings are specified in the cmdlet, `New-AzureRmVmss` will use the following default settings:</span></span>

* <span data-ttu-id="ed682-188">Skapa två VM-instanser</span><span class="sxs-lookup"><span data-stu-id="ed682-188">Create two virtual machine instances</span></span>
* <span data-ttu-id="ed682-189">Använd Windows Server 2016 Datacenter-avbildning</span><span class="sxs-lookup"><span data-stu-id="ed682-189">Use the Windows Server 2016 Datacenter image</span></span>
* <span data-ttu-id="ed682-190">Använd VM-storleken Standard DS1_v2</span><span class="sxs-lookup"><span data-stu-id="ed682-190">Use the Standard DS1_v2 virtual machine size</span></span>
* <span data-ttu-id="ed682-191">Skapa en lastbalanserare</span><span class="sxs-lookup"><span data-stu-id="ed682-191">Create a load balancer</span></span>
* <span data-ttu-id="ed682-192">Skapa regler för lastbalanserare för portarna 3389 och 5985 för Windows samt port 22 för Linux</span><span class="sxs-lookup"><span data-stu-id="ed682-192">Create load balancer rules for ports 3389 and 5985 for Windows, port 22 for Linux</span></span>

<span data-ttu-id="ed682-193">`New-AzureRmVmss` skapar inte en hälsoavsökning för lastbalanseraren.</span><span class="sxs-lookup"><span data-stu-id="ed682-193">`New-AzureRmVmss` does not create a health probe for the load balancer.</span></span> <span data-ttu-id="ed682-194">Bästa praxis är att skapa denna med hjälp av `Add-AzureRmLoadBalancerProbeConfig` efter du har skapat skalningsuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="ed682-194">The best practice would be to create this using `Add-AzureRmLoadBalancerProbeConfig` after you have created the scale set.</span></span>

<span data-ttu-id="ed682-195">Med horisontell skalning med skalningsuppsättningar får du flera servrar för att köra programmet.</span><span class="sxs-lookup"><span data-stu-id="ed682-195">Horizontal scaling with scale sets gives you multiple servers to run your application.</span></span> <span data-ttu-id="ed682-196">Genom att använda flera servrar kan du hantera hög belastning och säkerställa att dina tjänster hålls tillgängliga även om en server kraschar.</span><span class="sxs-lookup"><span data-stu-id="ed682-196">Using multiple servers lets you handle high loads and ensures your services remain available even if a server crashes.</span></span> <span data-ttu-id="ed682-197">Du kan lägga till autoskalning till dina skalningsuppsättningar så att systemet automatiskt anpassar sig till oväntade förändringar av efterfrågan.</span><span class="sxs-lookup"><span data-stu-id="ed682-197">You can add autoscale to your scale sets, so your system automatically adjusts to unexpected changes in demand.</span></span>