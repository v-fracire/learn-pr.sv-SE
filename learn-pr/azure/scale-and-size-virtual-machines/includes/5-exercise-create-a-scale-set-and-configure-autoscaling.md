<span data-ttu-id="87f71-101">I den här övningen använder du Azure Portal till att skapa en VM-skalningsuppsättning med regler för automatisk skalning.</span><span class="sxs-lookup"><span data-stu-id="87f71-101">In this exercise, you will use the Azure portal to create a virtual machine scale set with rules for autoscaling.</span></span>

## <a name="create-a-virtual-machine-scale-set"></a><span data-ttu-id="87f71-102">Skapa en VM-skalningsuppsättning</span><span class="sxs-lookup"><span data-stu-id="87f71-102">Create a virtual machine scale set</span></span>

1. <span data-ttu-id="87f71-103">I [Azure-portalen](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) klickar du på **Skapa en resurs**.</span><span class="sxs-lookup"><span data-stu-id="87f71-103">In the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true), click **Create a resource**.</span></span>

1. <span data-ttu-id="87f71-104">I sökrutan skriver du **skalningsuppsättning** och trycker på <kbd>Retur</kbd>.</span><span class="sxs-lookup"><span data-stu-id="87f71-104">In the search box, type **scale set** and press <kbd>ENTER</kbd>.</span></span> <span data-ttu-id="87f71-105">På bladet **Resultat** klickar du på **VM-skalningsuppsättningar**, och på bladet **VM-skalningsuppsättningar** klickar du på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="87f71-105">On the **Results** blade, click **Virtual machine scale set**, and on the **Virtual machine scale set** blade, click **Create**.</span></span>

1. <span data-ttu-id="87f71-106">Ange följande värden på bladet **Skapa VM-skalningsuppsättningar**.</span><span class="sxs-lookup"><span data-stu-id="87f71-106">On the **Create virtual machine scale set** blade, enter the following values.</span></span>
    - <span data-ttu-id="87f71-107">Använd _WebServerSS_ som **Namn**.</span><span class="sxs-lookup"><span data-stu-id="87f71-107">Use _WebServerSS_ for the **Name**.</span></span>
    - <span data-ttu-id="87f71-108">Lämna _Windows Server 2016 Datacenter_ för **Avbildning av operativsystemdisk**.</span><span class="sxs-lookup"><span data-stu-id="87f71-108">Leave _Windows Server 2016 Datacenter_ for the **Operating system disk image**.</span></span>
    - <span data-ttu-id="87f71-109">Välj _Concierge-prenumeration_ under **Prenumeration**.</span><span class="sxs-lookup"><span data-stu-id="87f71-109">Use _Concierge Subscription_ for the **Subscription**.</span></span>
    - <span data-ttu-id="87f71-110">Välj **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>** som **Resursgrupp**.</span><span class="sxs-lookup"><span data-stu-id="87f71-110">Select **<rgn>[sandbox resource group name]</rgn>** for the **Resource group**.</span></span>
    - <span data-ttu-id="87f71-111">Välj en plats från nedanstående lista:   [!include[](../../../includes/azure-sandbox-regions-note-friendly.md)]</span><span class="sxs-lookup"><span data-stu-id="87f71-111">Pick a location from the following list:   [!include[](../../../includes/azure-sandbox-regions-note-friendly.md)]</span></span>

    - <span data-ttu-id="87f71-112">Ange ett giltigt **Användarnamn** och **Lösenord**.</span><span class="sxs-lookup"><span data-stu-id="87f71-112">Set a valid **Username** and **Password**.</span></span> <span data-ttu-id="87f71-113">(Spara dessa för senare användning)</span><span class="sxs-lookup"><span data-stu-id="87f71-113">(Note these for later use)</span></span>
    - <span data-ttu-id="87f71-114">Ange **Antal instanser** till _2_.</span><span class="sxs-lookup"><span data-stu-id="87f71-114">Set the **Instance count** to _2_.</span></span>
    - <span data-ttu-id="87f71-115">Ange **Instansstorlek** till _D2s_v3_.</span><span class="sxs-lookup"><span data-stu-id="87f71-115">Set the **Instance size** to _D2s_v3_.</span></span>
    - <span data-ttu-id="87f71-116">Lämna **Autoskalning** som _Inaktiverad_.</span><span class="sxs-lookup"><span data-stu-id="87f71-116">Leave **Autoscale** as _Disabled_.</span></span>
    - <span data-ttu-id="87f71-117">Välj **Lastbalanserare**.</span><span class="sxs-lookup"><span data-stu-id="87f71-117">Select **Load balancer**.</span></span>
    - <span data-ttu-id="87f71-118">Ange _WebServerPubIP_ för **Namn på offentlig IP-adress**.</span><span class="sxs-lookup"><span data-stu-id="87f71-118">Enter _WebServerPubIP_ for the **Public IP address name**.</span></span>
    - <span data-ttu-id="87f71-119">Använd dina initialer + datum + tid som **Domännamnsetikett** så att den blir unik.</span><span class="sxs-lookup"><span data-stu-id="87f71-119">Use your initials + date + time for the **Domain name label** so it's unique.</span></span>
    - <span data-ttu-id="87f71-120">För **Virtuellt nätverk** väljer du **Skapa nytt**.</span><span class="sxs-lookup"><span data-stu-id="87f71-120">For **Virtual network** select **Create new**.</span></span> <span data-ttu-id="87f71-121">Ge det namnet **SSVNet** och klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="87f71-121">Name it **SSVNet** and click **Create** to create the VNet.</span></span>

1. <span data-ttu-id="87f71-122">Klicka på **Skapa** för att använda skalningsuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="87f71-122">Click **Create** to deploy the scale set.</span></span>

1. <span data-ttu-id="87f71-123">Vänta tills skalningsuppsättningen har skapats.</span><span class="sxs-lookup"><span data-stu-id="87f71-123">Wait for the scale set to be created.</span></span>

## <a name="create-and-apply-autoscale-rules"></a><span data-ttu-id="87f71-124">Skapa och använda regler för automatisk skalning</span><span class="sxs-lookup"><span data-stu-id="87f71-124">Create and apply autoscale rules</span></span>

1. <span data-ttu-id="87f71-125">Klicka på **Resursgrupper** i det vänstra sidofältet.</span><span class="sxs-lookup"><span data-stu-id="87f71-125">Click **Resource Groups** in the left sidebar.</span></span>

1. <span data-ttu-id="87f71-126">Välj resursgruppen **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>**.</span><span class="sxs-lookup"><span data-stu-id="87f71-126">Select the **<rgn>[sandbox resource group name]</rgn>** resource group.</span></span>

1. <span data-ttu-id="87f71-127">På bladet **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>** klickar du på **WebServerSS**-objektet för att öppna skalningsuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="87f71-127">On the **<rgn>[sandbox resource group name]</rgn>** blade, click the **WebServerSS** object to open the scale set.</span></span>

1. <span data-ttu-id="87f71-128">På bladet **WebServerSS** under **Inställningar** klickar du på **Instanser**.</span><span class="sxs-lookup"><span data-stu-id="87f71-128">On the **WebServerSS** blade, under **Settings**, click **Instances**.</span></span> <span data-ttu-id="87f71-129">Lägg märke till de två VM-instanser som körs i skalningsuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="87f71-129">Note the two virtual machine instances running within the scale set.</span></span>

1. <span data-ttu-id="87f71-130">På bladet **WebServerSS** klickar du på **Skalning**.</span><span class="sxs-lookup"><span data-stu-id="87f71-130">On the **WebServerSS** blade, click **Scaling**.</span></span>

1. <span data-ttu-id="87f71-131">På bladet **WebServerSS – Skalning** klickar du på **Aktivera autoskalning**.</span><span class="sxs-lookup"><span data-stu-id="87f71-131">On the **WebServerSS - Scaling** blade, click **Enable autoscale**.</span></span>

1. <span data-ttu-id="87f71-132">Ange namnet **WebAutoscaleSetting** på konfigurationsskärmen.</span><span class="sxs-lookup"><span data-stu-id="87f71-132">On configuration screen, set the name to **WebAutoscaleSetting**.</span></span>

1. <span data-ttu-id="87f71-133">Leta upp **Instansgränser** i standardvillkoret och ange följande värden.</span><span class="sxs-lookup"><span data-stu-id="87f71-133">In the default condition, locate the **Instance limits**, set the following values.</span></span>

    |<span data-ttu-id="87f71-134">Inställning</span><span class="sxs-lookup"><span data-stu-id="87f71-134">Setting</span></span>|<span data-ttu-id="87f71-135">Värde</span><span class="sxs-lookup"><span data-stu-id="87f71-135">Value</span></span>|
    |---|---|
    |<span data-ttu-id="87f71-136">Minimum</span><span class="sxs-lookup"><span data-stu-id="87f71-136">Minimum</span></span>|<span data-ttu-id="87f71-137">2</span><span class="sxs-lookup"><span data-stu-id="87f71-137">2</span></span>|
    |<span data-ttu-id="87f71-138">Maximal</span><span class="sxs-lookup"><span data-stu-id="87f71-138">Maximum</span></span>|<span data-ttu-id="87f71-139">8</span><span class="sxs-lookup"><span data-stu-id="87f71-139">8</span></span>|
    |<span data-ttu-id="87f71-140">Standard</span><span class="sxs-lookup"><span data-stu-id="87f71-140">Default</span></span>|<span data-ttu-id="87f71-141">2</span><span class="sxs-lookup"><span data-stu-id="87f71-141">2</span></span>|

1. <span data-ttu-id="87f71-142">Klicka på **Lägg till en regel**.</span><span class="sxs-lookup"><span data-stu-id="87f71-142">Click **Add a rule**.</span></span>

1. <span data-ttu-id="87f71-143">På bladet **Skalningsregel** anger du följande information för att skapa en regel för att skala ut två extra virtuella datorer när genomsnittlig CPU-användning är mer är 75 % över en femminutersperiod och klickar därefter på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="87f71-143">On the **Scale rule** blade, enter the following information to create a rule to scale out an extra two virtual machines when average CPU usage is more than 75% over a five-minute period, and then click **Add**.</span></span>

    |<span data-ttu-id="87f71-144">Inställning</span><span class="sxs-lookup"><span data-stu-id="87f71-144">Setting</span></span>|<span data-ttu-id="87f71-145">Värde</span><span class="sxs-lookup"><span data-stu-id="87f71-145">Value</span></span>|
    |---|---|
    |<span data-ttu-id="87f71-146">Tidsmängd</span><span class="sxs-lookup"><span data-stu-id="87f71-146">Time aggregation</span></span>|<span data-ttu-id="87f71-147">Medelvärde</span><span class="sxs-lookup"><span data-stu-id="87f71-147">Average</span></span>|
    |<span data-ttu-id="87f71-148">Måttnamn</span><span class="sxs-lookup"><span data-stu-id="87f71-148">Metric name</span></span>|<span data-ttu-id="87f71-149">Processorprocentandel</span><span class="sxs-lookup"><span data-stu-id="87f71-149">Percentage CPU</span></span>|
    |<span data-ttu-id="87f71-150">Tidsintervallstatistik</span><span class="sxs-lookup"><span data-stu-id="87f71-150">Time grain statistic</span></span>|<span data-ttu-id="87f71-151">Medelvärde</span><span class="sxs-lookup"><span data-stu-id="87f71-151">Average</span></span>|
    |<span data-ttu-id="87f71-152">Operator</span><span class="sxs-lookup"><span data-stu-id="87f71-152">Operator</span></span>|<span data-ttu-id="87f71-153">Större än</span><span class="sxs-lookup"><span data-stu-id="87f71-153">Greater than</span></span>|
    |<span data-ttu-id="87f71-154">Tröskelvärde</span><span class="sxs-lookup"><span data-stu-id="87f71-154">Threshold</span></span>|<span data-ttu-id="87f71-155">75</span><span class="sxs-lookup"><span data-stu-id="87f71-155">75</span></span>|
    |<span data-ttu-id="87f71-156">Varaktighet (i minuter)</span><span class="sxs-lookup"><span data-stu-id="87f71-156">Duration (in minutes)</span></span>|<span data-ttu-id="87f71-157">5</span><span class="sxs-lookup"><span data-stu-id="87f71-157">5</span></span>|
    |<span data-ttu-id="87f71-158">Åtgärd</span><span class="sxs-lookup"><span data-stu-id="87f71-158">Operation</span></span>|<span data-ttu-id="87f71-159">Öka antalet med</span><span class="sxs-lookup"><span data-stu-id="87f71-159">Increase count by</span></span>|
    |<span data-ttu-id="87f71-160">Antal instanser</span><span class="sxs-lookup"><span data-stu-id="87f71-160">Instance count</span></span>|<span data-ttu-id="87f71-161">2</span><span class="sxs-lookup"><span data-stu-id="87f71-161">2</span></span>|
    |<span data-ttu-id="87f71-162">Väntetid (minuter)</span><span class="sxs-lookup"><span data-stu-id="87f71-162">Cool down (minutes)</span></span>|<span data-ttu-id="87f71-163">5</span><span class="sxs-lookup"><span data-stu-id="87f71-163">5</span></span>|

1. <span data-ttu-id="87f71-164">Lägg till ännu en regel. Den här gången anger du följande information så att du skapar en regel som skalar in med en server åt gången när den genomsnittliga processoranvändningen är mindre än 30 % i fem minuter och klickar sedan på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="87f71-164">Add another rule, this time, enter the following information to create a rule to scale in one server at a time when average CPU usage is below 30% over a five-minute period, and then click **Add**.</span></span>

    |<span data-ttu-id="87f71-165">Inställning</span><span class="sxs-lookup"><span data-stu-id="87f71-165">Setting</span></span>|<span data-ttu-id="87f71-166">Värde</span><span class="sxs-lookup"><span data-stu-id="87f71-166">Value</span></span>|
    |---|---|
    |<span data-ttu-id="87f71-167">Tidsmängd</span><span class="sxs-lookup"><span data-stu-id="87f71-167">Time aggregation</span></span>|<span data-ttu-id="87f71-168">Medelvärde</span><span class="sxs-lookup"><span data-stu-id="87f71-168">Average</span></span>|
    |<span data-ttu-id="87f71-169">Måttnamn</span><span class="sxs-lookup"><span data-stu-id="87f71-169">Metric name</span></span>|<span data-ttu-id="87f71-170">Processorprocentandel</span><span class="sxs-lookup"><span data-stu-id="87f71-170">Percentage CPU</span></span>|
    |<span data-ttu-id="87f71-171">Tidsintervallstatistik</span><span class="sxs-lookup"><span data-stu-id="87f71-171">Time grain statistic</span></span>|<span data-ttu-id="87f71-172">Medelvärde</span><span class="sxs-lookup"><span data-stu-id="87f71-172">Average</span></span>|
    |<span data-ttu-id="87f71-173">Operator</span><span class="sxs-lookup"><span data-stu-id="87f71-173">Operator</span></span>|<span data-ttu-id="87f71-174">Mindre än</span><span class="sxs-lookup"><span data-stu-id="87f71-174">Less than</span></span>|
    |<span data-ttu-id="87f71-175">Tröskelvärde</span><span class="sxs-lookup"><span data-stu-id="87f71-175">Threshold</span></span>|<span data-ttu-id="87f71-176">30</span><span class="sxs-lookup"><span data-stu-id="87f71-176">30</span></span>|
    |<span data-ttu-id="87f71-177">Varaktighet (i minuter)</span><span class="sxs-lookup"><span data-stu-id="87f71-177">Duration (in minutes)</span></span>|<span data-ttu-id="87f71-178">5</span><span class="sxs-lookup"><span data-stu-id="87f71-178">5</span></span>|
    |<span data-ttu-id="87f71-179">Åtgärd</span><span class="sxs-lookup"><span data-stu-id="87f71-179">Operation</span></span>|<span data-ttu-id="87f71-180">Minska antalet med</span><span class="sxs-lookup"><span data-stu-id="87f71-180">Decrease count by</span></span>|
    |<span data-ttu-id="87f71-181">Antal instanser</span><span class="sxs-lookup"><span data-stu-id="87f71-181">Instance count</span></span>|<span data-ttu-id="87f71-182">1</span><span class="sxs-lookup"><span data-stu-id="87f71-182">1</span></span>|
    |<span data-ttu-id="87f71-183">Väntetid (minuter)</span><span class="sxs-lookup"><span data-stu-id="87f71-183">Cool down (minutes)</span></span>|<span data-ttu-id="87f71-184">5</span><span class="sxs-lookup"><span data-stu-id="87f71-184">5</span></span>|

1. <span data-ttu-id="87f71-185">Reglerna bör se ut ungefär så här:</span><span class="sxs-lookup"><span data-stu-id="87f71-185">Your rules should look something like this:</span></span>

    ![Skärmbild av regeluppsättningen för autoskalning tillämpad på VM-skalningsuppsättningen](../media/5-scale-rules.png)

1. <span data-ttu-id="87f71-187">Klicka på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="87f71-187">Click **Save**.</span></span>

## <a name="generate-load-to-demonstrate-autoscaling"></a><span data-ttu-id="87f71-188">Generera belastning för att se den automatiska skalningen</span><span class="sxs-lookup"><span data-stu-id="87f71-188">Generate load to demonstrate autoscaling</span></span>

<span data-ttu-id="87f71-189">Nu ska du använda SysInternals-verktyget **CPUStress.exe** till att generera belastning på de virtuella datorerna i skalningsuppsättningen så att du ser den automatiska utskalningen.</span><span class="sxs-lookup"><span data-stu-id="87f71-189">Now you will use the SysInternals **CPUStress.exe** tool to generate load on the virtual machines in the scale set and demonstrate automatic scaling out.</span></span>

<span data-ttu-id="87f71-190">Vi kör det här på den virtuella datorn – du behöver inte ha Windows för detta, men du _behöver_ en fjärrskrivbordsklient.</span><span class="sxs-lookup"><span data-stu-id="87f71-190">We will run this on our VM - you do not need to have Windows for this, however you _do_ need a Remote Desktop Client.</span></span> <span data-ttu-id="87f71-191">Microsoft har en för macOS och Windows, och olika distributioner av Linux inkluderar även en klient.</span><span class="sxs-lookup"><span data-stu-id="87f71-191">Microsoft has one for macOS and Windows, and various distributions of Linux include a client as well.</span></span>

1. <span data-ttu-id="87f71-192">Du ser vilken offentlig IP-adress du ska ansluta till om du bläddrar till resursgruppen **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>**.</span><span class="sxs-lookup"><span data-stu-id="87f71-192">To determine the public IP address to connect to, browse to the **<rgn>[sandbox resource group name]</rgn>** resource group.</span></span> <span data-ttu-id="87f71-193">På bladet **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>** klickar du på **WebServerSSlb**-objektet.</span><span class="sxs-lookup"><span data-stu-id="87f71-193">On the **<rgn>[sandbox resource group name]</rgn>** blade, click the **WebServerSSlb** object.</span></span>

1. <span data-ttu-id="87f71-194">På bladet **WebServerSSlb** klickar du på **IP-konfiguration för klientdel** och skriver ned den offentliga IP-adress som visas.</span><span class="sxs-lookup"><span data-stu-id="87f71-194">On the **WebServerSSlb** blade, click **Frontend IP configuration** and make a note of the public IP address shown.</span></span> <span data-ttu-id="87f71-195">Stäng bladet **LoadBalancerFrontEnd**.</span><span class="sxs-lookup"><span data-stu-id="87f71-195">Close the **LoadBalancerFrontEnd** blade.</span></span>

1. <span data-ttu-id="87f71-196">Du ser vilket portnummer du ska ansluta till om du går till bladet **WebServerSSlb** och klickar på **Ingående NAT-regler**.</span><span class="sxs-lookup"><span data-stu-id="87f71-196">To determine the port number to connect to, on the **WebServerSSlb** blade, click **Inbound NAT rules**.</span></span> <span data-ttu-id="87f71-197">Skriv ned portnumret i kolumnen Tjänst för varje virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="87f71-197">Note down the custom port number in the Service column for each virtual machine.</span></span>

1. <span data-ttu-id="87f71-198">Starta **Anslutning till fjärrskrivbord** lokalt.</span><span class="sxs-lookup"><span data-stu-id="87f71-198">On your local computer, start the **Remote Desktop Connection**.</span></span> <span data-ttu-id="87f71-199">I rutan **Dator** skriver du den offentliga IP-adressen till belastningsutjämnaren, följt av ett kolon och sedan portnumret för instans 0 (till exempel 40.67.191.221:50000). Klicka på **Anslut**.</span><span class="sxs-lookup"><span data-stu-id="87f71-199">In the **Computer** box, type the public IP address of the load balancer, followed by a colon and then the port number value for Instance 0 (for example, 40.67.191.221:50000), and then click **Connect**.</span></span>

1. <span data-ttu-id="87f71-200">I dialogrutan **Windows-säkerhet** klickar du på **Fler alternativ** och sedan på **Använd ett annat konto**.</span><span class="sxs-lookup"><span data-stu-id="87f71-200">In the **Windows Security** dialog box, click **More choices**, and then click **Use a different account**.</span></span> <span data-ttu-id="87f71-201">I rutorna **Användarnamn** och **Lösenord** anger du de autentiseringsuppgifter du angav ovan när du skapade skalningsuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="87f71-201">In the **User name** and **Password** boxes, type enter the credentials you specified above when you created the scale set.</span></span>

1. <span data-ttu-id="87f71-202">I dialogrutan **Anslutning till fjärrskrivbord** klickar du på **Ja**.</span><span class="sxs-lookup"><span data-stu-id="87f71-202">In the **Remote Desktop Connection** dialog box, click **Yes**.</span></span>

1. <span data-ttu-id="87f71-203">Öppna Internet Explorer på den virtuella datorns fjärrskrivbord. I dialogrutan **Konfigurera Internet Explorer** klickar du på **OK**.</span><span class="sxs-lookup"><span data-stu-id="87f71-203">In the virtual machine remote desktop, open Internet Explorer, and in the **Set up Internet Explorer** dialog box, click **OK**.</span></span>

1. <span data-ttu-id="87f71-204">I adressfältet i **Internet Explorer** skriver du **http://download.sysinternals.com/files/CPUSTRES.zip** och trycker på <kbd>Retur</kbd>.</span><span class="sxs-lookup"><span data-stu-id="87f71-204">In **Internet Explorer**, in the address bar, type **http://download.sysinternals.com/files/CPUSTRES.zip** and press <kbd>ENTER</kbd>.</span></span> <span data-ttu-id="87f71-205">I dialogrutan **Internet Explorer** klickar du på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="87f71-205">In the **Internet Explorer** dialog box, click **Add**.</span></span> <span data-ttu-id="87f71-206">I dialogrutan **Betrodda platser** klickar du på **Lägg till** och sedan på **Stäng**.</span><span class="sxs-lookup"><span data-stu-id="87f71-206">In the **Trusted Sites** dialog box, click **Add** and then click **Close**.</span></span>

1. <span data-ttu-id="87f71-207">Om nedladdningsprompten inte visas automatiskt kan du behöva ange webbadressen igen och trycka på <kbd>Retur</kbd>.</span><span class="sxs-lookup"><span data-stu-id="87f71-207">If the download prompt does not appear automatically, you may need to enter the URL again and press <kbd>ENTER</kbd>.</span></span> <span data-ttu-id="87f71-208">I dialogrutan **Internet Explorer** klickar du på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="87f71-208">In the **Internet Explorer** dialog box, click **Save**.</span></span> <span data-ttu-id="87f71-209">När nedladdningen är färdig klickar du på **Öppna mapp**.</span><span class="sxs-lookup"><span data-stu-id="87f71-209">Once the download is complete, click **Open folder**.</span></span>

1. <span data-ttu-id="87f71-210">I mappen **Hämtade filer** dubbelklickar du på **CPUSTRES** och sedan på programmet **CPUSTRES**.</span><span class="sxs-lookup"><span data-stu-id="87f71-210">In the **Downloads** folder, double-click **CPUSTRES**, and then double-click the **CPUSTRES** application.</span></span> <span data-ttu-id="87f71-211">I dialogrutan **Komprimerade mappar** klickar du på **Kör**.</span><span class="sxs-lookup"><span data-stu-id="87f71-211">In the **Compressed (zipped) folders** dialog box, click **Run**.</span></span>

1. <span data-ttu-id="87f71-212">I fönstret **CPU Stress** (CPU-belastning) under **Thread 1** (Tråd 1) går du till listrutan **Activity** (Aktivitet) och väljer **Maximum** (Maximal).</span><span class="sxs-lookup"><span data-stu-id="87f71-212">In the **CPU Stress** window, under **Thread 1**, in the **Activity** drop-down, select **Maximum**.</span></span> <span data-ttu-id="87f71-213">Under **Thread 2** (Tråd 2) markerar du kryssrutan **Active** (Aktiv) och i listrutan **Activity** (Aktivitet) klickar du på nedpilen i listrutan och väljer **Maximum** (Maximal).</span><span class="sxs-lookup"><span data-stu-id="87f71-213">Under **Thread 2**, click the **Active** checkbox, and in the **Activity** drop-down, click the down arrorw inside the drop-down and select **Maximum**.</span></span> <span data-ttu-id="87f71-214">De här inställningarna börjar gälla omedelbart.</span><span class="sxs-lookup"><span data-stu-id="87f71-214">These settings take effect immediately.</span></span>

1. <span data-ttu-id="87f71-215">Klicka på knappen Start i Windows och sedan på **Aktivitetshanteraren**.</span><span class="sxs-lookup"><span data-stu-id="87f71-215">Click the Windows Start button, then click **Task Manager**.</span></span> <span data-ttu-id="87f71-216">I Aktivitetshanteraren klickar du på **Mer information** och kontrollerar att CPU-värdet är över 75 %.</span><span class="sxs-lookup"><span data-stu-id="87f71-216">In Task Manager, click **More details**, and confirm that the CPU is over 75%.</span></span>

1. <span data-ttu-id="87f71-217">**Upprepa** installationen och starten av **CPUSTRES** på den andra virtuella datorn i skalningsuppsättningen och vänta i fem minuter.</span><span class="sxs-lookup"><span data-stu-id="87f71-217">**Repeat** the installation and launch of **CPUSTRES** on the other virtual machine in the scale set, and then wait for five minutes.</span></span>

1. <span data-ttu-id="87f71-218">Gå till resursgruppen **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>** i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="87f71-218">In the Azure portal, browse to the **<rgn>[sandbox resource group name]</rgn>** resource group.</span></span> <span data-ttu-id="87f71-219">På bladet **<rgn>[Resursgruppsnamn för sandbox-miljö]</rgn>** klickar du på **WebServerSS**-objektet.</span><span class="sxs-lookup"><span data-stu-id="87f71-219">On the **<rgn>[sandbox resource group name]</rgn>** blade, click the **WebServerSS** object.</span></span> <span data-ttu-id="87f71-220">På bladet **WebServerSS** klickar du på **Instanser**.</span><span class="sxs-lookup"><span data-stu-id="87f71-220">On the **WebServerSS** blade, click **Instances**.</span></span> <span data-ttu-id="87f71-221">Notera hur många virtuella datorinstanser som visas i skalningsuppsättningen och deras status.</span><span class="sxs-lookup"><span data-stu-id="87f71-221">Note how many virtual machine instances are displayed within the scale set and the status.</span></span>

<span data-ttu-id="87f71-222">Här har du skapat en VM-skalningsuppsättning med två virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="87f71-222">Here, you created a virtual machine scale set with two virtual machines.</span></span> <span data-ttu-id="87f71-223">Sedan skapade du regler för att automatiskt skala ut och skala in skalningsuppsättningen och lade till reglerna i en profil för automatisk skalning.</span><span class="sxs-lookup"><span data-stu-id="87f71-223">You then created rules to automatically scale out and scale in the scale set, and you added the rules to an autoscale profile.</span></span>
